var MM=(()=>{var T=(t,i)=>()=>(i||t((i={B5:{}}).B5,i),i.B5);var P=T((Bp,ur)=>{ur.B5=ur.Xo||(ur.Xo={proxy:null,backend:{hostname:"www.haxball.com",hostnameWs:"p2p.haxball.com",secure:!0},yi:null,Ns:9,noVariableValueChangeEvent:!1,noWebRTC:!1,fixNames:!0,cr:null,stunServers:[{urls:"stun:stun.l.google.com:19302"}],backendUrl:"wss://www.haxball.com/",httpUrl:"https://p2p.haxball.com/rs/",setTimeout:null,clearTimeout:null,setInterval:null,clearInterval:null,console:null,requestAnimationFrame:null,cancelAnimationFrame:null,crypto:null,WebSocket:null,XMLHttpRequest:null,performance:null,JSON5:null,pako:null,RTCPeerConnection:null,RTCIceCandidate:null,RTCSessionDescription:null,E:(t,i,r)=>{var n=new t,e=Object.keys(n),s=Object.keys(n.__proto__),u=e.concat(s);i.forEach((o,l)=>{if(!(!o||u.includes(o))){var c=e[l];c&&(u.push(o),Object.defineProperty(t.prototype,o,{get:function(){return this[c]},set:function(v){this[c]=v}}))}}),r.forEach((o,l)=>{if(!(!o||u.includes(o))){var c=s[l];c&&(u.push(o),t.prototype[o]=t.prototype[c])}})}})});var Ye=T((Ip,Xe)=>{var E=P();Xe.B5=(t,i)=>{var{setTimeout:r,clearTimeout:n,setInterval:e,clearInterval:s,console:u,requestAnimationFrame:o,cancelAnimationFrame:l,crypto:c,WebSocket:v,XMLHttpRequest:p,performance:C,JSON5:m,pako:h}=t,f=i?.backend;f&&(f.hostname!=null&&(E.backend.hostname=f.hostname),f.hostnameWs!=null&&(E.backend.hostnameWs=f.hostnameWs),f.secure!=null&&(E.backend.secure=f.secure)),f=i?.proxy,f&&(E.proxy={},f.HttpUrl!=null&&(E.proxy.HttpUrl=f.HttpUrl),f.WebSocketUrl!=null&&(E.proxy.WebSocketUrl=f.WebSocketUrl),f.WebSocketChangeOriginAllowed!=null&&(E.proxy.WebSocketChangeOriginAllowed=f.WebSocketChangeOriginAllowed)),i?.version!=null&&(E.Ns=i.version),E.backendUrl=(E.backend.secure?"wss":"ws")+"://"+E.backend.hostnameWs+"/",E.httpUrl=i?.proxy?.HttpUrl||(E.backend.secure?"https":"http")+"://"+E.backend.hostname+"/rs/",i?.stunServer!=null&&(E.stunServers=[{urls:i.stunServer}]),i?.noWebRTC!=null&&(E.noWebRTC=i.noWebRTC),i?.fixNames!=null&&(E.fixNames=i.fixNames),E.setTimeout=r,E.clearTimeout=n,E.setInterval=e,E.clearInterval=s,E.console=u,E.requestAnimationFrame=o,E.cancelAnimationFrame=l,E.crypto=c,E.WebSocket=v,E.XMLHttpRequest=p,E.performance=C,E.JSON5=m,E.pako=h,E.yi=i.proxyAgent,E.cr=i.identityToken,String.fromCodePoint||(String.fromCodePoint=M=>M<65536?String.fromCharCode(M):String.fromCharCode((M>>10)+55232)+String.fromCharCode((M&1023)+56320)),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(M,z){var it=new Uint8Array(this,M,z==null?null:z-M),ot=new Uint8Array(it.byteLength);return ot.set(it),ot.buffer});var q=t.webkitRTCPeerConnection||t.mozRTCPeerConnection||t.RTCPeerConnection,w=t.webkitRTCIceCandidate||t.mozRTCIceCandidate||t.RTCIceCandidate,y=t.webkitRTCSessionDescription||t.mozRTCSessionDescription||t.RTCSessionDescription;if(!E.noWebRTC){var k=new q({iceServers:[]});try{k.createAnswer().catch(function(){k.close()})}catch{var S=S.RTCPeerConnection.prototype,R=S.createOffer,A=S.createAnswer;S.createOffer=function(z){var it=this;return new Promise(function(ot,J){R.call(it,ot,J,z)})},S.createAnswer=function(z){var it=this;return new Promise(function(ot,J){A.call(it,ot,J,z)})}}}E.RTCPeerConnection=q,E.RTCIceCandidate=w,E.RTCSessionDescription=y}});var ts=T((dp,hr)=>{function Ze(t,{x:i,y:r},n){return t.e?.v.m.findIndex(e=>{var s=e.s.x-i,u=e.s.y-r;return s*s+u*u<=n*n})}function ze(t,{x:i,y:r},n){return t.e?.v.R.findIndex(e=>{var s,u,o,l,c,v,p;if(0*e.jt==0){if(u=i-e.Ue.x,o=r-e.Ue.y,(e.Xn.x*u+e.Xn.y*o>0&&e.Yn.x*u+e.Yn.y*o>0)==e.jt<=0)return!1;s=Math.sqrt(u*u+o*o)-e.Ms}else{if(l=e.z.s,c=e.b.s,u=c.x-l.x,o=c.y-l.y,v=i-c.x,p=r-c.y,(i-l.x)*u+(r-l.y)*o<=0||v*u+p*o>=0)return!1;s=e.a.x*v+e.a.y*p}return Math.abs(s)<n})}function xe(t,{x:i,y:r},n){return t.S.Nt.findIndex(e=>{var s=e.ui,u=e.hi,o=u.x-s.x,l=u.y-s.y,c=i-u.x,v=r-u.y;if((i-s.x)*o+(r-s.y)*l<=0||c*o+v*l>=0)return!1;var p=Math.sqrt(l*l+o*o);return Math.abs(c*l/p-v*o/p)<n})}function De(t,{x:i,y:r},n){return t.e?.v.Q.findIndex(e=>Math.abs(e.ut-(e.a.x*i+e.a.y*r))<n)}function be(t,{x:i,y:r},n){var e=t.e?.v;if(!e)return-1;var s=e.p;return e.pt.findIndex(u=>{var o=s[u.Yt];if(!o)return!1;var l=s[u.Zt];if(!l)return!1;var c=o.s,v=l.s,p=v.x-c.x,C=v.y-c.y,m=i-v.x,h=r-v.y;if((i-c.x)*p+(r-c.y)*C<=0||m*p+h*C>=0)return!1;var f=Math.sqrt(C*C+p*p);return Math.abs(m*C/f-h*p/f)<n})}function ae(t,{x:i,y:r}){return t.e?.v.p.findIndex(n=>{var e=n.s.x-i,s=n.s.y-r;return e*e+s*s<=n.G*n.G})}function rf(t,{x:i,y:r},n){n||(n=t.e?.S.Ni.G);var e=n*n,s=t.e?.S.ti.findIndex(u=>{var o=u.x-i,l=u.y-r;return o*o+l*l<=e});return s>=0?[s,1]:(s=t.e?.S.ii.findIndex(u=>{var o=u.x-i,l=u.y-r;return o*o+l*l<=e}),s>=0?[s,2]:[-1,-1])}function nf(t,i,r){return t.e?.v.m[Ze(t,i,r)]}function ef(t,i,r){return t.e?.v.R[ze(t,i,r)]}function sf(t,i,r){return t.S.Nt[xe(t,i,r)]}function uf(t,i,r){return t.e?.v.Q[De(t,i,r)]}function hf(t,i,r){return t.e?.v.pt[be(t,i,r)]}function of(t,i){return t.e?.v.p[ae(t,i)]}hr.B5=hr.Yo||(hr.Yo={getVertexIndexAtMapCoord:Ze,getVertexAtMapCoord:nf,getSegmentIndexAtMapCoord:ze,getSegmentAtMapCoord:ef,getGoalIndexAtMapCoord:xe,getGoalAtMapCoord:sf,getPlaneIndexAtMapCoord:De,getPlaneAtMapCoord:uf,getJointIndexAtMapCoord:be,getJointAtMapCoord:hf,getDiscIndexAtMapCoord:ae,getDiscAtMapCoord:of,getSpawnPointIndexAtMapCoord:rf})});var gi=T((Gp,or)=>{var Cn=null,fr=[];function ff(t){t&&fr.push(t)}function lf(t){if(t){var i=fr.indexOf(t);i<0||fr.splice(i,1)}}function Hi(t,i=null){this.abbr=t,this.api={errors:{}},this.defineMetadata(i)}Object.defineProperty(Hi,"current",{get:function(){return Cn},set:function(t){Cn=t,fr.forEach(i=>{i._onLanguageChange?.(t?.abbr)})}});Hi.prototype.defineMetadata=function(t){};Hi.resolveText=function(t,i){if(t){for(var r=/\$([\d]+)\?\("([^"]*)":"([^"]*)"\)/gm,n=/\$([\d]+)/gm,e,s="",u=0;(e=r.exec(t))!=null;)s+=t.substring(u,e.index)+(i[e[1]-1]?e[2]:e[3]),u=e.index+e[0].length;for(s+=t.substring(u),t="",u=0;(e=n.exec(s))!=null;)t+=s.substring(u,e.index)+i[e[1]-1],u=e.index+e[0].length;return t+=s.substring(u),t}};or.B5=or.Zo||(or.Zo={Language:Hi,addRoomToList:ff,removeRoomFromList:lf,$u:(t,i)=>Hi.resolveText(Cn?.api?.errors?.[t],i||[])})});var Q=T((Lp,lr)=>{lr.B5=lr.zo||(lr.zo={Empty:0,ConnectionClosed:1,GameStateTimeout:2,RoomClosed:3,RoomFull:4,WrongPassword:5,BannedBefore:6,IncompatibleVersion:7,FailedHost:8,Unknown:9,Cancelled:10,FailedPeer:11,KickedNow:12,Failed:13,MasterConnectionError:14,StadiumParseError:15,StadiumParseSyntaxError:16,StadiumParseUnknownError:17,ObjectCastError:18,TeamColorsReadError:19,UTF8CharacterDecodeError:20,ReadTooMuchError:21,ReadWrongStringLengthError:22,EncodeUTF8CharNegativeError:23,EncodeUTF8CharTooLargeError:24,CalculateLengthOfUTF8CharNegativeError:25,CalculateLengthOfUTF8CharTooLargeError:26,BufferResizeParameterTooSmallError:27,BadColorError:28,BadTeamError:29,StadiumLimitsExceededError:30,MissingActionConfigError:31,UnregisteredActionError:32,MissingImplementationError:33,AnnouncementActionMessageTooLongError:34,ChatActionMessageTooLongError:35,KickBanReasonTooLongError:36,ChangeTeamColorsInvalidTeamIdError:37,MissingRecaptchaCallbackError:38,ReplayFileVersionMismatchError:39,ReplayFileReadError:40,JoinRoomNullIdAuthError:41,PlayerNameTooLongError:42,PlayerCountryTooLongError:43,PlayerAvatarTooLongError:44,PlayerJoinBlockedByMPDError:45,PlayerJoinBlockedByORError:46,PluginNotFoundError:47,PluginNameChangeNotAllowedError:48,LibraryNotFoundError:49,LibraryNameChangeNotAllowedError:50,AuthFromKeyInvalidIdFormatError:51,BadActorError:55,AuthBannedError:56,NoProxyIdentityProblem:57,NoProxyIdentitySolution:58})});var $=T((Vp,vr)=>{var{E:is}=P(),lt=Q(),{$u:vf}=gi();function cr(){this.code=lt.Empty,this.params=null}cr.prototype={toString:function(){return vf(this.code,this.params)}};function vt(t,...i){var r=new cr;return r.code=t,r.params=i,r}function cf(t){this.As=t}function rs(t){this.Ft=t}function wr(t){this.zt=t,Error.captureStackTrace&&Error.captureStackTrace(this,wr)}wr.prototype=Error.prototype;Object.defineProperty(wr.prototype,"message",{get:function(){return String(this.zt)}});function wf(t){switch(t){case 4001:return vt(lt.RoomClosed);case 4100:return vt(lt.RoomFull);case 4101:return vt(lt.WrongPassword);case 4102:return vt(lt.BannedBefore);case 4103:return vt(lt.IncompatibleVersion)}return vt(lt.ConnectionClosed,t)}var pf={Error:()=>[vt(lt.MasterConnectionError),vt(lt.MasterConnectionError)],xo:()=>[vt(lt.FailedHost),vt(lt.Failed)],Do:()=>[vt(lt.Cancelled),vt(lt.Empty)],bo:t=>[wf(t)]};is(cr,["code","params"],[]);is(rs,["version"],[]);vr.B5=vr.ao||(vr.ao={Ht:vt,HBError:cr,Fe:cf,tf:rs,q:wr,Mt:pf})});var ns=T((Up,pr)=>{pr.B5=pr.allowFlags||(pr.allowFlags={JoinRoom:1,CreateRoom:2})});var es=T((Fp,qr)=>{qr.B5=qr.rf||(qr.rf={None:0,Grass:1,Hockey:2})});var gn=T((Hp,mr)=>{mr.B5=mr.nf||(mr.nf={Player:0,IP:1,Auth:2})});var ss=T((Jp,yr)=>{yr.B5=yr.Ui||(yr.Ui={None:0,Player:1})});var us=T((Kp,Cr)=>{Cr.B5=Cr.ef||(Cr.ef={ball:0,red:1,blue:2,redKO:3,blueKO:4,wall:5,kick:6,score:7,free1:8,free2:9,free3:10,free4:11,free5:12,free6:13,free7:14,free8:15,free9:16,free10:17,free11:18,free12:19,free13:20,free14:21,free15:22,free16:23,free17:24,free18:25,free19:26,free20:27,c0:28,c1:29,c2:30,c3:31})});var hs=T((Wp,gr)=>{gr.B5=gr.sf||(gr.sf={ConnectingToMaster:0,ConnectingToPeer:1,AwaitingState:2,Active:3,ConnectionFailed:4})});var os=T((Qp,kr)=>{kr.B5=kr.uf||(kr.uf={Backward:-1,Still:0,Forward:1})});var fs=T(($p,Sr)=>{Sr.B5=Sr.hf||(Sr.hf={BeforeKickOff:0,Playing:1,AfterGoal:2,Ending:3})});var I=T((Xp,Or)=>{Or.B5=Or.of||(Or.of={SetAvatar:0,SetHeadlessAvatar:1,SendChat:2,SendChatIndicator:3,SendAnnouncement:4,SendInput:5,SetStadium:6,StartGame:7,StopGame:8,PauseResumeGame:9,SetScoreLimit:10,SetTimeLimit:11,AutoTeams:12,SetTeamsLock:13,SetPlayerTeam:14,SetKickRateLimit:15,SetTeamColors:16,SetPlayerAdmin:17,KickBanPlayer:18,SetPlayerSync:19,Ping:20,SetDiscProperties:21,JoinRoom:22,ReorderPlayers:23,CheckConsistency:24,CustomEvent:25,BinaryCustomEvent:26,SetPlayerIdentity:27})});var ls=T((Yp,Tr)=>{Tr.B5=Tr.ff||(Tr.ff={None:0,GK:1,SW:2,WBL:3,DL:4,DC:5,DR:6,WBR:7,DML:8,DMC:9,DMR:10,ML:11,MC:12,MR:13,AML:14,AMC:15,AMR:16,FL:17,FC:18,FR:19,ST:20})});var kn=T((Zp,Rr)=>{Rr.B5=Rr.lf||(Rr.lf={Void:0,Boolean:1,Integer:2,Number:3,String:4,Color:5,CollisionFlags:6,Coordinate:7,Team:8,TeamWithSpec:9,BgType:10,CameraFollow:11,KickOffReset:12,Flag:13,File:14,PlayerId:15,Keys:16,Progress:17,PlayerPositionInGame:18})});var vs=T((zp,Pr)=>{Pr.B5=Pr.vf||(Pr.vf={AllowFlags:ns(),BackgroundType:es(),BanEntryType:gn(),CameraFollow:ss(),CollisionFlags:us(),ConnectionState:hs(),Direction:os(),ErrorCodes:Q(),GamePlayState:fs(),OperationType:I(),PlayerPositionInGame:ls(),VariableType:kn()})});var j=T((xp,Nr)=>{var{setTimeout:ps,clearTimeout:cs,performance:Sn}=P(),Dt=Q(),{Ht:bt,q:Ot}=$();function ci(){}ci.js=function(t,i){var r=t.charCodeAt(i);if(r==r)return r};ci.substr=function(t,i,r){if(r==null)r=t.length;else if(0>r)if(i==0)r=t.length+r;else return"";return t.substr(i,r)};ci.remove=function(t,i){var r=t.indexOf(i);return r==-1?!1:(t.splice(r,1),!0)};function Ji(t,i){i==null&&(i=!1),this.c=t,this.Et=i,this.l=0}Ji.cf=function(t,i){var r=t.getUint8(i),n,e,s,u,o,l=i;if(!(r&128))++i;else if((r&224)==192)n=t.getUint8(i+1),r=(r&31)<<6|n&63,i+=2;else if((r&240)==224)n=t.getUint8(i+1),e=t.getUint8(i+2),r=(r&15)<<12|(n&63)<<6|e&63,i+=3;else if((r&248)==240)n=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),r=(r&7)<<18|(n&63)<<12|(e&63)<<6|s&63,i+=4;else if((r&252)==248)n=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),r=(r&3)<<24|(n&63)<<18|(e&63)<<12|(s&63)<<6|u&63,i+=5;else if((r&254)==252)n=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),o=t.getUint8(i+5),r=(r&1)<<30|(n&63)<<24|(e&63)<<18|(s&63)<<12|(u&63)<<6|o&63,i+=6;else throw new Ot(bt(Dt.UTF8CharacterDecodeError,i,r));return{char:r,length:i-l}};Ji.prototype={Lt:function(t){if(t==null&&(t=this.c.byteLength-this.l),this.l+t>this.c.byteLength)throw new Ot(bt(Dt.ReadTooMuchError));var i=new Uint8Array(this.c.buffer,this.c.byteOffset+this.l,t);return this.l+=t,i},Xu:function(t){var i=this.Lt(t);return t=new ArrayBuffer(t),new Uint8Array(t).set(i),t},Zn:function(){return this.c.getInt8(this.l++)},T:function(){return this.c.getUint8(this.l++)},Es:function(){var t=this.c.getInt16(this.l,this.Et);return this.l+=2,t},Mt:function(){var t=this.c.getUint16(this.l,this.Et);return this.l+=2,t},M:function(){var t=this.c.getInt32(this.l,this.Et);return this.l+=4,t},ht:function(){var t=this.c.getUint32(this.l,this.Et);return this.l+=4,t},_s:function(){var t=this.c.getFloat32(this.l,this.Et);return this.l+=4,t},g:function(){var t=this.c.getFloat64(this.l,this.Et);return this.l+=8,t},Jt:function(){for(var t=this.l,i=0,r,n=0;r=this.c.getUint8(t+i),5>i&&(n|=(r&127)<<7*i>>>0),++i,(r&128)!=0;);return this.l+=i,n|0},rn:function(t){var i=this.l,r,n="";for(t=i+t;i<t;)r=Ji.cf(this.c,i),i+=r.length,n+=String.fromCodePoint(r.char);if(i!=t)throw new Ot(bt(Dt.ReadWrongStringLengthError,i-t));return this.l=i,n},oi:function(){var t=this.Jt();return 0>=t?null:this.rn(t-1)},ci:function(){return this.rn(this.Jt())},Yu:function(){return this.rn(this.T())},zn:function(){var t=this.ci();return JSON.parse(t)}};function st(t,i){i==null&&(i=!1),this.c=t,this.Et=i,this.l=0}st.U=function(t,i){return i==null&&(i=!1),t==null&&(t=16),new st(new DataView(new ArrayBuffer(t)),i)};st.wf=function(t,i,r){var n=r;if(0>t)throw new Ot(bt(Dt.EncodeUTF8CharNegativeError,t));if(128>t)i.setUint8(r,t&127),++r;else if(2048>t)i.setUint8(r,t>>6&31|192),i.setUint8(r+1,t&63|128),r+=2;else if(65536>t)i.setUint8(r,t>>12&15|224),i.setUint8(r+1,t>>6&63|128),i.setUint8(r+2,t&63|128),r+=3;else if(2097152>t)i.setUint8(r,t>>18&7|240),i.setUint8(r+1,t>>12&63|128),i.setUint8(r+2,t>>6&63|128),i.setUint8(r+3,t&63|128),r+=4;else if(67108864>t)i.setUint8(r,t>>24&3|248),i.setUint8(r+1,t>>18&63|128),i.setUint8(r+2,t>>12&63|128),i.setUint8(r+3,t>>6&63|128),i.setUint8(r+4,t&63|128),r+=5;else if(-2147483648>t)i.setUint8(r,t>>30&1|252),i.setUint8(r+1,t>>24&63|128),i.setUint8(r+2,t>>18&63|128),i.setUint8(r+3,t>>12&63|128),i.setUint8(r+4,t>>6&63|128),i.setUint8(r+5,t&63|128),r+=6;else throw new Ot(bt(Dt.EncodeUTF8CharTooLargeError,t));return r-n};st.pf=function(t){if(0>t)throw new Ot(bt(Dt.CalculateLengthOfUTF8CharNegativeError,t));if(128>t)return 1;if(2048>t)return 2;if(65536>t)return 3;if(2097152>t)return 4;if(67108864>t)return 5;if(-2147483648>t)return 6;throw new Ot(bt(Dt.CalculateLengthOfUTF8CharTooLargeError,t))};st.He=function(t){for(var i=0,r=t.length,n=0;n<r;)i+=st.pf(ci.js(t,n++));return i};st.qf=function(t){return t>>>=0,128>t?1:16384>t?2:2097152>t?3:268435456>t?4:5};st.prototype={Je:function(){var t=new ArrayBuffer(this.l),i=new Uint8Array(this.c.buffer,this.c.byteOffset,this.l);return new Uint8Array(t).set(i),t},_t:function(){return new Uint8Array(this.c.buffer,this.c.byteOffset,this.l)},_r:function(){return new DataView(this.c.buffer,this.c.byteOffset,this.l)},mf:function(){return new Ji(this._r(),this.Et)},Fi:function(t){this.c.byteLength<t&&this.yf(2*this.c.byteLength>=t?2*this.c.byteLength:t)},yf:function(t){if(1>t)throw new Ot(bt(Dt.BufferResizeParameterTooSmallError));if(this.c.byteLength<t){var i=new Uint8Array(this.c.buffer);t=new ArrayBuffer(t),new Uint8Array(t).set(i),this.c=new DataView(t)}},f:function(t){var i=this.l++;this.Fi(this.l),this.c.setUint8(i,t)},Bs:function(t){var i=this.l;this.l+=2,this.Fi(this.l),this.c.setInt16(i,t,this.Et)},Vt:function(t){var i=this.l;this.l+=2,this.Fi(this.l),this.c.setUint16(i,t,this.Et)},L:function(t){var i=this.l;this.l+=4,this.Fi(this.l),this.c.setInt32(i,t,this.Et)},gt:function(t){var i=this.l;this.l+=4,this.Fi(this.l),this.c.setUint32(i,t,this.Et)},Is:function(t){var i=this.l;this.l+=4,this.Fi(this.l),this.c.setFloat32(i,t,this.Et)},C:function(t){var i=this.l;this.l+=8,this.Fi(this.l),this.c.setFloat64(i,t,this.Et)},Xt:function(t){var i=this.l;this.l+=t.byteLength,this.Fi(this.l),new Uint8Array(this.c.buffer,this.c.byteOffset,this.c.byteLength).set(t,i)},Ke:function(t){this.Xt(new Uint8Array(t))},wi:function(t){this.Ut(st.He(t)),this.xn(t)},fi:function(t){t==null?this.Ut(0):(this.Ut(st.He(t)+1),this.xn(t))},Zu:function(t){var i=st.He(t);if(255<i)throw new Ot(null);this.f(i),this.xn(t)},We:function(t){this.wi(JSON.stringify(t))},xn:function(t){var i=this.l;this.Fi(i+st.He(t));for(var r=t.length,n=0;n<r;)i+=st.wf(ci.js(t,n++),this.c,i);this.l=i},Ut:function(t){var i=this.l;t>>>=0,this.Fi(i+st.qf(t)),this.c.setUint8(i,t|128),128<=t?(this.c.setUint8(i+1,t>>7|128),16384<=t?(this.c.setUint8(i+2,t>>14|128),2097152<=t?(this.c.setUint8(i+3,t>>21|128),268435456<=t?(this.c.setUint8(i+4,t>>28&127),t=5):(this.c.setUint8(i+3,this.c.getUint8(i+3)&127),t=4)):(this.c.setUint8(i+2,this.c.getUint8(i+2)&127),t=3)):(this.c.setUint8(i+1,this.c.getUint8(i+1)&127),t=2)):(this.c.setUint8(i,this.c.getUint8(i)&127),t=1),this.l+=t}};function qs(t){this.Cf=t,this.Kt=[]}qs.prototype={add:function(t){for(var i=this.Kt.length,r=0,n=this.Qe=0;n<i;){var e=n++,s=this.Kt[e];s.index++,s.weight*=.97,this.Kt[r].index<s.index&&(r=e),this.Qe+=s.weight}for(i>=this.Cf?(i=this.Kt[r],this.Qe-=i.weight,this.Kt.splice(r,1)):i={},i.value=t,i.weight=1,i.index=0,this.Qe+=i.weight,t=0;t<this.Kt.length&&this.Kt[t].value<=i.value;)++t;this.Kt.splice(t,0,i)},$e:function(t){if(this.Kt.length==0)return 0;if(this.Kt.length==1)return this.Kt[0].value;t*=this.Qe;for(var i=this.Kt[0].weight,r=0;r<this.Kt.length-1&&!(i>=t);)++r,i+=this.Kt[r].weight;return this.Kt[r].value},max:function(){return this.Kt.length==0?0:this.Kt[this.Kt.length-1].value}};function ms(t,i){this.zu=t,this.ds=i,this.Br=t,this.Xe=Sn.now()}ms.prototype={xu:function(t){return t==null&&(t=1),this.vt(),t<=this.Br?(this.Br-=t,!0):!1},gf:function(t){return this.vt(),t-=this.Br,0>=t?0:this.Xe+t*this.ds-Sn.now()},gc:function(t,i){var r=this.gf(t);this.Br-=t,ps(i,r|0)},vt:function(){var t=Sn.now(),i=Math.floor((t-this.Xe)/this.ds);this.Xe+=i*this.ds,this.Br+=i,this.Br>=this.zu&&(this.Br=this.zu,this.Xe=t)}};var ws={};Nr.B5=Nr.kf||(Nr.kf={D:ci,F:Ji,w:st,Sf:qs,gt:ms,Integer:ws,Du:(t,i)=>{var r=i!=null;if(r){switch(i){case Array:r=t instanceof Array;break;case Boolean:r=typeof t=="boolean";break;case Number:r=typeof t=="number";break;case ws:r=typeof t=="number"&&(t|0)===t;break;case String:r=typeof t=="string";break;default:r=!1}if(r)return t}throw new Ot(bt(Dt.ObjectCastError,JSON.stringify(t),JSON.stringify(i)))},bu:(t,i)=>new Promise((r,n)=>{var e=ps(()=>{n("Timed out")},i);t.then(s=>{cs(e),r(s)},s=>{cs(e),n(s)})}),Ir:(t,i)=>t.length<=i?t:ci.substr(t,0,i),extend:(t,i)=>{var r=Object.create(t),n;for(n in i)r[n]=i[n];return i.toString!==Object.prototype.toString&&(r.toString=i.toString),r}})});var wi=T((Dp,Mr)=>{var{D:On}=j();function ys(){}ys.parseInt=function(t){return t=parseInt(t,!t||t[0]!="0"||t[1]!="x"&&t[1]!="X"?10:16),isNaN(t)?null:t};function at(){}at.startsWith=function(t,i){return t.length>=i.length?On.substr(t,0,i.length)==i:!1};at.Of=function(t,i){var r=On.js(t,i);return 8<r&&14>r?!0:r==32};at.kc=function(t){for(var i=t.length,r=0;r<i&&at.Of(t,i-r-1);)++r;return 0<r?On.substr(t,0,i-r):t};at.replace=function(t,i,r){return t.split(i).join(r)};at.Gs=function(t,i){for(var r="";r="0123456789ABCDEF".charAt(t&15)+r,t>>>=4,0<t;);if(i!=null)for(;r.length<i;)r="0"+r;return r};at.Tf=function(t,i){let r="0123456789ABCDEF";return String.fromCharCode(r.indexOf(t)<<4|r.indexOf(i))};var qf=t=>{for(var i="",r=0;r<t.length;)i+=at.Tf(t.charAt(r++),t.charAt(r++));return i},mf=t=>{for(var i="",r=0,n=t.byteLength;r<n;)i+=String.fromCharCode(t[r++]);return i};Mr.B5=Mr.Rf||(Mr.Rf={au:qf,th:mf,K:ys,J:at})});var ft=T((bp,Cs)=>{var{E:yf}=P();function pt(t,i,r,n,e){this.id=t,this.O=i,this.ih=r,this.u=n,this.o=e}pt.spec=new pt(0,16777215,0,-1,0);pt.red=new pt(1,15035990,-1,8,2);pt.blue=new pt(2,5671397,1,16,4);pt.i=[pt.spec,pt.red,pt.blue];yf(pt,["id","color","defenseDir","cMask","cGroup"],[]);Cs.B5=pt});var pi=T((ap,Ar)=>{Ar.B5=Ar.Pf||(Ar.Pf={Hi:0})});var gs=T((Er,_r)=>{var jr=(()=>{var t=(v,p)=>()=>(p||v((p={B5:{}}).B5,p),p.B5),i=t((v,p)=>{function C(m,h){this.x=m,this.y=h}C.prototype={rh:function(){this.x=-this.x,this.y=-this.y}},p.B5=C}),r=t((v,p)=>{var C=i();p.B5=function(m){var{o:h=32,u:f=63,h:q=1,Nf:w=0,Mf:y=0}=m||{};this.o=h,this.u=f,this.h=q,this.s=new C(w,y)}}),n=t((v,p)=>{function C(h){var{o:f=32,u:q=63,h:w=1,Wt:y=0,z:k=null,b:S=null}=h||{};this.Xn=this.Yn=this.a=null,this.Ms=0,this.Ue=null,this.z=k,this.b=S,this.Wt=y,this.h=w,this.u=q,this.o=f,this.jt=1/0}var m=i();C.prototype={Mi:function(h){if(h*=.017453292519943295,0>h){h=-h;var f=this.z;this.z=this.b,this.b=f,this.Wt=-this.Wt}.17435839227423353<h&&5.934119456780721>h&&(this.jt=1/Math.tan(h/2))},getCurveDegrees:function(){return isFinite(this.jt)?114.59155902616465*Math.atan(1/this.jt):0},calculateNormals:function(){var{jt:h,b:{s:f},z:{s:q}}=this,w,y,k,S;isFinite(h)?(k=.5*(f.x-q.x),S=.5*(f.y-q.y),w=q.x+k-S*h,y=q.y+S+k*h,k=q.x-w,S=q.y-y,this.Ms=Math.sqrt(k*k+S*S),this.Xn=new m(y-q.y,q.x-w),this.Yn=new m(f.y-y,w-f.x),0>=h&&(this.Xn.rh(),this.Yn.rh()),this.Ue=new m(w,y)):(k=q.x-f.x,S=q.y-f.y,y=Math.sqrt(S*S+k*k),this.a=new m(-S/y,k/y))}},p.B5=C}),e=t((v,p)=>{var C=i();p.B5=function(m){var{o:h=32,u:f=63,h:q=1,ut:w=0,Sc:y=0,Oc:k=0}=m||{};this.o=h,this.u=f,this.h=q,this.ut=w,this.a=new C(y,k)}}),s=t((v,p)=>{function C(h){var{Tc:f=0,Rc:q=0,Pc:w=0,Nc:y=0}=h||{};this.hi=new m(w,y),this.ui=new m(f,q)}var m=i();C.prototype={Af:function({x:h,y:f},{x:q,y:w}){var{ui:{x:y,y:k},hi:{x:S,y:R}}=this,A=q-h,M=w-f;return 0<M*(y-h)-A*(k-f)==0<M*(S-h)-A*(R-f)?!1:(A=S-y,M=R-k,0<M*(h-y)-A*(f-k)!=0<M*(q-y)-A*(w-k))}},p.B5=C}),u=t((v,p)=>{var C=i();p.B5=function(m){var{o:h=63,u:f=63,X:q=.99,H:w=1,h:y=.5,G:k=10,xgravity:S=0,ygravity:R=0,xspeed:A=0,yspeed:M=0,Nf:z=0,Mf:it=0}=m||{};this.o=h,this.u=f,this.X=q,this.H=w,this.h=y,this.G=k,this.N=new C(S,R),this.A=new C(A,M),this.s=new C(z,it)}}),o=t((v,p)=>{p.B5=function(C){var{Ai:m=1/0,Bt:h=100,It:f=100,Yt:q=0,Zt:w=0}=C||{};this.Ai=m,this.Bt=h,this.It=f,this.Yt=q,this.Zt=w}}),l=t((v,p)=>{function C(h){m.apply(this,[h])}var m=u();C.prototype={nh:function(h,f,q){var{A:w,H:y}=this;w.x+=h*f*y,w.y+=h*q*y},jf:function(h,f){var{A:q}=this;q.x+=h,q.y+=f},Ef:function(){var{x:h,y:f}=this.A;return 0<h*h+f*f}},p.B5=C}),c=t((v,p)=>{function C(){this.p=[],this.m=[],this.Q=[],this.R=[],this.pt=[]}C.prototype={Ye:function(m,h){var f,q,w,y,k,S,{p:R,Q:A,R:M,m:z,pt:it}=this;R.forEach(({s:J,A:d,N:nt,X:et})=>{var{x:mt,y:St}=d;J.x+=m*mt,J.y+=m*St,d.x=et*(mt+nt.x),d.y=et*(St+nt.y)}),R.forEach((J,d)=>{var{h:nt,G:et,u:mt,o:St,H:ii,s:W,A:X}=J;for(f=d+1;f<R.length;f++)if(w=R[f],w.u&St&&w.o&mt){var{s:xt,A:yt}=w,wt=W.x-xt.x,ri=W.y-xt.y,Ct=wt*wt+ri*ri,G=w.G+et;if(0<Ct&&Ct<=G*G){Ct=Math.sqrt(Ct),wt/=Ct,ri/=Ct;var ni=ii/(ii+w.H);G-=Ct,Ct=G*ni,W.x+=wt*Ct,W.y+=ri*Ct,G-=Ct,xt.x-=wt*G,xt.y-=ri*G,G=wt*(X.x-yt.x)+ri*(X.y-yt.y),0>G&&(G*=nt*w.h+1,ni*=G,X.x-=wt*ni,X.y-=ri*ni,ni=G-ni,yt.x+=wt*ni,yt.y+=ri*ni,h?.Dn?.(d,J,f,w))}}if(ii!=0){A.forEach((F,Fi)=>{if(F.u&St&&F.o&mt){var{a:{x:U,y:L}}=F;y=F.ut-(U*W.x+L*W.y)+et,0<y&&(W.x+=U*y,W.y+=L*y,y=X.x*U+X.y*L,0>y&&(y*=nt*F.h+1,X.x-=y*U,X.y-=y*L,h?.bn?.(d,J,Fi)))}}),M.forEach((F,Fi)=>{if(F.u&St&&F.o&mt){var U,L,H,{x:mn,y:yn}=W;if(isFinite(F.jt)){if(L=F.Ue,U=mn-L.x,L=yn-L.y,H=F.Xn,G=F.Yn,(0<H.x*U+H.y*L&&0<G.x*U+G.y*L)==0>=F.jt||(G=Math.sqrt(U*U+L*L),G==0))return;H=G-F.Ms,U/=G,L/=G}else{var{x:Ke,y:We}=F.z.s,{x:Qe,y:$e}=F.b.s;if(L=Qe-Ke,U=$e-We,H=mn-Qe,G=yn-$e,0>=(mn-Ke)*L+(yn-We)*U||0<=H*L+G*U)return;L=F.a,U=L.x,L=L.y,H=U*H+L*G}if(G=F.Wt,G==0)0>H&&(H=-H,U=-U,L=-L);else if(0>G&&(G=-G,H=-H,U=-U,L=-L),H<-G)return;H>=et||(H=et-H,W.x+=U*H,W.y+=L*H,H=U*X.x+L*X.y,0>H&&(H*=nt*F.h+1,X.x-=U*H,X.y-=L*H,h?.an?.(d,J,Fi)))}});var tf=et*et;z.forEach((F,Fi)=>{if(F.u&St&&F.o&mt&&(y=W.x-F.s.x,k=W.y-F.s.y,S=y*y+k*k,0<S&&S<=tf)){S=Math.sqrt(S),y/=S,k/=S,S=et-S,W.x+=y*S,W.y+=k*S,S=y*X.x+k*X.y;var U=0>S;U&&(S*=nt*F.h+1,X.x-=y*S,X.y-=k*S),h?.te?.(d,J,Fi,U)}})}});for(var ot=0;2>ot;ot++)it.forEach(({Zt:J,Yt:d,Ai:nt,It:et,Bt:mt},St)=>{if(J=R[J],d=R[d],J&&d){var{s:ii,A:W,H:X}=J,{s:xt,A:yt,H:wt}=d;if(q=ii.x-xt.x,d=ii.y-xt.y,w=Math.sqrt(q*q+d*d),!(0>=w)){if(q/=w,d/=w,f=X/(X+wt),f!=f&&(f=.5),et>=mt)y=et,k=0;else if(w<=et)y=et,k=1;else if(w>=mt)y=mt,k=-1;else return;w=y-w,isFinite(nt)?(f=nt*w*.5,q*=f,d*=f,W.x+=q*X,W.y+=d*X,yt.x-=q*wt,yt.y-=d*wt,h?.nn?.(St,!1,!0)):(y=w*f,ii.x+=q*y*.5,ii.y+=d*y*.5,w-=y,xt.x-=q*w*.5,xt.y-=d*w*.5,w=q*(W.x-yt.x)+d*(W.y-yt.y),(nt=0>=k*w)&&(f*=w,W.x-=q*f,W.y-=d*f,f=w-f,yt.x+=q*f,yt.y+=d*f),h?.nn?.(St,!0,nt))}}})},addDisc:function(m){this.p.push(m)},removeDisc:function(m){m=this.p.indexOf(m),0>m||this.p.splice(m,1)}},p.B5=C});return t((v,p)=>{p.B5={Point:i(),Ls:r(),Ze:n(),Vs:e(),_f:s(),ze:u(),Us:o(),Fs:l(),Hs:c()}})()})();typeof Er<"u"?(typeof _r<"u"&&_r.B5&&(Er=_r.B5=jr),Er.Mc=jr):typeof root<"u"?root.nago=jr:window.nago=jr});var ki=T((t2,Br)=>{var{E:si}=P(),{extend:ui}=j(),Ir=ft(),Ss=pi(),{Point:Cf,Ls:Os,Ze:Ts,Vs:Rs,_f:Ps,ze:Ns,Us:Ms,Fs:As,Hs:js}=gs(),ks=1/Math.SQRT2;function Tn(){Os.call(this),this.id=0}Tn.prototype=ui(Os.prototype,{Y:function(t){var i=this.s;t.C(i.x),t.C(i.y),t.C(this.h),t.L(this.u),t.L(this.o)},it:function(t){var i=this.s;i.x=t.g(),i.y=t.g(),this.h=t.g(),this.u=t.M(),this.o=t.M()}});function Rn(){Ts.call(this),this.kt=!0,this.O=0}Rn.prototype=ui(Ts.prototype,{Y:function(t){var i=0,r=t.l;t.f(0),t.f(this.z.id),t.f(this.b.id),this.Wt!=0&&(i=1,t.C(this.Wt)),this.jt!=1/0&&(i|=2,t.C(this.jt)),this.O!=0&&(i|=4,t.L(this.O)),this.kt&&(i|=8),t.c.setUint8(r,i),t.C(this.h),t.L(this.u),t.L(this.o)},it:function(t,i){var r=t.T();this.z=i[t.T()],this.b=i[t.T()],this.Wt=r&1?t.g():0,this.jt=r&2?t.g():1/0,this.O=r&4?t.M():0,this.kt=(r&8)!=0,this.h=t.g(),this.u=t.M(),this.o=t.M()}});function Pn(){Rs.call(this)}Pn.prototype=ui(Rs.prototype,{Y:function(t){var i=this.a;t.C(i.x),t.C(i.y),t.C(this.ut),t.C(this.h),t.L(this.u),t.L(this.o)},it:function(t){var i=this.a;i.x=t.g(),i.y=t.g(),this.ut=t.g(),this.h=t.g(),this.u=t.M(),this.o=t.M()}});function Nn(){Ps.call(this),this.P=Ir.spec}Nn.prototype=ui(Ps.prototype,{Y:function(t){var i=this.ui;t.C(i.x),t.C(i.y),i=this.hi,t.C(i.x),t.C(i.y),t.f(this.P.id)},it:function(t){var i=this.ui;i.x=t.g(),i.y=t.g(),i=this.hi,i.x=t.g(),i.y=t.g(),this.P=Ir.i[t.Zn()]||Ir.spec}});function Mn(){Ns.call(this),this.O=16777215}Mn.prototype=ui(Ns.prototype,{Y:function(t){var i=this.s;t.C(i.x),t.C(i.y),i=this.A,t.C(i.x),t.C(i.y),i=this.N,t.C(i.x),t.C(i.y),t.C(this.G),t.C(this.h),t.C(this.H),t.C(this.X),t.gt(this.O),t.L(this.u),t.L(this.o)},it:function(t){var i=this.s;i.x=t.g(),i.y=t.g(),i=this.A,i.x=t.g(),i.y=t.g(),i=this.N,i.x=t.g(),i.y=t.g(),this.G=t.g(),this.h=t.g(),this.H=t.g(),this.X=t.g(),this.O=t.ht(),this.u=t.M(),this.o=t.M()},Bf:function(){var t=new Tt;return this.eh(t),t},eh:function(t){var i=t.s,r=this.s;i.x=r.x,i.y=r.y,i=t.A,r=this.A,i.x=r.x,i.y=r.y,i=t.N,r=this.N,i.x=r.x,i.y=r.y,t.G=this.G,t.h=this.h,t.H=this.H,t.X=this.X,t.O=this.O,t.u=this.u,t.o=this.o}});function An(){Ms.call(this),this.O=0}An.prototype=ui(Ms.prototype,{Y:function(t){t.f(this.Zt),t.f(this.Yt),t.C(this.It),t.C(this.Bt),t.C(this.Ai),t.L(this.O)},it:function(t){this.Zt=t.T(),this.Yt=t.T(),this.It=t.g(),this.Bt=t.g(),this.Ai=t.g(),this.O=t.M()}});function Tt(){As.call(this),this.I=null,this.ji=-1,this.Ot=null,this.sh=0,this.O=16777215}Tt.dr=function(t,i){t.G=i.G,t.h=i.h,t.H=i.H,t.X=i.X,t.O=i.O,t.u=i.u,t.o=i.o;var r=t.s,n=i.s;r.x=n.x,r.y=n.y,r=t.A,n=i.A,r.x=n.x,r.y=n.y,r=t.N,n=i.N,r.x=n.x,r.y=n.y};Tt.prototype=ui(As.prototype,{Y:function(t){var i=this.s;t.C(i.x),t.C(i.y),i=this.A,t.C(i.x),t.C(i.y),i=this.N,t.C(i.x),t.C(i.y),t.C(this.G),t.C(this.h),t.C(this.H),t.C(this.X),t.gt(this.O),t.L(this.u),t.L(this.o)},it:function(t){var i=this.s;i.x=t.g(),i.y=t.g(),i=this.A,i.x=t.g(),i.y=t.g(),i=this.N,i.x=t.g(),i.y=t.g(),this.G=t.g(),this.h=t.g(),this.H=t.g(),this.X=t.g(),this.O=t.ht(),this.u=t.M(),this.o=t.M()},Ei:function(){var t=Ss.Hi;return t!=this.ji&&(this.Ot||(this.Ot=new Tt),this.ji=t,Tt.dr(this.Ot,this)),this.Ot}});function ei(){js.call(this),this.Nt=[],this.ji=-1,this.Ot=null}ei.dr=function(t,i){if(i.p==null)t.p=null;else{t.p==null&&(t.p=[]);for(var r=t.p,n=i.p,e=n.length,s;r.length>e;)r.pop();for(e=0,s=n.length;e<s;){var u=e++;r[u]=n[u].Ei()}}t.m=i.m,t.R=i.R,t.Q=i.Q,t.pt=i.pt};ei.prototype=ui(js.prototype,{Y:function(t){t.f(this.p.length);for(var i=0,r=this.p.length;i<r;){var n=i++,e=this.p[n];e.sh=n,e.Y(t)}},it:function(t){this.p=[];for(var i=t.T(),r=0;r<i;){++r;var n=new Tt;n.it(t),this.addDisc(n)}},Ei:function(){var t=Ss.Hi;return t!=this.ji&&(this.Ot||(this.Ot=new ei),this.ji=t,ei.dr(this.Ot,this)),this.Ot},kickBall:function(t,i,r){var e=i.s,s=t.s,n=e.x-s.x,e=e.y-s.y,s=Math.sqrt(n*n+e*e);if(!(s-i.G-t.G>=4)){var u=n/s,o=e/s;return i.nh(r.wr,u,o),t.nh(-r.pr,u,o),!0}},If:function(t,i){var r=t.Tt,n=((r&8)>0)-((r&4)>0),e=n==0,s=((r&2)>0)-((r&1)>0),u=s==0;!e&&!u&&(n*=ks,s*=ks),r=t.Ci,(!e||!u)&&(u=r?i.qr:i.mr,t.B.jf(n*u,s*u)),t.B.X=r?i.yr:i.X},uh:function(t,i){t.B&&(this.removeDisc(t.B),i?.(t),t.B=null)},df:function(t,i,r){t.Tt=0;var n=t.B;n==null&&(n=new Tt,n.I=t.id,t.B=n,this.addDisc(n),r?.(t));var e=i.Ni;n.O=0,n.G=e.G,n.H=e.H,n.X=e.X,n.h=e.h,n.u=39,n.o=t.P.o|e.o;var s=t.P==Ir.red?i.ti:i.ii;s.length==0?(n.s.x=t.P.ih*i._i,n.s.y=0):(t=n.s,s=s[s.length-1],t.x=s.x,t.y=s.y),s=n.A,s.x=0,s.y=0,n=n.N,e=e.N,n.x=e.x,n.y=e.y}});ei.Gf=t=>{var i=new ei;return i.m=t.m,i.R=t.R,i.Nt=t.Nt,i.Q=t.Q,i.pt=t.pt,t.p.forEach(r=>{var n=new Tt;return n.s.x=r.s.x,n.s.y=r.s.y,n.A.x=r.A.x,n.A.y=r.A.y,n.N.x=r.N.x,n.N.y=r.N.y,n.G=r.G,n.h=r.h,n.H=r.H,n.X=r.X,n.O=r.O,n.u=r.u,n.o=r.o,i.addDisc(n),n}),i};si(Tn,["cGroup","cMask","bCoef","pos","id"],[]);si(Rn,["normal","v1Normal","v0Normal","arcRadius","arcCenter","v0","v1","bias","bCoef","cMask","cGroup","curveF","vis","color"],[]);si(Pn,["cGroup","cMask","bCoef","dist","normal"],[]);si(Nn,["p1","p0","team"],[]);si(Mn,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","color"],[]);si(An,["strength","maxLength","minLength","d1","d0","color"],[]);si(Tt,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","playerId",null,"ext",null,"color"],[]);si(ei,["discs","vertices","planes","segments","joints","goals",null,"ext"],[]);Br.B5=Br.Lf||(Br.Lf={Point:Cf,Ls:Tn,Ze:Rn,Vs:Pn,Vf:Nn,ze:Mn,Us:An,Fs:Tt,Hs:ei})});var jn=T((i2,dr)=>{var{noVariableValueChangeEvent:gf}=P(),Gr=[];function N(t,i){Gr.push({name:t})}function kf(t){var i=Gr.findIndex(r=>r.name==t);i<0||Gr.splice(i,1)}N("PlayerObjectCreated");N("PlayerDiscCreated");N("PlayerDiscDestroyed");N("RoomLink");N("PlayerBallKick");N("TeamGoal");N("GameEnd");N("GameTick");N("PlayerSyncChange");N("Announcement");N("KickOff");N("AutoTeams");N("ScoreLimitChange");N("TimeLimitChange");N("PlayerAdminChange");N("PlayerAvatarChange");N("PlayerHeadlessAvatarChange");N("PlayersOrderChange");N("PlayerTeamChange");N("StadiumChange");N("TeamColorsChange");N("TeamsLockChange");N("PlayerJoin");N("GamePauseChange");N("PlayerChat");N("PlayerInputChange");N("PlayerChatIndicatorChange");N("PlayerLeave");N("SetDiscProperties");N("KickRateLimitChange");N("GameStart");N("GameStop");N("PingData");N("PingChange");N("CollisionDiscVsDisc");N("CollisionDiscVsSegment");N("CollisionDiscVsPlane");N("CollisionDiscVsVertex");N("ModifyJoint");N("TimeIsUp");N("PositionsReset");N("BansClear");N("BanClear");N("ExtrapolationChange");N("HandicapChange");N("RoomRecaptchaModeChange");N("RoomTokenChange");N("RoomRecordingChange");N("RoomPropertiesChange");N("CustomEvent");N("BinaryCustomEvent");N("IdentityEvent");N("PluginActiveChange");N("ConfigUpdate");N("RendererUpdate");N("PluginUpdate");N("LibraryUpdate");N("LanguageChange");gf||N("VariableValueChange");dr.B5=dr.Js||(dr.Js={Js:Gr,Uf:N,Ff:kf})});var B=T((r2,Lr)=>{var Si=Q(),{Ht:Oi,q:Ti}=$();function b(){this.V=0}b.hh=new Map;b.oh=new Map;b.ie=0;b.qt=function(t){return t.lt==null&&(t.lt=!0),t.ct==null&&(t.ct=!0),t};b.mt=function(t){if(t.Hf=b.ie,t.wt==null)throw new Ti(Oi(Si.MissingActionConfigError));t.prototype.en=t.wt,b.hh.set(b.ie,t),b.oh.set(t.prototype.eventType,t),b.ie++};b.Cr=function(t,i){var r=t?.rt?.Hf;if(r==null)throw new Ti(Oi(Si.UnregisteredActionError));i.f(r),t.ot(i)};b.ir=function(t,i){var r=Object.create(b.hh.get(t.T()).prototype);return r.V=0,r.St=0,r.ft(t,i),r};b.prototype={fh:function(){return!0},apply:function(){throw new Ti(Oi(Si.MissingImplementationError))},ft:function(){throw new Ti(Oi(Si.MissingImplementationError))},ot:function(){throw new Ti(Oi(Si.MissingImplementationError))},copy:function(){throw new Ti(Oi(Si.MissingImplementationError))},rt:b};Object.defineProperty(b.prototype,"eventType",{get(){return null}});function Sf(t,i){return t.V=i.V,t.St=i.St,t.i=i.i,t.xe=i.xe,t}Lr.B5=Lr.Jf||(Lr.Jf={Event:b,yt:Sf})});var En=T((n2,Es)=>{function Vr(){this.list=[]}Vr.Kf=function(t,i,r){if(t.length==0)for(t=0;t<i.length;)r.push(i[t++]);else if(i.length==0)for(i=0;i<t.length;)r.push(t[i++]);else for(var n=0,e=t.length,s=0,u=i.length;;){var o=t[n],l=i[s];if(o.St<=l.St){if(r.push(o),++n,n>=e){for(;s<u;)r.push(i[s++]);break}}else if(r.push(l),++s,s>=u){for(;n<e;)r.push(t[n++]);break}}};Vr.prototype={Ks:function(t){for(var i=0,r=t.St,n=t.V,e=0,s=this.list;e<s.length;){var u=s[e];++e;var o=u.St;if(o>r)break;if(o==r){if(u=u.V,u>n)break;u==n&&++n}++i}t.V=n,this.list.splice(i,0,t)},Wf:function(t){for(var i=0,r=0,n=this.list;r<n.length&&!(n[r++].St>=t);)++i;this.list.splice(0,i)},Qf:function(t,i){for(var r=this.list;0<r.length;)r.pop();Vr.Kf(t.list,i.list,this.list)},$f:function(t){for(var i=0,r=this.list,n=0,e=r.length;n<e;){var s=r[n++];s.Gr!=t&&(r[i]=s,++i)}for(;r.length>i;)r.pop()},Xf:function(t){for(var i=0,r=0,n=this.list;r<n.length&&!(n[r++].St>=t);)++i;return i}};Es.B5=Vr});var Ri=T((e2,Is)=>{var{Ht:_n,q:Bn}=$(),_s=En(),Of=pi(),In=Q();function Bs(t){this.Ws=new _s,this.Lr=0,this.ri=0,this.rr=new _s,this.Qs=0,this.gi=0,this.Bi=0,this.Ji=.06,this.$s=16.666666666666668,this.De=120,this.k=0,this.t=t}Bs.prototype={_:function(){throw new Bn(_n(In.MissingImplementationError))},gr:function(){throw new Bn(_n(In.MissingImplementationError))},vt:function(){throw new Bn(_n(In.MissingImplementationError))},lh:function(t){for(var i=this.rr.list,r=0,n=i.length,e=0;e<t;){for(++e;r<n;){var s=i[r];if(s.St!=this.k)break;s.apply(this.t),this.ni!=null&&this.ni(s),this.ri++,++r}this.t.vt(1),this.Lr+=this.ri,this.ri=0,this.k++}for(;r<n&&(t=i[r],!(t.St!=this.k||t.V!=this.ri));)t.apply(this.t),this.ni!=null&&this.ni(t),this.ri++,++r;i.splice(0,r)},re:function(t){t.St==this.k&&t.V<=this.ri?(t.V=this.ri++,t.apply(this.t,this.haxball),this.ni!=null&&this.ni(t)):this.rr.Ks(t)},vh:function(t,i){if(0>=t)return this.t;t>this.De&&(t=this.De),Of.Hi++;var r=this.t.Ei(),n;i!=null?(this.Ws.Qf(this.rr,i),n=this.Ws):n=this.rr,n=n.list;for(var e=0,s=n.length,u=this.k,o=t|0,l=u+o;u<=l;){for(;e<s;){var c=n[e];if(c.St>u)break;c.en.ct&&c.apply(r),++e}r.vt(u!=l?1:t-o),++u}for(n=this.Ws.list;0<n.length;)n.pop();return r},Yf:function(t){this.gi=this.Ji*t|0,this.t.sn&&this.t.sn(t)},ch:function(t){this.Qs=this.Ji*t,this.t.un&&this.t.un(t)}};Is.B5=Bs});var Gs=T((s2,ds)=>{var{E:Tf}=P(),{Ht:Rf,q:Pf}=$(),{Event:dn,yt:Nf}=B(),Mf=Q(),Af=I(),{extend:jf,Ir:Ef}=j();function Rt(){this.V=0,this.hn="",this.O=0,this.ne=0,this.ee=0,this.i=0,this.xe=null}Rt.create=function(t,i,r,n){var e=new Rt;return e.hn=t,e.O=i,e.ne=r,e.ee=n,e};Rt.prototype=jf(dn.prototype,{apply:function(t){this.i==0&&t.se?.(this.hn,this.O,this.ne,this.ee)},ot:function(t){t.wi(Ef(this.hn,1e3)),t.L(this.O),t.f(this.ne),t.f(this.ee)},ft:function(t){if(this.hn=t.ci(),1e3<this.hn.length)throw new Pf(Rf(Mf.AnnouncementActionMessageTooLongError));this.O=t.M(),this.ne=t.T(),this.ee=t.T()},copy:function(){return Nf(Rt.create(this.hn,this.O,this.ne,this.ee),this)},rt:Rt});Object.defineProperty(Rt.prototype,"eventType",{get(){return Af.SendAnnouncement}});Rt.wt=dn.qt({ct:!1,lt:!1,Xs:{Ys:10,Zs:900}});dn.mt(Rt);Tf(Rt,[null,"msg","color","style","sound","byId","targetId"],[]);ds.B5=Rt});var Vs=T((u2,Ls)=>{var{E:_f}=P(),{Event:Gn,yt:Bf}=B(),If=I(),{extend:df}=j();function Pt(){this.V=0,this.value=0,this.id=null,this.on=null,this.i=0}Pt.create=function(t,i,r){var n=new Pt;return n.value=t,n.id=i,n.on=r,n};Pt.prototype=df(Gn.prototype,{apply:function(t){if(this.id!=null){t.wh&&t.wh(this.i,this.id,this.on);return}var i=t.getPlayer(this.i);i!=null&&t.ue?.(i,this.value)},ot:function(t){t.f(this.value),this.id!=null&&this.on!=null&&(t.L(this.id),t.f(this.on))},ft:function(t,i){if(this.value=t.T(),!i)try{this.id=t.M(),this.on=t.T()}catch{}},copy:function(){return Bf(Pt.create(this.value,this.id,this.on),this)},rt:Pt});Object.defineProperty(Pt.prototype,"eventType",{get(){return If.SendChatIndicator}});Pt.wt=Gn.qt({ct:!1,lt:!1});Gn.mt(Pt);_f(Pt,[null,"value","id","mode","byId"],[]);Ls.B5=Pt});var Fs=T((h2,Us)=>{var{E:Gf}=P(),{Event:Ln,yt:Lf}=B(),Vf=I(),{extend:Uf}=j();function Nt(){this.V=0,this.data=null}Nt.create=function(t){var i=new Nt;return i.data=t,i};Nt.prototype=Uf(Ln.prototype,{apply:function(t){t.Zf(this.data)},ot:function(t){t.Ut(this.data.byteLength),t.Ke(this.data)},ft:function(t){this.data=t.Xu(t.Jt())},copy:function(){var t=null;return this.data&&(t=new ArrayBuffer(this.data.byteLength),new Uint8Array(t).set(new Uint8Array(this.data))),Lf(Nt.create(t),this)},rt:Nt});Object.defineProperty(Nt.prototype,"eventType",{get(){return Vf.CheckConsistency}});Nt.wt=Ln.qt({ct:!1,lt:!1});Ln.mt(Nt);Gf(Nt,[null,"data"],[]);Us.B5=Nt});var Js=T((o2,Hs)=>{var{E:Ff}=P(),{Event:Vn,yt:Hf}=B(),Jf=I(),{extend:Kf}=j();function Mt(){this.V=0,this.Tt=0,this.i=0}Mt.create=function(t){var i=new Mt;return i.Tt=t,i};Mt.prototype=Kf(Vn.prototype,{apply:function(t){var i=t.getPlayer(this.i);if(i!=null){var r=this.Tt;!(i.Tt&16)&&r&16&&(i.Ci=!0),i.Tt=r,t.Vr!=null&&t.Vr(i)}},ot:function(t){t.gt(this.Tt)},ft:function(t){this.Tt=t.ht()},copy:function(){return Hf(Mt.create(this.Tt),this)},rt:Mt});Object.defineProperty(Mt.prototype,"eventType",{get(){return Jf.SendInput}});Mt.wt=Vn.qt({});Vn.mt(Mt);Ff(Mt,[null,"input","byId"],[]);Hs.B5=Mt});var Ws=T((f2,Ks)=>{var{E:Wf}=P(),{Ht:Qf,q:$f}=$(),{Event:Un,yt:Xf}=B(),Yf=I(),Zf=Q(),{extend:zf,Ir:xf}=j();function At(){this.V=0,this.pi="",this.i=0,this.xe=null}At.create=function(t){var i=new At;return i.pi=t,i};At.prototype=zf(Un.prototype,{fh:function(t){if(t.zf!=null){var i=t.getPlayer(this.i);return i==null?!1:t.zf(i,this.pi)}return!0},apply:function(t){var i=t.getPlayer(this.i);i!=null&&t.he?.(i,this.pi)},ot:function(t){t.wi(xf(this.pi,140))},ft:function(t){if(this.pi=t.ci(),140<this.pi.length)throw new $f(Qf(Zf.ChatActionMessageTooLongError))},copy:function(){return Xf(At.create(this.pi),this)},rt:At});Object.defineProperty(At.prototype,"eventType",{get(){return Yf.SendChat}});At.wt=Un.qt({ct:!1,lt:!1,Xs:{Ys:10,Zs:900}});Un.mt(At);Wf(At,[null,"text","byId","targetId"],[]);Ks.B5=At});var Fr=T((l2,Qs)=>{var{E:Df}=P(),Ur=ft(),bf=pi();function Pi(){this.Hi=-1,this.Ot=null,this.P=Ur.spec,this.B=null,this.Ki=0,this.Wi=0,this.Ci=!1,this.id=0,this.Tt=0,this.name="Player",this.fn=0,this.ln=0,this.Rt=null,this.Ii=!1,this.Ur=null,this.Ct=null,this.ki=0,this.qi=!1,this.kr=null,this.Qt=null,this.nr=!1,this.zs=null}Pi.xf=function(t,i){if(t.qi=i.qi,t.ki=i.ki,t.Ct=i.Ct,t.Ur=i.Ur,t.Ii=i.Ii,t.Rt=i.Rt,t.ln=i.ln,t.fn=i.fn,t.name=i.name,t.Tt=i.Tt,t.id=i.id,t.Ci=i.Ci,t.Wi=i.Wi,t.Ki=i.Ki,i.B&&!i.B.Ei)debugger;t.B=i.B==null?null:i.B.Ei(),t.B&&(t.B.I=t.id),t.P=i.P};Pi.prototype={ot:function(t){t.f(this.qi?1:0),t.L(this.ki),t.fi(this.Ct),t.fi(this.Ur),t.f(this.Ii?1:0),t.fi(this.Rt),t.L(this.ln),t.fi(this.name),t.L(this.Tt),t.Ut(this.id),t.f(this.Ci?1:0),t.Bs(this.Wi),t.f(this.Ki),t.f(this.P.id),t.Bs(this.B==null?-1:this.B.sh)},ft:function(t,i){this.qi=t.T()!=0,this.ki=t.M(),this.Ct=t.oi(),this.Ur=t.oi(),this.Ii=t.T()!=0,this.Rt=t.oi(),this.ln=t.M(),this.name=t.oi(),this.Tt=t.M(),this.id=t.Jt(),this.Ci=t.T()!=0,this.Wi=t.Es(),this.Ki=t.T();var r=t.Zn();this.P=r==1?Ur.red:r==2?Ur.blue:Ur.spec,r=t.Es(),this.B=0>r?null:i[r],this.B&&(this.B.I=this.id)},Df:function(){var t=bf.Hi;return t!=this.Hi&&(this.Ot||(this.Ot=new Pi),this.Hi=t,Pi.xf(this.Ot,this)),this.Ot}};Df(Pi,[null,"ext","team","disc","kickRateMinTickCounter","kickRateMaxTickCounter","isKicking","id","input","name","ping",null,"flag","sync","headlessAvatar","avatar","avatarNumber","isAdmin","conn","auth","customClient","identity"],[]);Qs.B5=Pi});var Xs=T((v2,$s)=>{var{E:af}=P(),{Event:Fn,yt:tl}=B(),il=I(),rl=Fr(),{extend:nl}=j();function jt(){this.V=0,this.id=0,this.name="",this.Rt="",this.Ct="",this.kr="",this.Qt="",this.i=0}jt.create=function(t,i,r,n,e,s){var u=new jt;return u.id=t,u.name=i,u.Rt=r,u.Ct=n,u.kr=e,u.Qt=s,u};jt.prototype=nl(Fn.prototype,{apply:function(t,i){if(this.i==0){var r=new rl;r.id=this.id,r.name=this.name,r.Rt=this.Rt,r.Ct=this.Ct,r.kr=this.kr,r.Qt=this.Qt,t.j.push(r),t.oe?.(r),i?.room?._onPlayerObjectCreated?.(r)}},ot:function(t){t.L(this.id),t.fi(this.name),t.fi(this.Rt),t.fi(this.Ct)},ft:function(t){this.id=t.M(),this.name=t.oi(),this.Rt=t.oi(),this.Ct=t.oi()},copy:function(){return tl(jt.create(this.id,this.name,this.Rt,this.Ct,this.kr,this.Qt),this)},rt:jt});Object.defineProperty(jt.prototype,"eventType",{get(){return il.JoinRoom}});jt.wt=Fn.qt({ct:!1,lt:!1});Fn.mt(jt);af(jt,[null,"id","name","flag","avatar","conn","auth","byId"],[]);$s.B5=jt});var Zs=T((c2,Ys)=>{var{E:el}=P(),{Ht:sl,q:ul}=$(),{Event:Hn,yt:hl}=B(),ol=Q(),fl=I(),{D:ll,extend:vl,Ir:cl}=j();function Et(){this.V=0,this.id=0,this.Qi=null,this.fe=!1,this.i=0}Et.create=function(t,i,r){var n=new Et;return n.id=t,n.Qi=i,n.fe=r,n};Et.prototype=vl(Hn.prototype,{apply:function(t){if(this.id!=0&&t.Si(this.i,128)){var i=t.getPlayer(this.id);if(i!=null){var r=t.getPlayer(this.i);ll.remove(t.j,i),t.e!=null&&t.e.v.removeDisc(i.B),t.le?.(i,this.Qi,this.fe,r)}}},ot:function(t){this.Qi!=null&&(this.Qi=cl(this.Qi,100)),t.L(this.id),t.fi(this.Qi),t.f(this.fe?1:0)},ft:function(t){if(this.id=t.M(),this.Qi=t.oi(),this.fe=t.T()!=0,this.Qi!=null&&100<this.Qi.length)throw new ul(sl(ol.KickBanReasonTooLongError))},copy:function(){return hl(Et.create(this.id,this.Qi,this.fe),this)},rt:Et});Object.defineProperty(Et.prototype,"eventType",{get(){return fl.KickBanPlayer}});Et.wt=Hn.qt({ct:!1,lt:!1});Hn.mt(Et);el(Et,[null,"id","reason","ban","byId"],[]);Ys.B5=Et});var xs=T((w2,zs)=>{var{E:wl}=P(),{Event:Jn,yt:pl}=B(),ql=I(),{extend:ml}=j();function _t(){this.V=0,this.i=0}_t.create=function(){return new _t};_t.prototype=ml(Jn.prototype,{apply:function(t){t.Si(this.i,32)&&t.bf(t.getPlayer(this.i),0)},ot:function(){},ft:function(){},copy:function(){return pl(_t.create(),this)},rt:_t});Object.defineProperty(_t.prototype,"eventType",{get(){return ql.StartGame}});_t.wt=Jn.qt({ct:!1,lt:!1});Jn.mt(_t);wl(_t,[null,"byId"],[]);zs.B5=_t});var bs=T((p2,Ds)=>{var{E:yl}=P(),{Event:Kn,yt:Cl}=B(),gl=I(),{extend:kl}=j();function Bt(){this.V=0,this.i=0}Bt.create=function(){return new Bt};Bt.prototype=kl(Kn.prototype,{apply:function(t){if(t.Si(this.i,32)){var i=t.getPlayer(this.i);if(t.e!=null){t.e=null;for(var r=0,n=t.j;r<n.length;){var e=n[r];++r,e.B&&t.Sr?.(e),e.B=null,e.ki=0}t.ph&&t.ph(),t.Or!=null&&t.Or(i)}}},ot:function(){},ft:function(){},copy:function(){return Cl(Bt.create(),this)},rt:Bt});Object.defineProperty(Bt.prototype,"eventType",{get(){return gl.StopGame}});Bt.wt=Kn.qt({ct:!1,lt:!1});Kn.mt(Bt);yl(Bt,[null,"byId"],[]);Ds.B5=Bt});var tu=T((q2,as)=>{var{E:Sl}=P(),{Event:Wn,yt:Ol}=B(),Tl=I(),{extend:Rl}=j();function It(){this.V=0,this.Fr=!1,this.i=0}It.create=function(t){var i=new It;return i.Fr=t,i};It.prototype=Rl(Wn.prototype,{apply:function(t){var i=t.e;if(i!=null&&t.Si(this.i,16)){var r=t.getPlayer(this.i),n=i.xt==120,e=0<i.xt;this.Fr?i.xt=120:i.xt==120&&(i.xt=119),this.Fr!=n&&t.ve?.(r,this.Fr,e)}},ot:function(t){t.f(this.Fr?1:0)},ft:function(t){this.Fr=t.T()!=0},copy:function(){return Ol(It.create(this.Fr),this)},rt:It});Object.defineProperty(It.prototype,"eventType",{get(){return Tl.PauseResumeGame}});It.wt=Wn.qt({});Wn.mt(It);Sl(It,[null,"paused","byId"],[]);as.B5=It});var nu=T((m2,ru)=>{var{E:Pl}=P(),{Event:Qn,yt:Nl}=B(),iu=I(),{extend:Ml}=j();function dt(){this.V=0,this.type=0,this.ei=0,this.i=0}dt.create=function(t,i){var r=new dt;return r.type=t,r.ei=i,r};dt.prototype=Ml(Qn.prototype,{apply:function(t){if(t.Si(this.i,2)&&t.e==null)switch(this.type){case 0:var i=this.ei;t.dt=0>i?0:99<i?99:i,t.vn&&t.vn(this.ei,this.i);break;case 1:i=this.ei,t.At=0>i?0:99<i?99:i,t.cn&&t.cn(this.ei,this.i)}},ot:function(t){t.L(this.type),t.L(this.ei)},ft:function(t){this.type=t.M(),this.ei=t.M()},copy:function(){return Nl(dt.create(this.type,this.ei),this)},rt:dt});Object.defineProperty(dt.prototype,"eventType",{get(){return this.type==0?iu.SetScoreLimit:iu.SetTimeLimit}});dt.wt=Qn.qt({ct:!1,lt:!1});Qn.mt(dt);Pl(dt,[null,"type","newValue","byId"],[]);ru.B5=dt});var su=T((y2,eu)=>{var{E:Al}=P(),{Point:jl}=ki();function $n(){this.pr=0,this.G=15,this.o=0,this.N=new jl(0,0),this.h=.5,this.H=.5,this.X=.96,this.mr=.1,this.qr=.07,this.yr=.96,this.wr=5}$n.prototype={Y:function(t){t.C(this.h),t.C(this.H),t.C(this.X),t.C(this.mr),t.C(this.qr),t.C(this.yr),t.C(this.wr);var i=this.N;t.C(i.x),t.C(i.y),t.L(this.o),t.C(this.G),t.C(this.pr)},it:function(t){this.h=t.g(),this.H=t.g(),this.X=t.g(),this.mr=t.g(),this.qr=t.g(),this.yr=t.g(),this.wr=t.g();var i=this.N;i.x=t.g(),i.y=t.g(),this.o=t.M(),this.G=t.g(),this.pr=t.g()}};Al($n,["kickback","radius","cGroup","gravity","bCoef","invMass","damping","acceleration","kickingAcceleration","kickingDamping","kickStrength"],[]);eu.B5=$n});var Qr=T((C2,hu)=>{var{JSON5:El,E:_l}=P(),{Ht:Kr,Fe:Bl,q:hi}=$(),{w:Il,Integer:K,Du:O}=j(),Wr=Q(),{J:dl,K:Gl}=wi(),{Point:Hr,Ls:V,Ze:Y,Vs:x,Vf:Jr,ze:qi,Us:Ki}=ki(),uu=su(),mi=ft(),Ll=t=>{for(var i=0,r=0;r<t.length;r++)i+=t[r],i+=i<<10,i^=i>>>6;return i=(i+=i<<3)^i>>>11,i+=i<<15,i|0};function g(){this.m=[],this.R=[],this.Q=[],this.Nt=[],this.p=[],this.pt=[],this.ti=[],this.ii=[],this.Ni=new uu,this.ce=255,this.Tr=0,this.Ui=0,this.Hr=!0,this.er=!1,this.name="",this._i=0,this.$i=0,this.Oi=0,this.Xi=0,this.Yi=0,this.Zi=0,this.zi=0,this.xi=0,this.Dt=0,this.sr=0}g.af=Il.U(1024);g.it=function(t){var i=t.T();return i==255?(i=new g,i.tl(t),i):g.xs()[i]};g.xs=function(){if(g.li==null){g.li=[];var t=new g,i;for(t.Rr("Classic",420,200,370,170,64,75),g.li.push(t),t=new g,t.Rr("Easy",420,200,370,170,90,75),g.li.push(t),t=new g,t.Rr("Small",420,200,320,130,55,70),g.li.push(t),t=new g,t.Rr("Big",600,270,550,240,80,80),g.li.push(t),t=new g,t.Rr("Rounded",420,200,370,170,64,75,75),g.li.push(t),t=new g,t.qh("Hockey",420,204,398,182,68,120,75,100),g.li.push(t),t=new g,t.qh("Big Hockey",600,270,550,240,90,160,75,150),g.li.push(t),t=new g,t.Rr("Big Easy",600,270,550,240,95,80),g.li.push(t),t=new g,t.Rr("Big Rounded",600,270,550,240,80,75,100),g.li.push(t),t=new g,t.Rr("Huge",750,350,700,320,100,80),g.li.push(t),t=0,i=g.li.length;t<i;){var r=t++;g.li[r].ce=r}}return g.li};g.il=function(t,i){var r=i[t.trait];if(r)for(var n=0,e=Object.keys(r);n<e.length;n++){var s=e[n];t[s]==null&&(t[s]=r[s])}};g.rl=function(t){if(t==63)return["all"];var i=[];return t&2&&i.push("red"),t&4&&i.push("blue"),t&1&&i.push("ball"),t&8&&i.push("redKO"),t&16&&i.push("blueKO"),t&32&&i.push("wall"),t&64&&i.push("kick"),t&128&&i.push("score"),t&268435456&&i.push("c0"),t&536870912&&i.push("c1"),t&1073741824&&i.push("c2"),t&-2147483648&&i.push("c3"),i};g.ur=function(t){t=O(t,Array);for(var i=0,r=0;r<t.length;)switch(t[r++]){case"all":i|=63;break;case"ball":i|=1;break;case"blue":i|=4;break;case"blueKO":i|=16;break;case"c0":i|=268435456;break;case"c1":i|=536870912;break;case"c2":i|=1073741824;break;case"c3":i|=-2147483648;break;case"kick":i|=64;break;case"red":i|=2;break;case"redKO":i|=8;break;case"score":i|=128;break;case"wall":i|=32}return i};g.di=function(t,i,r,n){r!=n&&(t[i]=g.rl(r))};g.wn=function(t,i,r){i!=r&&(t.color=g.nl(i))};g.nl=function(t){return t|=0,0>t?"transparent":dl.Gs(t)};g.be=function(t){if(t=="transparent")return-1;if(typeof t=="string")return Gl.parseInt("0x"+t);if(t instanceof Array)return((t[0]|0)<<16)+((t[1]|0)<<8)+(t[2]|0);throw new hi(Kr(Wr.BadColorError))};g.mh=function(t){var i={x:t.s.x,y:t.s.y};return g.d(i,"bCoef",t.h,1),g.di(i,"cMask",t.u,63),g.di(i,"cGroup",t.o,32),i};g.el=function(t){var i=new V;i.s.x=O(t.x,Number),i.s.y=O(t.y,Number);var r=t.bCoef;return r!=null&&(i.h=O(r,Number)),r=t.cMask,r!=null&&(i.u=g.ur(r)),t=t.cGroup,t!=null&&(i.o=g.ur(t)),i};g.yh=function(t){var i=new V;i.s.x=O(t.x,Number),i.s.y=O(t.y,Number);var r=t.bCoef;return r!=null&&(i.h=O(r,Number)),r=t.cMask,r!=null&&(i.u=O(r,K)),t=t.cGroup,t!=null&&(i.o=O(t,K)),i};g.sl=function(t,i){var r={v0:t.z.id,v1:t.b.id};g.d(r,"bias",t.Wt,i.Wt),g.d(r,"bCoef",t.h,i.h);var n=t.getCurveDegrees();return g.d(r,"curve",n,0),n!=0&&(r.curveF=t.jt),g.d(r,"vis",t.kt,i.kt),g.di(r,"cMask",t.u,i.u),g.di(r,"cGroup",t.o,i.o),g.wn(r,t.O,i.O),r};g.ul=function(t,i,r){var[n,e]=t.findVertexIndicesOfSegmentObj(i),s={v0:n,v1:e};g.d(s,"bias",i.Wt,r.Wt),g.d(s,"bCoef",i.h,r.h);var u=i.getCurveDegrees();return g.d(s,"curve",u,0),u!=0&&(s.curveF=i.jt),g.d(s,"vis",i.kt,r.kt),g.di(s,"cMask",i.u,r.u),g.di(s,"cGroup",i.o,r.o),g.wn(s,i.O,r.O),s};g.hl=function(t,i){var r=new Y,n=O(t.v1,K);r.z=i[O(t.v0,K)],r.b=i[n],n=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,o=t.vis,l=t.cMask,c=t.cGroup,v=t.color;return n!=null&&(r.Wt=O(n,Number)),e!=null&&(r.h=O(e,Number)),u!=null?r.jt=O(u,Number):s!=null&&r.Mi(O(s,Number)),o!=null&&(r.kt=O(o,Boolean)),l!=null&&(r.u=g.ur(l)),c!=null&&(r.o=g.ur(c)),v!=null&&(r.O=g.be(v)),r};g.Ch=function(t,i){var r=new Y,n=O(t.v1,K);r.z=i[O(t.v0,K)],r.b=i[n],n=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,o=t.vis,l=t.cMask,c=t.cGroup,v=t.color;return n!=null&&(r.Wt=O(n,Number)),e!=null&&(r.h=O(e,Number)),u!=null?r.jt=O(u,Number):s!=null&&r.Mi(O(s,Number)),o!=null&&(r.kt=O(o,Boolean)),l!=null&&(r.u=O(l,K)),c!=null&&(r.o=O(c,K)),v!=null&&(r.O=O(v,K)),r};g.ol=function(t){var i=new Y,r=t.v1;i.z=t.v0,i.b=r,r=t.bias;var n=t.bCoef,e=t.curve,s=t.curveF,u=t.vis,o=t.cMask,l=t.cGroup,c=t.color;return r!=null&&(i.Wt=O(r,Number)),n!=null&&(i.h=O(n,Number)),s!=null?i.jt=O(s,Number):e!=null&&i.Mi(O(e,Number)),u!=null&&(i.kt=O(u,Boolean)),o!=null&&(i.u=O(o,K)),l!=null&&(i.o=O(l,K)),c!=null&&(i.O=O(c,K)),i};g.gh=function(t){var i={d0:t.d0,d1:t.d1,length:t.minLength>=t.maxLength?t.minLength:[t.minLength,t.maxLength]};return g.wn(i,t.color,0),g.d(i,"strength",t.strength,1/0),i};g.fl=function(t,i){var r=new Ki,n=O(t.d0,K),e=O(t.d1,K),s=t.color,u=t.strength,o=t.length;if(n>=i.length||0>n)throw new hi(null);if(e>=i.length||0>e)throw new hi(null);return r.Zt=n,r.Yt=e,o==null?(n=i[n],o=i[e],n==null||o==null?r.Bt=r.It=100:(e=n.s,o=o.s,n=e.x-o.x,e=e.y-o.y,r.Bt=r.It=Math.sqrt(n*n+e*e))):o instanceof Array?(r.It=O(o[0],Number),r.Bt=O(o[1],Number)):r.Bt=r.It=O(o,Number),r.Ai=u==null||u=="rigid"?1/0:O(u,Number),s!=null&&(r.O=g.be(s)),r};g.kh=function(t,i){var r=new Ki,n=O(t.d0,K),e=O(t.d1,K),s=t.color,u=t.strength,o=t.length;if(n>=i.length||0>n)throw new hi(null);if(e>=i.length||0>e)throw new hi(null);return r.Zt=n,r.Yt=e,o==null?(n=i[n],o=i[e],n==null||o==null?r.Bt=r.It=100:(e=n.s,o=o.s,n=e.x-o.x,e=e.y-o.y,r.Bt=r.It=Math.sqrt(n*n+e*e))):o instanceof Array?(r.It=O(o[0],Number),r.Bt=O(o[1],Number)):r.Bt=r.It=O(o,Number),r.Ai=u==null||u=="rigid"?1/0:O(u,Number),s!=null&&(r.O=O(s,K)),r};g.ll=function(t){var i=new Ki,r=t.d0,n=t.d1,e=t.color,s=t.strength,u=t.length;return i.d0Obj=r,i.d1Obj=n,u==null?(u=n,r==null||u==null?i.Bt=i.It=100:(n=r.s,u=u.s,r=n.x-u.x,n=n.y-u.y,i.Bt=i.It=Math.sqrt(r*r+n*n))):u instanceof Array?(i.It=O(u[0],Number),i.Bt=O(u[1],Number)):i.Bt=i.It=O(u,Number),i.Ai=s==null||s=="rigid"?1/0:O(s,Number),e!=null&&(i.O=O(e,K)),i};g.Sh=function(t){var i={normal:[t.a.x,t.a.y],dist:t.ut};return g.d(i,"bCoef",t.h,1),g.di(i,"cMask",t.u,63),g.di(i,"cGroup",t.o,32),i};g.vl=function(t){var i=new x,r=O(t.normal,Array),n=O(r[0],Number);r=O(r[1],Number);var e=i.a,s=Math.sqrt(n*n+r*r);return e.x=n/s,e.y=r/s,i.ut=O(t.dist,Number),n=t.bCoef,r=t.cMask,t=t.cGroup,n!=null&&(i.h=O(n,Number)),r!=null&&(i.u=g.ur(r)),t!=null&&(i.o=g.ur(t)),i};g.Oh=function(t){var i=new x,r=O(t.normal,Array),n=O(r[0],Number);r=O(r[1],Number);var e=i.a,s=Math.sqrt(n*n+r*r);return e.x=n/s,e.y=r/s,i.ut=O(t.dist,Number),n=t.bCoef,r=t.cMask,t=t.cGroup,n!=null&&(i.h=O(n,Number)),r!=null&&(i.u=O(r,K)),t!=null&&(i.o=O(t,K)),i};g.Th=function(t){return{p0:[t.ui.x,t.ui.y],p1:[t.hi.x,t.hi.y],team:t.P==mi.red?"red":"blue"}};g.ip=function(t){var i=new Jr,r=O(t.p0,Array),n=O(t.p1,Array),e=i.ui;switch(e.x=r[0],e.y=r[1],r=i.hi,r.x=n[0],r.y=n[1],t.team){case"blue":t=mi.blue;break;case"red":t=mi.red;break;default:throw new hi(Kr(Wr.BadTeamError))}return i.P=t,i};g.Rh=function(t){var i={};return g.d(i,"bCoef",t.h,.5),g.d(i,"invMass",t.H,.5),g.d(i,"damping",t.X,.96),g.d(i,"acceleration",t.mr,.1),g.d(i,"kickingAcceleration",t.qr,.07),g.d(i,"kickingDamping",t.yr,.96),g.d(i,"kickStrength",t.wr,5),g.di(i,"cGroup",t.o,0),(t.N.x!=0||t.N.y!=0)&&(i.gravity=[t.N.x,t.N.y]),g.d(i,"radius",t.G,15),g.d(i,"kickback",t.pr,0),i};g.cl=function(t){var i=new uu,r=t.bCoef,n=t.invMass,e=t.damping,s=t.acceleration,u=t.kickingAcceleration,o=t.kickingDamping,l=t.kickStrength,c=t.gravity,v=t.cGroup,p=t.radius;return t=t.kickback,r!=null&&(i.h=O(r,Number)),n!=null&&(i.H=O(n,Number)),e!=null&&(i.X=O(e,Number)),s!=null&&(i.mr=O(s,Number)),u!=null&&(i.qr=O(u,Number)),o!=null&&(i.yr=O(o,Number)),l!=null&&(i.wr=O(l,Number)),c!=null&&(r=i.N,n=O(c[1],Number),r.x=O(c[0],Number),r.y=n),v!=null&&(i.o=g.ur(v)),p!=null&&(i.G=O(p,Number)),t!=null&&(i.pr=O(t,Number)),i};g.Ph=function(t,i){var r={};return(t.s.x!=i.s.x||t.s.y!=i.s.y)&&(r.pos=[t.s.x,t.s.y]),(t.A.x!=i.A.x||t.A.y!=i.A.y)&&(r.speed=[t.A.x,t.A.y]),(t.N.x!=i.N.x||t.N.y!=i.N.y)&&(r.gravity=[t.N.x,t.N.y]),g.d(r,"radius",t.G,i.G),g.d(r,"bCoef",t.h,i.h),g.d(r,"invMass",t.H,i.H),g.d(r,"damping",t.X,i.X),g.wn(r,t.O,i.O),g.di(r,"cMask",t.u,i.u),g.di(r,"cGroup",t.o,i.o),r};g.Nh=function(t,i){var r=t.pos,n=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,o=t.invMass,l=t.damping,c=t.color,v=t.cMask,p=t.cGroup;if(r!=null){var C=i.s;C.x=r[0],C.y=r[1]}return n!=null&&(r=i.A,r.x=n[0],r.y=n[1]),e!=null&&(n=i.N,n.x=e[0],n.y=e[1]),s!=null&&(i.G=O(s,Number)),u!=null&&(i.h=O(u,Number)),o!=null&&(i.H=O(o,Number)),l!=null&&(i.X=O(l,Number)),c!=null&&(i.O=g.be(c)),v!=null&&(i.u=g.ur(v)),p!=null&&(i.o=g.ur(p)),i};g.Ds=function(t,i){var r=t.pos,n=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,o=t.invMass,l=t.damping,c=t.color,v=t.cMask,p=t.cGroup;if(r!=null){var C=i.s;C.x=r[0],C.y=r[1]}return n!=null&&(r=i.A,r.x=n[0],r.y=n[1]),e!=null&&(n=i.N,n.x=e[0],n.y=e[1]),s!=null&&(i.G=O(s,Number)),u!=null&&(i.h=O(u,Number)),o!=null&&(i.H=O(o,Number)),l!=null&&(i.X=O(l,Number)),c!=null&&(i.O=O(c,K)),v!=null&&(i.u=O(v,K)),p!=null&&(i.o=O(p,K)),i};g.d=function(t,i,r,n){r!=n&&(t[i]=r)};g.prototype={ae:function(){var t=new qi;return t.O=16777215,t.u=63,t.o=193,t.G=10,t.X=.99,t.H=1,t.h=.5,t},Y:function(t){if(t.f(this.ce),!this.bs()){t.fi(this.name),t.L(this.Oi),t.C(this.Yi),t.C(this.Zi),t.C(this.zi),t.C(this.xi),t.C(this.sr),t.L(this.Xi),t.C(this._i),t.C(this.$i),t.C(this.Dt),this.Ni.Y(t),t.Vt(this.Tr),t.f(this.Ui),t.f(this.Hr?1:0),t.f(this.er?1:0),t.f(this.m.length);for(var i=0,r=this.m.length;i<r;){var n=i++,e=this.m[n];e.id=n,e.Y(t)}for(t.f(this.R.length),i=0,r=this.R;i<r.length;)r[i++].Y(t);for(t.f(this.Q.length),i=0,r=this.Q;i<r.length;)r[i++].Y(t);for(t.f(this.Nt.length),i=0,r=this.Nt;i<r.length;)r[i++].Y(t);for(t.f(this.p.length),i=0,r=this.p;i<r.length;)r[i++].Y(t);for(t.f(this.pt.length),i=0,r=this.pt;i<r.length;)r[i++].Y(t);for(t.f(this.ti.length),i=0,r=this.ti;i<r.length;)n=r[i],++i,t.C(n.x),t.C(n.y);for(t.f(this.ii.length),i=0,r=this.ii;i<r.length;)n=r[i],++i,t.C(n.x),t.C(n.y)}},tl:function(t){function i(){for(var s=[],u=t.T(),o=0;o<u;){++o;var l=new Hr(0,0);l.x=t.g(),l.y=t.g(),s.push(l)}return s}this.name=t.oi(),this.Oi=t.M(),this.Yi=t.g(),this.Zi=t.g(),this.zi=t.g(),this.xi=t.g(),this.sr=t.g(),this.Xi=t.M(),this._i=t.g(),this.$i=t.g(),this.Dt=t.g(),this.Ni.it(t),this.Tr=t.Mt(),this.Ui=t.T(),this.Hr=t.T()!=0,this.er=t.T()!=0,this.m=[];for(var r=t.T(),n=0;n<r;){var e=new V;e.it(t),e.id=n++,this.m.push(e)}for(this.R=[],r=t.T(),n=0;n<r;)++n,e=new Y,e.it(t,this.m),this.R.push(e);for(this.Q=[],r=t.T(),n=0;n<r;)++n,e=new x,e.it(t),this.Q.push(e);for(this.Nt=[],r=t.T(),n=0;n<r;)++n,e=new Jr,e.it(t),this.Nt.push(e);for(this.p=[],r=t.T(),n=0;n<r;)++n,e=new qi,e.it(t),this.p.push(e);for(this.pt=[],r=t.T(),n=0;n<r;)++n,e=new Ki,e.it(t),this.pt.push(e);this.ti=i(),this.ii=i(),this.calculateNormals()},calculateNormals:function(){for(var t=0,i=this.R;t<i.length;)i[t++].calculateNormals()},bs:function(){return this.ce!=255},pn:function(t,i,r){return t=t[i],t!=null?O(t,Number):r},wl:function(t,i,r){return t=t[i],t!=null?O(t,Boolean):r},pl:function(){return JSON.stringify(this.ql())},ql:function(){for(var t={},i=0,r=[],n=0,e=this.m,s,u,o,l,c,v,p,C;n<e.length;)s=e[n],++n,s.id=i++,r.push(g.mh(s));for(n=new Y,i=[],e=0,s=this.R;e<s.length;)i.push(g.sl(s[e++],n));for(n=[],e=0,s=this.Q;e<s.length;)n.push(g.Sh(s[e++]));for(e=[],s=0,u=this.Nt;s<u.length;)e.push(g.Th(u[s++]));for(s=g.Rh(this.Ni),o=new qi,u=[],l=0,c=this.p;l<c.length;)u.push(g.Ph(c[l++],o));for(o=[],l=0,c=this.pt;l<c.length;)o.push(g.gh(c[l++]));for(l=[],c=0,v=this.ti;c<v.length;)p=v[c],++c,l.push([p.x,p.y]);for(c=[],v=0,p=this.ii;v<p.length;)C=p[v],++v,c.push([C.x,C.y]);switch(r={name:this.name,width:this._i,height:this.$i,bg:t,vertexes:r,segments:i,planes:n,goals:e,discs:u,playerPhysics:s,ballPhysics:"disc0"},g.d(r,"maxViewWidth",this.Tr,0),g.d(r,"cameraFollow",this.Ui==1?"player":"",""),g.d(r,"spawnDistance",this.Dt,200),o.length!=0&&(r.joints=o),l.length!=0&&(r.redSpawnPoints=l),c.length!=0&&(r.blueSpawnPoints=c),g.d(r,"kickOffReset",this.er?"full":"partial","partial"),this.Oi){case 1:i="grass";break;case 2:i="hockey";break;default:i="none"}return g.d(t,"type",i,"none"),g.d(t,"width",this.Yi,0),g.d(t,"height",this.Zi,0),g.d(t,"kickOffRadius",this.zi,0),g.d(t,"cornerRadius",this.xi,0),g.wn(t,this.Xi,7441498),g.d(t,"goalLine",this.sr,0),r},ml:function(t){function i(o){var l=O(o[0],Number);return o=O(o[1],Number),new Hr(l,o)}function r(o,l,c,v){v==null&&(v=!1);var p=e[l];if((!v||p!=null)&&(v=O(p,Array),v!=null))for(p=0;p<v.length;){var C=v[p];++p;try{g.il(C,u),o.push(c(C))}catch{throw new hi(new Bl(Kr(Wr.StadiumParseError,l,o.length)))}}}var n=this,e=El.parse(t);this.m=[],this.R=[],this.Q=[],this.Nt=[],this.p=[],this.pt=[],this.name=O(e.name,String),this._i=O(e.width,Number),this.$i=O(e.height,Number),this.Tr=this.pn(e,"maxViewWidth",0)|0,e.cameraFollow=="player"&&(this.Ui=1),this.Dt=200,t=e.spawnDistance,t!=null&&(this.Dt=O(t,Number)),t=e.bg;var s;switch(t.type){case"grass":s=1;break;case"hockey":s=2;break;default:s=0}this.Oi=s,this.Yi=this.pn(t,"width",0),this.Zi=this.pn(t,"height",0),this.zi=this.pn(t,"kickOffRadius",0),this.xi=this.pn(t,"cornerRadius",0),this.Xi=7441498,t.color!=null&&(this.Xi=g.be(t.color)),this.sr=this.pn(t,"goalLine",0),this.Hr=this.wl(e,"canBeStored",!0),this.er=e.kickOffReset=="full";var u=e.traits||{};if(t=e.ballPhysics,t!="disc0"&&(t!=null?(t=g.Nh(t,this.ae()),t.o|=192,this.p.push(t)):this.p.push(this.ae())),r(this.m,"vertexes",g.el),r(this.R,"segments",function(o){return g.hl(o,n.m)}),r(this.Nt,"goals",g.ip),r(this.p,"discs",function(o){return g.Nh(o,new qi)}),r(this.Q,"planes",g.vl),r(this.pt,"joints",function(o){return g.fl(o,n.p)},!0),r(this.ti,"redSpawnPoints",i,!0),r(this.ii,"blueSpawnPoints",i,!0),t=e.playerPhysics,t!=null&&(this.Ni=g.cl(t)),255<this.m.length||255<this.R.length||255<this.Q.length||255<this.Nt.length||1>this.p.length||255<this.p.length)throw new hi(Kr(Wr.StadiumLimitsExceededError));this.calculateNormals()},yl:function(){var t=g.af;return t.l=0,this.Y(t),Ll(t._t())},Rr:function(t,i,r,n,e,s,u,o){o==null&&(o=0),this.name=t,this.p.push(this.ae()),this._i=i,this.$i=r,this.Oi=1,this.Xi=7441498,this.Yi=n,this.Zi=e,this.zi=u,this.xi=o,this.Dt=.75*n,400<this.Dt&&(this.Dt=400),t=new x;var l=t.a,c,v,p,C;l.x=0,l.y=1,t.ut=-r,t.h=0,this.Q.push(t),t=new x,l=t.a,l.x=0,l.y=-1,t.ut=-r,t.h=0,this.Q.push(t),t=new x,l=t.a,l.x=1,l.y=0,t.ut=-i,t.h=0,this.Q.push(t),t=new x,l=t.a,l.x=-1,l.y=0,t.ut=-i,t.h=0,this.Q.push(t),this.ts(n,1,s,13421823,mi.blue),this.ts(-n,-1,s,16764108,mi.red),this.Mh(u,r),i=new x,r=i.a,r.x=0,r.y=1,i.ut=-e,i.u=1,this.Q.push(i),i=new x,r=i.a,r.x=0,r.y=-1,i.ut=-e,i.u=1,this.Q.push(i),i=new V,r=i.s,r.x=-n,r.y=-e,i.u=0,r=new V,u=r.s,u.x=n,u.y=-e,r.u=0,u=new V,t=u.s,t.x=n,t.y=-s,u.u=0,t=new V,l=t.s,l.x=n,l.y=s,t.u=0,l=new V,c=l.s,c.x=n,c.y=e,l.u=0,c=new V,v=c.s,v.x=-n,v.y=e,c.u=0,v=new V,p=v.s,p.x=-n,p.y=s,v.u=0,p=new V,C=p.s,C.x=-n,C.y=-s,p.u=0,s=new Y,s.z=r,s.b=u,s.u=1,s.kt=!1,C=new Y,C.z=t,C.b=l,C.u=1,C.kt=!1;var m=new Y;m.z=c,m.b=v,m.u=1,m.kt=!1;var h=new Y;h.z=p,h.b=i,h.u=1,h.kt=!1,this.m.push(i),this.m.push(r),this.m.push(u),this.m.push(t),this.m.push(l),this.m.push(c),this.m.push(v),this.m.push(p),this.R.push(s),this.R.push(C),this.R.push(m),this.R.push(h),this.Ah(n,e,o),this.calculateNormals()},qh:function(t,i,r,n,e,s,u,o,l){this.name=t,this.p.push(this.ae()),this._i=i,this.$i=r,this.Oi=2,this.Yi=n,this.Zi=e,this.zi=o,this.xi=l,this.sr=u,this.Dt=.75*(n-u),400<this.Dt&&(this.Dt=400),t=new x;var c=t.a;c.x=0,c.y=1,t.ut=-r,t.h=0,this.Q.push(t),t=new x,c=t.a,c.x=0,c.y=-1,t.ut=-r,t.h=0,this.Q.push(t),t=new x,c=t.a,c.x=1,c.y=0,t.ut=-i,t.h=0,this.Q.push(t),t=new x,c=t.a,c.x=-1,c.y=0,t.ut=-i,t.h=0,this.Q.push(t),this.ts(n-u,1,s,13421823,mi.blue,63),this.ts(-n+u,-1,s,16764108,mi.red,63),this.Mh(o,r),i=new x,r=i.a,r.x=0,r.y=1,i.ut=-e,i.u=1,this.Q.push(i),i=new x,r=i.a,r.x=0,r.y=-1,i.ut=-e,i.u=1,this.Q.push(i),i=new x,r=i.a,r.x=1,r.y=0,i.ut=-n,i.u=1,this.Q.push(i),i=new x,r=i.a,r.x=-1,r.y=0,i.ut=-n,i.u=1,this.Q.push(i),this.Ah(n,e,l),this.calculateNormals()},ts:function(t,i,r,n,e,s,u){u==null&&(u=32),s==null&&(s=1);var o=new V,l=o.s,c,v,p,C,m;for(l.x=t+8*i,l.y=-r,l=new V,c=l.s,c.x=t+8*i,c.y=r,v=new V,c=v.s,c.x=o.s.x+22*i,c.y=o.s.y+22,p=new V,c=p.s,c.x=l.s.x+22*i,c.y=l.s.y-22,c=new Y,c.z=o,c.b=v,c.Mi(90*i),C=new Y,C.z=p,C.b=v,m=new Y,m.z=p,m.b=l,m.Mi(90*i),i=this.m.length,this.m.push(o),this.m.push(l),this.m.push(v),this.m.push(p),o=i,i=this.m.length;o<i;)l=o++,this.m[l].u=s,this.m[l].o=u,this.m[l].h=.1;for(i=this.R.length,this.R.push(c),this.R.push(C),this.R.push(m),o=i,i=this.R.length;o<i;)l=o++,this.R[l].u=s,this.R[l].o=u,this.R[l].h=.1;s=new qi,u=s.s,u.x=t,u.y=-r,s.H=0,s.G=8,s.O=n,this.p.push(s),s=new qi,u=s.s,u.x=t,u.y=r,s.H=0,s.G=8,s.O=n,this.p.push(s),n=new Jr,s=n.ui,s.x=t,s.y=-r,s=n.hi,s.x=t,s.y=r,n.P=e,this.Nt.push(n)},Mh:function(t,i){var r=new V,n=r.s,e,s,u;n.x=0,n.y=-i,r.h=.1,r.o=24,r.u=6,n=new V,e=n.s,e.x=0,e.y=-t,n.h=.1,n.o=24,n.u=6,e=new V,s=e.s,s.x=0,s.y=t,e.h=.1,e.o=24,e.u=6,s=new V,u=s.s,u.x=0,u.y=i,s.h=.1,s.o=24,s.u=6,u=new Y,u.z=r,u.b=n,u.o=24,u.u=6,u.kt=!1,u.h=.1;var o=new Y;o.z=e,o.b=s,o.o=24,o.u=6,o.kt=!1,o.h=.1;var l=new Y;l.z=n,l.b=e,l.o=8,l.u=6,l.kt=!1,l.Mi(180),l.h=.1;var c=new Y;c.z=e,c.b=n,c.o=16,c.u=6,c.kt=!1,c.Mi(180),c.h=.1,this.m.push(r),this.m.push(n),this.m.push(e),this.m.push(s),this.R.push(u),this.R.push(o),this.R.push(l),this.R.push(c)},Ah:function(t,i,r){if(!(0>=r)){var n=new V,e=n.s,s,u,o,l,c,v,p;e.x=-t+r,e.y=-i,n.u=0,e=new V,s=e.s,s.x=-t,s.y=-i+r,e.u=0,s=new V,u=s.s,u.x=-t+r,u.y=i,s.u=0,u=new V,l=u.s,l.x=-t,l.y=i-r,u.u=0,l=new V,c=l.s,c.x=t-r,c.y=i,l.u=0,c=new V,o=c.s,o.x=t,o.y=i-r,c.u=0,o=new V,v=o.s,v.x=t-r,v.y=-i,o.u=0,v=new V,p=v.s,p.x=t,p.y=-i+r,v.u=0,t=new Y,t.z=n,t.b=e,t.u=1,t.kt=!1,t.h=1,t.Mi(-90),i=new Y,i.z=s,i.b=u,i.u=1,i.kt=!1,i.h=1,i.Mi(90),r=new Y,r.z=l,r.b=c,r.u=1,r.kt=!1,r.h=1,r.Mi(-90),p=new Y,p.z=o,p.b=v,p.u=1,p.kt=!1,p.h=1,p.Mi(90),this.m.push(n),this.m.push(e),this.m.push(s),this.m.push(u),this.m.push(l),this.m.push(c),this.m.push(o),this.m.push(v),this.R.push(t),this.R.push(i),this.R.push(r),this.R.push(p)}},copy:function(){var t=new g,i=this;t.ce=i.ce,t.name=i.name,t.Oi=i.Oi,t.Yi=i.Yi,t.Zi=i.Zi,t.zi=i.zi,t.xi=i.xi,t.sr=i.sr,t.Xi=i.Xi,t._i=i._i,t.$i=i.$i,t.Dt=i.Dt;var r=t.Ni,n=i.Ni;return r.h=n.h,r.H=n.H,r.X=n.X,r.mr=n.mr,r.qr=n.qr,r.yr=n.yr,r.wr=n.wr,r.N.x=n.N.x,r.N.y=n.N.y,r.o=n.o,r.G=n.G,r.pr=n.pr,t.Tr=i.Tr,t.Ui=i.Ui,t.Hr=i.Hr,t.er=i.er,t.m=i.m.map((e,s)=>{var u=new V;return u.s.x=e.s.x,u.s.y=e.s.y,u.h=e.h,u.u=e.u,u.o=e.o,u.id=s,u}),t.R=i.R.map(e=>{var s=new Y,u=e.z,o=e.b,l=-1,c=-1;return i.m.forEach((v,p)=>{v==u?l=p:v==o&&(c=p)}),s.z=t.m[l],s.b=t.m[c],s.Wt=e.Wt,s.jt=e.jt,s.O=e.O,s.kt=e.kt,s.h=e.h,s.u=e.u,s.o=e.o,s}),t.Q=i.Q.map(e=>{var s=new x;return s.a.x=e.a.x,s.a.y=e.a.y,s.ut=e.ut,s.h=e.h,s.u=e.u,s.o=e.o,s}),t.Nt=i.Nt.map(e=>{var s=new Jr;return s.ui.x=e.ui.x,s.ui.y=e.ui.y,s.hi.x=e.hi.x,s.hi.y=e.hi.y,s.P=e.P,s}),t.p=i.p.map(e=>{var s=new qi;return s.s.x=e.s.x,s.s.y=e.s.y,s.A.x=e.A.x,s.A.y=e.A.y,s.N.x=e.N.x,s.N.y=e.N.y,s.G=e.G,s.h=e.h,s.H=e.H,s.X=e.X,s.O=e.O,s.u=e.u,s.o=e.o,s}),t.pt=i.pt.map(e=>{var s=new Ki;return s.Zt=e.Zt,s.Yt=e.Yt,s.It=e.It,s.Bt=e.Bt,s.Ai=e.Ai,s.O=e.O,s}),t.ti=i.ti.map(e=>new Hr(e.x,e.y)),t.ii=i.ii.map(e=>new Hr(e.x,e.y)),t.calculateNormals(),t}};Object.defineProperty(g.prototype,"isCustom",{get:function(){return!this.bs()}});_l(g,["vertices","segments","planes","goals","discs","joints","redSpawnPoints","blueSpawnPoints","playerPhysics","defaultStadiumId","maxViewWidth","cameraFollow","canBeStored","fullKickOffReset","name","width","height","bgType","bgColor","bgWidth","bgHeight","bgKickOffRadius","bgCornerRadius","spawnDistance","bgGoalLine"],[]);hu.B5=g});var lu=T((g2,fu)=>{var{pako:ou,E:Vl}=P(),{Event:Xn,yt:Ul}=B(),Fl=I(),Hl=Qr(),{F:Jl,w:Kl,extend:Wl}=j();function Gt(){this.V=0,this.S=null,this.i=0}Gt.create=function(t){var i=new Gt;return i.S=t,i};Gt.prototype=Wl(Xn.prototype,{apply:function(t){if(t.Si(this.i,8)){var i=t.getPlayer(this.i);t.e==null&&(t.S=this.S,t.qn!=null&&t.qn(i,this.S))}},ot:function(t){var i=Kl.U();this.S.Y(i),i=ou.deflateRaw(i._t()),t.Vt(i.byteLength),t.Xt(i)},ft:function(t){t=ou.inflateRaw(t.Lt(t.Mt())),this.S=Hl.it(new Jl(new DataView(t.buffer,t.byteOffset,t.byteLength)))},copy:function(){return Ul(Gt.create(this.S?.copy()),this)},rt:Gt});Object.defineProperty(Gt.prototype,"eventType",{get(){return Fl.SetStadium}});Gt.wt=Xn.qt({ct:!1,lt:!1,Xs:{Ys:10,Zs:2e3}});Xn.mt(Gt);Vl(Gt,[null,"stadium","byId"],[]);fu.B5=Gt});var cu=T((k2,vu)=>{var{E:Ql}=P(),{Event:Zn,yt:$l}=B(),Xl=I(),{extend:Yl}=j(),Yn=ft();function Lt(){this.V=0,this.I=0,this.P=null,this.i=0}Lt.create=function(t,i){var r=new Lt;return r.I=t,r.P=i,r};Lt.prototype=Yl(Zn.prototype,{apply:function(t){var i=t.getPlayer(this.I);if(i!=null){var r=t.getPlayer(this.i),n=t.Si(this.i,1);(n=n||i==r&&!t.hr&&t.e==null)&&i.P!=this.P&&(t.is(r,i,this.P),t.mn&&t.mn(this.I,this.P.id,this.i))}},ot:function(t){t.L(this.I),t.f(this.P.id)},ft:function(t){this.I=t.M(),t=t.Zn(),this.P=t==1?Yn.red:t==2?Yn.blue:Yn.spec},copy:function(){return $l(Lt.create(this.I,this.P),this)},rt:Lt});Object.defineProperty(Lt.prototype,"eventType",{get(){return Xl.SetPlayerTeam}});Lt.wt=Zn.qt({ct:!1,lt:!1});Zn.mt(Lt);Ql(Lt,[null,"playerId","team","byId"],[]);vu.B5=Lt});var pu=T((S2,wu)=>{var{E:Zl}=P(),{Event:zn,yt:zl}=B(),xl=I(),{extend:Dl}=j();function Vt(){this.V=0,this.ei=0,this.i=0}Vt.create=function(t){var i=new Vt;return i.ei=t,i};Vt.prototype=Dl(zn.prototype,{apply:function(t){t.Si(this.i,2)&&(t.hr=this.ei,t.yn&&t.yn(this.ei,this.i))},ot:function(t){t.f(this.ei?1:0)},ft:function(t){this.ei=t.T()!=0},copy:function(){return zl(Vt.create(this.ei),this)},rt:Vt});Object.defineProperty(Vt.prototype,"eventType",{get(){return xl.SetTeamsLock}});Vt.wt=zn.qt({ct:!1,lt:!1});zn.mt(Vt);Zl(Vt,[null,"newValue","byId"],[]);wu.B5=Vt});var mu=T((O2,qu)=>{var{E:bl}=P(),{Event:xn,yt:al}=B(),tv=I(),{extend:iv}=j();function Ut(){this.V=0,this.I=0,this.value=0,this.i=0}Ut.create=function(t,i){var r=new Ut;return r.I=t,r.value=i,r};Ut.prototype=iv(xn.prototype,{apply:function(t){if(t.Si(this.i,4)){var i=t.getPlayer(this.i),r=t.getPlayer(this.I);r!=null&&r.id!=0&&r.qi!=this.value&&(r.qi=this.value,t.Cn!=null&&t.Cn(i,r))}},ot:function(t){t.L(this.I),t.f(this.value?1:0)},ft:function(t){this.I=t.M(),this.value=t.T()!=0},copy:function(){return al(Ut.create(this.I,this.value),this)},rt:Ut});Object.defineProperty(Ut.prototype,"eventType",{get(){return tv.SetPlayerAdmin}});Ut.wt=xn.qt({ct:!1,lt:!1});xn.mt(Ut);bl(Ut,[null,"playerId","value","byId"],[]);qu.B5=Ut});var Cu=T((T2,yu)=>{var{E:rv}=P(),{Event:Dn,yt:nv}=B(),ev=I(),{extend:sv}=j(),ti=ft();function Ft(){this.V=0,this.i=0}Ft.create=function(){return new Ft};Ft.prototype=sv(Dn.prototype,{apply:function(t){if(t.Si(this.i,1)){for(var i=t.getPlayer(this.i),r=t.j,n=[],e=0,s=0,u=0;u<r.length;){var o=r[u];++u,o.P==ti.spec&&n.push(o),o.P==ti.red?++e:o.P==ti.blue&&++s}r=n.length;var l;r!=0&&(s==e?2>r||(t.is(i,n[0],ti.red),t.is(i,n[1],ti.blue),t.Pr&&t.Pr(n[0].id,ti.red.id,n[1].id,ti.blue.id,this.i)):(l=s>e?ti.red:ti.blue,t.is(i,n[0],l),t.Pr&&t.Pr(n[0].id,l.id,null,null,this.i)))}},ot:function(){},ft:function(){},copy:function(){return nv(Ft.create(),this)},rt:Ft});Object.defineProperty(Ft.prototype,"eventType",{get(){return ev.AutoTeams}});Ft.wt=Dn.qt({ct:!1,lt:!1});Dn.mt(Ft);rv(Ft,[null,"byId"],[]);yu.B5=Ft});var ku=T((R2,gu)=>{var{E:uv}=P(),{Event:bn,yt:hv}=B(),ov=I(),{extend:fv}=j();function Ht(){this.V=0,this.value=!1,this.i=0}Ht.create=function(t){var i=new Ht;return i.value=t,i};Ht.prototype=fv(bn.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&this.value!=i.Ii&&(i.Ii=this.value,t.we?.(i))},ot:function(t){t.f(this.value?1:0)},ft:function(t){this.value=t.T()!=0},copy:function(){return hv(Ht.create(this.value),this)},rt:Ht});Object.defineProperty(Ht.prototype,"eventType",{get(){return ov.SetPlayerSync}});Ht.wt=bn.qt({ct:!1,lt:!1});bn.mt(Ht);uv(Ht,[null,"value","byId"],[]);gu.B5=Ht});var Ou=T((P2,Su)=>{var{E:lv}=P(),{Event:an,yt:vv}=B(),cv=I(),{extend:wv}=j();function Jt(){this.V=0,this.values=null,this.i=0}Jt.prototype=wv(an.prototype,{apply:function(t){if(this.i==0){var i=t;t=t.j;for(var r=0,n=t.length;r<n;){var e=r++;if(e>=this.values.length)break;t[e].fn=this.values[e]}i.gn&&i.gn(this.values)}},ot:function(t){t.Ut(this.values.length);for(var i=0,r=this.values;i<r.length;)t.Ut(r[i++])},ft:function(t){this.values=[];for(var i=t.Jt(),r=0;r<i;)++r,this.values.push(t.Jt())},copy:function(){var t=new Jt,i=this.values;t.values=[];for(var r=i.length,n=0;n<r;n++)t.values.push(i[n]);return vv(t,this)},rt:Jt});Jt.create=function(t){for(var i=new Jt,r=t.t.j,n=[],e=0;e<r.length;){var s=t.Jr.get(r[e++].id);n.push(s==null?t.t.jh&&t.t.jh():s.fn)}return i.values=n,i};Object.defineProperty(Jt.prototype,"eventType",{get(){return cv.Ping}});Jt.wt=an.qt({ct:!1,lt:!1});an.mt(Jt);lv(Jt,[null,"values","byId"],[]);Su.B5=Jt});var Ru=T((N2,Tu)=>{var{E:pv}=P(),{Event:te,yt:qv}=B(),mv=I(),{extend:yv,Ir:Cv}=j();function Kt(){this.V=0,this.value=null,this.i=0}Kt.create=function(t){var i=new Kt;return i.value=t,i};Kt.prototype=yv(te.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&(i.Ct=this.value,t.kn&&t.kn(this.i,this.value))},ot:function(t){t.fi(this.value)},ft:function(t){this.value=t.oi(),this.value!=null&&(this.value=Cv(this.value,2))},copy:function(){return qv(Kt.create(this.value),this)},rt:Kt});Object.defineProperty(Kt.prototype,"eventType",{get(){return mv.SetAvatar}});Kt.wt=te.qt({ct:!1,lt:!1});te.mt(Kt);pv(Kt,[null,"value","byId"],[]);Tu.B5=Kt});var Xr=T((M2,Pu)=>{var{E:gv}=P(),kv=Q(),{Ht:Sv,q:Ov}=$();function $r(){this.pe=0,this.pi=16777215,this.Gi=[]}$r.prototype={Y:function(t){t.f(this.pe),t.L(this.pi),t.f(this.Gi.length);for(var i=0,r=this.Gi;i<r.length;)t.L(r[i++])},it:function(t){this.pe=t.T(),this.pi=t.M();var i=t.T();if(3<i)throw new Ov(Sv(kv.TeamColorsReadError));this.Gi=[];for(var r=0;r<i;)++r,this.Gi.push(t.M())},copy:function(){var t=new $r;return t.pe=this.pe,t.pi=this.pi,t.Gi=this.Gi.slice(),t}};gv($r,["angle","text","inner"],[]);Pu.B5=$r});var Au=T((A2,Mu)=>{var{E:Tv}=P(),{Event:re,yt:Rv}=B(),Pv=Q(),{q:Nv,Ht:Mv}=$(),Av=I(),{extend:jv}=j(),{K:ie}=wi(),Wi=ft(),Nu=Xr();function qt(){this.V=0,this.P=null,this.Kr=null,this.i=0}qt.create=function(t,i){var r=new qt;return r.P=t,r.Kr=i,r};qt.prototype=jv(re.prototype,{apply:function(t){t.Si(this.i,2)&&this.P!=Wi.spec&&(t.Li[this.P.id]=this.Kr,t.Sn&&t.Sn(this.P.id,this.Kr,this.i))},ot:function(t){t.f(this.P.id),this.Kr.Y(t)},ft:function(t){var i=t.Zn();this.P=i==1?Wi.red:i==2?Wi.blue:Wi.spec,this.Kr=new Nu,this.Kr.it(t)},copy:function(){return Rv(qt.create(this.P,this.Kr?.copy()),this)},rt:qt});Object.defineProperty(qt.prototype,"eventType",{get(){return Av.SetTeamColors}});qt.createFromData=function(t,i,...r){var n=new Nu,e=Wi.i[t];if(!e)throw new Nv(Mv(Pv.ChangeTeamColorsInvalidTeamIdError));n.Gi=[e.O];var s=qt.create(e,n),u=r.length;if(u<1)return s;if(u>4&&(u=4),n.pe=256*ie.parseInt(i)/360|0,n.pi=ie.parseInt("0x"+r[0]),1<u){n.Gi=[];for(var o=1,l=u;o<l;)n.Gi.push(ie.parseInt("0x"+r[o++]))}return s};qt.wt=re.qt({ct:!1,lt:!1});re.mt(qt);Tv(qt,[null,"team","colors","byId"],[]);Mu.B5=qt});var Eu=T((j2,ju)=>{var{E:Ev}=P(),{Event:ne,yt:_v}=B(),Bv=I(),{extend:Iv}=j();function Wt(){this.V=0,this.Di=null,this.Wr=!0,this.i=0}Wt.create=function(t,i){for(var r=new Wt,n=new Set,e=0,s,u;e<t.length;)n.add(t[e++]);for(t=[],e=0,n=n.values(),s=n.next();!s.done&&(u=s.value,s=n.next(),t.push(u),++e,!(e>=40)););return r.Di=t,r.Wr=i,r};Wt.prototype=Iv(ne.prototype,{apply:function(t){if(this.i==0){for(var i=new Map,r=0,n=t.j;r<n.length;){var e=n[r];++r,i.set(e.id,e)}for(r=[],n=0,e=this.Di;n<e.length;){var s=e[n];++n;var u=i.get(s);u!=null&&(i.delete(s),r.push(u))}for(n=[],i=i.values(),e=i.next();!e.done;)s=e.value,e=i.next(),n.push(s);t.j=this.Wr?r.concat(n):n.concat(r),t.On&&t.On(this.Di,this.Wr)}},ot:function(t){t.f(this.Wr?1:0),t.f(this.Di.length);for(var i=0,r=this.Di;i<r.length;)t.L(r[i++])},ft:function(t){this.Wr=t.T()!=0;var i=t.T();this.Di=[];for(var r=0;r<i;)++r,this.Di.push(t.M())},copy:function(){var t=new Wt;t.Wr=this.Wr;var i=this.Di;t.Di=[];for(var r=i.length,n=0;n<r;n++)t.Di.push(i[n]);return _v(t,this)},rt:Wt});Object.defineProperty(Wt.prototype,"eventType",{get(){return Bv.ReorderPlayers}});Wt.wt=ne.qt({ct:!1,lt:!1});ne.mt(Wt);Ev(Wt,[null,"playerIdList","moveToTop","byId"],[]);ju.B5=Wt});var Bu=T((E2,_u)=>{var{E:dv}=P(),{Event:ee,yt:Gv}=B(),Lv=I(),{extend:Vv}=j();function Qt(){this.V=0,this.min=0,this.qe=0,this.me=0,this.i=0}Qt.create=function(t,i,r){var n=new Qt;return n.min=t,n.qe=i,n.me=r,n};Qt.prototype=Vv(ee.prototype,{apply:function(t){t.Si(this.i,2)&&t.Cl(t.getPlayer(this.i),this.min,this.qe,this.me)},ot:function(t){t.L(this.min),t.L(this.qe),t.L(this.me)},ft:function(t){this.min=t.M(),this.qe=t.M(),this.me=t.M()},copy:function(){return Gv(Qt.create(this.min,this.qe,this.me),this)},rt:Qt});Object.defineProperty(Qt.prototype,"eventType",{get(){return Lv.SetKickRateLimit}});Qt.wt=ee.qt({ct:!1,lt:!1});ee.mt(Qt);dv(Qt,[null,"min","rate","burst","byId"],[]);_u.B5=Qt});var Gu=T((_2,du)=>{var{E:Uv}=P(),{Event:se,yt:Fv}=B(),Hv=I(),{extend:Jv,Ir:Iu}=j();function $t(){this.V=0,this.Ct="",this.I=0,this.i=0}$t.create=function(t,i){var r=new $t;return r.Ct=i!=null?Iu(i,2):null,r.I=t,r};$t.prototype=Jv(se.prototype,{apply:function(t){t=t.getPlayer(this.I),t!=null&&this.i==0&&(t.Ur=this.Ct,t.Tn&&t.Tn(this.I,this.Ct))},ot:function(t){t.fi(this.Ct),t.L(this.I)},ft:function(t){this.Ct=t.oi(),this.I=t.M(),this.Ct!=null&&(this.Ct=Iu(this.Ct,2))},copy:function(){return Fv($t.create(this.I,this.Ct),this)},rt:$t});Object.defineProperty($t.prototype,"eventType",{get(){return Hv.SetHeadlessAvatar}});$t.wt=se.qt({ct:!1,lt:!1});se.mt($t);Uv($t,[null,"avatar","playerId","byId"],[]);du.B5=$t});var Vu=T((B2,Lu)=>{var{E:Kv}=P(),{Event:ue,yt:Wv}=B(),Qv=I(),{extend:$v}=j();function rt(){this.V=0,this.id=0,this.type=!1,this.nt=null,this.$t=null,this.i=0}rt.create=function(t,i,r){var n=new rt;for(n.id=t,n.type=i,n.nt=[r.x,r.y,r.xspeed,r.yspeed,r.xgravity,r.ygravity,r.radius,r.bCoeff,r.invMass,r.damping],n.$t=[r.color,r.cMask,r.cGroup],t=0,i=n.nt.length;t<i;){r=t++;var e=n.nt[r];e!=null&&(rt.Eh[0]=e,n.nt[r]=rt.Eh[0])}for(t=0,i=n.$t.length;t<i;)r=t++,e=n.$t[r],e!=null&&(rt._h[0]=e,n.$t[r]=rt._h[0]);return n};rt.prototype=$v(ue.prototype,{apply:function(t){if(this.i==0){var i=t.e,r=t;if(i!=null){if(this.type){if(t=t.getPlayer(this.id),t==null)return;t=t.B}else t=i.v.p[this.id];t!=null&&(this.nt[0]!=null&&(t.s.x=this.nt[0]),this.nt[1]!=null&&(t.s.y=this.nt[1]),this.nt[2]!=null&&(t.A.x=this.nt[2]),this.nt[3]!=null&&(t.A.y=this.nt[3]),this.nt[4]!=null&&(t.N.x=this.nt[4]),this.nt[5]!=null&&(t.N.y=this.nt[5]),this.nt[6]!=null&&(t.G=this.nt[6]),this.nt[7]!=null&&(t.h=this.nt[7]),this.nt[8]!=null&&(t.H=this.nt[8]),this.nt[9]!=null&&(t.X=this.nt[9]),this.$t[0]!=null&&(t.O=this.$t[0]),this.$t[1]!=null&&(t.u=this.$t[1]),this.$t[2]!=null&&(t.o=this.$t[2]),r.Rn&&r.Rn(this.id,this.type,this.nt,this.$t))}}},ot:function(t){t.L(this.id),t.f(this.type?1:0);var i=t.l;t.Vt(0);for(var r=0,n=1,e=0,s=this.nt;e<s.length;){var u=s[e];++e,u!=null&&(r|=n,t.Is(u)),n<<=1}for(e=0,s=this.$t;e<s.length;)u=s[e],++e,u!=null&&(r|=n,t.L(u)),n<<=1;n=t.l,t.l=i,t.Vt(r),t.l=n},ft:function(t){this.id=t.M(),this.type=t.T()!=0;var i=t.Mt();this.nt=[];for(var r=0;10>r;){var n=r++;this.nt[n]=null,i&1&&(this.nt[n]=t._s()),i>>>=1}for(this.$t=[],r=0;3>r;)n=r++,this.$t[n]=null,i&1&&(this.$t[n]=t.M()),i>>>=1},copy:function(){var t=new rt;t.id=this.id,t.type=this.type;var i=this.nt;t.nt=[];for(var r=i.length,n=0;n<r;n++)t.nt.push(i[n]);for(i=this.$t,t.$t=[],r=i.length,n=0;n<r;n++)t.$t.push(i[n]);return Wv(t,this)},rt});Object.defineProperty(rt.prototype,"eventType",{get(){return Qv.SetDiscProperties}});rt.Eh=new Float32Array(1);rt._h=new Int32Array(1);rt.wt=ue.qt({ct:!1,lt:!1});ue.mt(rt);Kv(rt,[null,"id","type","data1","data2","byId"],[]);Lu.B5=rt});var Fu=T((I2,Uu)=>{var{E:Xv}=P(),{Event:he,yt:Yv}=B(),Zv=I(),{extend:zv}=j();function Xt(){this.V=0,this.type=0,this.data=null,this.i=0}Xt.create=function(t,i){var r=new Xt;return r.type=t,r.data=i,r};Xt.prototype=zv(he.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.Pn&&t.Pn(this.type,this.data,this.i)},ot:function(t){t.gt(this.type),t.wi(JSON.stringify(this.data))},ft:function(t){this.type=t.ht(),this.data=JSON.parse(t.ci())},copy:function(){return Yv(Xt.create(this.type,JSON.parse(JSON.stringify(this.data))),this)},rt:Xt});Object.defineProperty(Xt.prototype,"eventType",{get(){return Zv.CustomEvent}});Xt.wt=he.qt({ct:!1,lt:!1});he.mt(Xt);Xv(Xt,[null,"type","data","byId"],[]);Uu.B5=Xt});var Ku=T((d2,Ju)=>{var{pako:Hu,E:xv}=P(),{Event:oe,yt:Dv}=B(),bv=I(),{F:av,w:tc,extend:ic}=j();function Yt(){this.V=0,this.type=0,this.data=null,this.i=0}Yt.create=function(t,i){var r=new Yt;return r.type=t,r.data=i,r};Yt.prototype=ic(oe.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.Nn&&t.Nn(this.type,this.data,this.i)},ot:function(t){var i=tc.U();i.gt(this.type),i.Xt(this.data),i=Hu.deflateRaw(i._t()),t.gt(i.byteLength),t.Xt(i)},ft:function(t){t=Hu.inflateRaw(t.Lt(t.ht()));var i=new av(new DataView(t.buffer,t.byteOffset,t.byteLength));this.type=i.ht(),this.data=i.Lt()},copy:function(){var t=new Uint8Array;return t.set(this.data),Dv(Yt.create(this.type,t),this)},rt:Yt});Object.defineProperty(Yt.prototype,"eventType",{get(){return bv.BinaryCustomEvent}});Yt.wt=oe.qt({ct:!1,lt:!1});oe.mt(Yt);xv(Yt,[null,"type","data","byId"],[]);Ju.B5=Yt});var Qu=T((G2,Wu)=>{var{E:rc}=P(),{Event:fe,yt:nc}=B(),ec=I(),{extend:sc}=j();function Zt(){this.V=0,this.id=0,this.data=null,this.i=0}Zt.create=function(t,i){var r=new Zt;return r.id=t,r.data=i,r};Zt.prototype=sc(fe.prototype,{apply:function(t){if(this.i==0){var i=t.getPlayer(this.id);i!=null&&t.Mn&&(i.zs=this.data,t.Mn(this.id,this.data,this.i))}},ot:function(t){t.gt(this.id),t.wi(JSON.stringify(this.data))},ft:function(t){this.id=t.ht(),this.data=JSON.parse(t.ci())},copy:function(){return nc(Zt.create(this.id,JSON.parse(JSON.stringify(this.data))),this)},rt:Zt});Object.defineProperty(Zt.prototype,"eventType",{get(){return ec.SetPlayerIdentity}});Zt.wt=fe.qt({ct:!1,lt:!1});fe.mt(Zt);rc(Zt,[null,"id","data","byId"],[]);Wu.B5=Zt});var oi=T((L2,Yr)=>{Yr.B5=Yr.gl||(Yr.gl={SendAnnouncementEvent:Gs(),SendChatIndicatorEvent:Vs(),CheckConsistencyEvent:Fs(),SendInputEvent:Js(),SendChatEvent:Ws(),JoinRoomEvent:Xs(),KickBanPlayerEvent:Zs(),StartGameEvent:xs(),StopGameEvent:bs(),PauseResumeGameEvent:tu(),SetGamePropertyEvent:nu(),SetStadiumEvent:lu(),SetPlayerTeamEvent:cu(),SetTeamsLockEvent:pu(),SetPlayerAdminEvent:mu(),AutoTeamsEvent:Cu(),SetPlayerSyncEvent:ku(),PingEvent:Ou(),SetAvatarEvent:Ru(),SetTeamColorsEvent:Au(),ReorderPlayersEvent:Eu(),SetKickRateLimitEvent:Bu(),SetHeadlessAvatarEvent:Gu(),SetDiscPropertiesEvent:Vu(),CustomEvent:Fu(),BinaryCustomEvent:Ku(),IdentityEvent:Qu()})});var Yu=T((le,Xu)=>{var{E:uc}=P(),{Point:hc,Hs:$u,Fs:oc}=ki(),a=ft(),fc=pi();function ut(){this.ji=-1,this.Ot=null,this.xt=0,this.bi=0,this.Ti=0,this.Ri=0,this.Nr=a.red,this.state=0,this.Pi=0,this.v=new $u,this.At=0,this.dt=5,this.S=null,this.tt=null}ut.Bh=function(){for(var t=[],i=0;256>i;)++i,t.push(new hc(0,0));return t}(le);ut.Ih=function(){for(var t=[],i=0;256>i;)++i,t.push(0);return t}(le);ut.dr=function(t,i){t.tt=i.tt.Ei(),t.dt=i.dt,t.At=i.At,t.v=i.v.Ei(),t.Pi=i.Pi,t.state=i.state,t.Ri=i.Ri,t.Ti=i.Ti,t.bi=i.bi,t.xt=i.xt,t.S=i.S,t.Nr=i.Nr};ut.prototype={kl:function(t){this.tt=t,this.dt=t.dt,this.At=t.At,this.S=t.S,this.v=$u.Gf(t.S),this.dh()},Gh:function(t){t.P==a.spec?this.v.uh(t,this.tt.Sr):this.v.df(t,this.S,this.tt.ye)},Sl:function(t,i){for(var r=0,n=this.S.Nt;r<n.length;r++){var e=n[r];if(e.Af(t,i))return e.P}return a.spec},Ye:function(t){if(0<this.xt)120>this.xt&&this.xt--;else{this.tt.Ce?.();for(var i=this.tt.j,r=0;r<i.length;r++){var n=i[r];if(n.B!=null){!(n.Tt&16)&&(n.Ci=!1);var e=this.S.Ni;if(0<n.Ki&&n.Ki--,n.Wi<this.tt.Mr&&n.Wi++,n.Ci&&0>=n.Ki&&0<=n.Wi){for(var s=!1,u=0,o=this.v.p;u<o.length;){var l=o[u];++u,l.o&64&&l!=n.B&&this.v.kickBall(n.B,l,e)&&(s=!0)}s&&(this.tt.An!=null&&this.tt.An(n),n.Ci=!1,n.Ki=this.tt.or,n.Wi-=this.tt.ai)}this.v.If(n,e)}}for(r=0,n=this.v.p,e=0,u=n.length;e<u;)s=e++,o=n[s],o.o&128&&(ut.Ih[r]=s,s=ut.Bh[r],o=o.s,s.x=o.x,s.y=o.y,++r);switch(this.v.Ye(t,this.tt),this.state){case 0:{for(t=0;t<i.length;)r=i[t],++t,r.B!=null&&(r.B.u=39|this.Nr.u);this.v.p[0].Ef()&&(this.state=1,this.tt.jn!=null&&this.tt.jn());break}case 1:{for(this.bi+=.016666666666666666,t=0;t<i.length;)n=i[t],++t,n.B!=null&&(n.B.u=39);for(n=a.spec,i=this.v.p,t=0;t<r&&n==a.spec;t++)n=this.Sl(i[ut.Ih[t]].s,ut.Bh[t]);n!=a.spec?(this.state=2,this.Pi=150,this.Nr=n,n==a.red?this.Ti++:this.Ri++,this.tt.En!=null&&this.tt.En(n==a.red?a.blue:a.red),this.tt.Lh!=null&&this.tt.Lh(n.id)):0<this.At&&this.bi>=60*this.At&&this.Ri!=this.Ti&&(this.tt._n!=null&&this.tt._n(),this.Vh());break}case 2:{this.Pi--,0>=this.Pi&&(0<this.dt&&(this.Ri>=this.dt||this.Ti>=this.dt)||0<this.At&&this.bi>=60*this.At&&this.Ri!=this.Ti?this.Vh():(this.dh(),this.tt.Bn!=null&&this.tt.Bn()));break}case 3:{if(this.Pi--,this.Pi<=0&&(i=this.tt,i.e!=null)){for(i.e=null,t=0,r=i.j;t<r.length;)n=r[t],++t,n.B&&this.tt.Sr?.(n),n.B=null,n.ki=0;i.Or!=null&&i.Or(null)}break}}}},Vh:function(){this.Pi=300,this.state=3,this.tt.In!=null&&this.tt.In(this.Ri>this.Ti?a.red:a.blue)},dh:function(){var t=this.tt.j;this.state=0;for(var i=this.S.p,r=this.v.p,n=0,e=this.S.er?i.length:1,s,u,o,l;n<e;)s=n++,i[s].eh(r[s]);for(i=[0,0,0],r=0;r<t.length;)n=t[r],++r,this.Gh(n),e=n.P,e!=a.spec&&(s=n.B.s,u=this.S,o=i[e.id],l=e==a.red?u.ti:u.ii,l.length==0?(l=o+1>>1,!(o&1)&&(l=-l),u=u.Dt*e.ih,o=55*l):(o>=l.length&&(o=l.length-1),o=l[o],u=o.x,o=o.y),s.x=u,s.y=o,i[e.id]++,n.ki=i[e.id])},Y:function(t){this.v.Y(t),t.L(this.Pi),t.L(this.state),t.L(this.Ri),t.L(this.Ti),t.C(this.bi),t.L(this.xt),t.f(this.Nr.id)},it:function(t,i){this.v.it(t),this.Pi=t.M(),this.state=t.M(),this.Ri=t.M(),this.Ti=t.M(),this.bi=t.g(),this.xt=t.M();var r=t.Zn();this.Nr=r==1?a.red:r==2?a.blue:a.spec,this.tt=i,this.dt=i.dt,this.At=i.At,this.S=i.S,this.v.m=this.S.m,this.v.R=this.S.R,this.v.Q=this.S.Q,this.v.pt=this.S.pt},Ei:function(){var t=fc.Hi;return t!=this.ji&&(this.Ot||(this.Ot=new ut),this.ji=t,ut.dr(this.Ot,this)),this.Ot},copy:function(t){var i=new ut;return i.v.p=this.v.p.map(r=>{var n=new oc;return n.s.x=r.s.x,n.s.y=r.s.y,n.A.x=r.A.x,n.A.y=r.A.y,n.N.x=r.N.x,n.N.y=r.N.y,n.G=r.G,n.h=r.h,n.H=r.H,n.X=r.X,n.O=r.O,n.u=r.u,n.o=r.o,n.I=r.I,n}),i.Pi=this.Pi,i.state=this.state,i.Ri=this.Ri,i.Ti=this.Ti,i.bi=this.bi,i.xt=this.xt,i.Nr=this.Nr,i.tt=t||this.tt,i.dt=i.tt.dt,i.At=i.tt.At,i.S=i.tt.S,i.v.m=i.S.m,i.v.R=i.S.R,i.v.Q=i.S.Q,i.v.pt=i.S.pt,i}};ut.prototype.advance=ut.prototype.Ye;uc(ut,[null,"ext","pauseGameTickCounter","timeElapsed","blueScore","redScore",null,"state","goalTickCounter","physicsState","timeLimit","scoreLimit","stadium",null],[]);Xu.B5=ut});var Ni=T((V2,au)=>{var{E:lc}=P(),{D:vc,F:cc,w:Zu,Integer:ve,Du:Z}=j(),{Point:wc,Ze:pc,ze:Zr}=ki(),{JoinRoomEvent:qc,KickBanPlayerEvent:mc,SetPlayerTeamEvent:zu}=oi(),_=Qr(),fi=ft(),xu=Fr(),Du=Xr(),bu=Yu(),yc=pi();function yi(){this.ji=-1,this.Ot=null,this.S=_.xs()[0],this.or=2,this.ai=0,this.Mr=1,this.At=3,this.dt=3,this.hr=!1,this.e=null,this.j=[],this.name="",this.Li=[null,new Du,new Du],this.Li[1].Gi.push(fi.red.O),this.Li[2].Gi.push(fi.blue.O)}yi.dr=function(t,i){if(t.name=i.name,i.j==null)t.j=null;else{t.j==null&&(t.j=[]);for(var r=t.j,n=i.j,e=n.length,s;r.length>e;)r.pop();for(e=0,s=n.length;e<s;){var u=e++;r[u]=n[u].Df()}}t.e=i.e==null?null:i.e.Ei(),t.hr=i.hr,t.dt=i.dt,t.At=i.At,t.Mr=i.Mr,t.ai=i.ai,t.or=i.or,t.S=i.S,t.Li=i.Li};yi.prototype={bf:function(t){if(this.e==null){this.e=new bu;for(var i=0,r=this.j;i<r.length;){var n=r[i];++i,n.B=null,n.ki=0}this.e.kl(this),this.dn!=null&&this.dn(t)}},is:function(t,i,r){if(i.P!=r&&(i.P=r,vc.remove(this.j,i),this.j.push(i),!!this.e)){this.e.v.uh(i,this.Sr),this.e.Gh(i);for(var n=0,e=!1,s,u;!e;)for(++n,e=!0,s=0,u=this.j;s<u.length;){var o=u[s];if(++s,o!=i&&o.P==i.P&&o.ki==n){e=!1;break}}i.ki=n}},getPlayer:function(t){for(var i=0,r=this.j;i<r.length;){var n=r[i];if(++i,n.id==t)return n}return null},vt:function(t){this.e!=null&&this.e.Ye(t)},Y:function(t){t.fi(this.name),t.f(this.hr?1:0),t.L(this.dt),t.L(this.At),t.Bs(this.Mr),t.f(this.ai),t.f(this.or),this.S.Y(t),t.f(this.e!=null?1:0),this.e!=null&&this.e.Y(t),t.f(this.j.length);for(var i=0,r=this.j;i<r.length;)r[i++].ot(t);this.Li[1].Y(t),this.Li[2].Y(t)},it:function(t){this.name=t.oi(),this.hr=t.T()!=0,this.dt=t.M(),this.At=t.M(),this.Mr=t.Es(),this.ai=t.T(),this.or=t.T(),this.S=_.it(t);var i=t.T()!=0,r,n;for(this.e=null,i&&(this.e=new bu,this.e.it(t,this)),i=this.e==null?null:this.e.v.p,r=t.T(),n=this.j;n.length>r;)n.pop();for(n=0;n<r;){var e=new xu;e.ft(t,i),this.j[n++]=e}this.Li[1].it(t),this.Li[2].it(t)},Uh:function(){var t=0,i=Zu.U();for(this.Y(i),i=i.mf();4<=i.c.byteLength-i.l;)t^=i.M();return t},Ol:function(){var t=Zu.U(4);return t.L(this.Uh()),t.Je()},Zf:function(t){t=new cc(new DataView(t)).M(),this.Fh?.(this.Uh()!=t)},Hh:function(t){this.Lh=t},Si:function(t){return t==0?!0:(t=this.getPlayer(t),!!(t!=null&&t.qi))},Cl:function(t,i,r,n){this.or=0>i?0:255<i?255:i,this.ai=0>r?0:255<r?255:r,n=0>n?0:100<n?100:n,this.Mr=this.ai*n,this.ge?.(t,this.or,this.ai,n)},Ei:function(){var t=yc.Hi;return t!=this.ji&&(this.Ot||(this.Ot=new yi),this.ji=t,yi.dr(this.Ot,this)),this.Ot},copy:function(){var t=new yi;return t.name=this.name,t.hr=this.hr,t.dt=this.dt,t.At=this.At,t.Mr=this.Mr,t.ai=this.ai,t.or=this.or,t.S=this.S?.copy(),t.e=this.e?.copy(t),t.j=[],this.j.forEach((i,r)=>{var n=new xu;if(n.qi=i.qi,n.ki=i.ki,n.Ct=i.Ct,n.Ur=i.Ur,n.Ii=i.Ii,n.Rt=i.Rt,n.ln=i.ln,n.name=i.name,n.Tt=i.Tt,n.id=i.id,n.Ci=i.Ci,n.Wi=i.Wi,n.Ki=i.Ki,n.P=i.P,n.Qt=i.Qt,n.kr=i.kr,n.nr=i.nr,t.e&&i.B){var e=i.B.I,s=t.e.v.p.findIndex(u=>u.I==e);s>-1&&(n.B=t.e.v.p[s])}t.j[r]=n}),this.Li.forEach((i,r)=>{t.Li[r]=i?.copy()}),t},exportStadium:function(){if(this.e){var{S:t,v:i}=this.e,r=new pc,n=new Zr,e={},s=t.ti.map(c=>[c.x,c.y]),u=t.ii.map(c=>[c.x,c.y]),o=i.pt.map(_.gh);_.d(e,"type",t.Oi==1?"grass":t.Oi==2?"hockey":"none","none"),_.d(e,"width",t.Yi,0),_.d(e,"height",t.Zi,0),_.d(e,"kickOffRadius",t.zi,0),_.d(e,"cornerRadius",t.xi,0),_.wn(e,t.Xi,7441498),t.Oi==2&&_.d(e,"goalLine",t.sr,0);var l={name:t.name,width:t._i,height:t.$i,vertexes:i.m.map((c,v)=>{var p=_.mh(c);return p.id=v,p}),segments:i.R.map(c=>_.ul(this,c,r)),planes:i.Q.map(_.Sh),goals:t.Nt.map(_.Th),discs:i.p.map(c=>_.Ph(c,n)),bg:e,playerPhysics:_.Rh(t.Ni),ballPhysics:"disc0"};return _.d(l,"maxViewWidth",t.Tr,0),_.d(l,"cameraFollow",t.Ui==1?"player":"",""),_.d(l,"spawnDistance",t.Dt,200),o.length>0&&(l.joints=o),s.length>0&&(l.redSpawnPoints=s),u.length>0&&(l.blueSpawnPoints=u),_.d(l,"kickOffReset",t.er?"full":"partial","partial"),!t.Hr&&(l.canBeStored=!1),l}},createVertex:function(t){return _.yh(t)},createSegment:function(t){var i=_.Ch(t,this.e.v.m);return i.calculateNormals(),i},createSegmentFromObj:function(t){var i=_.ol(t,this.e.v.m);return i.calculateNormals(),i},createGoal:function(t){return _.ip(t)},createPlane:function(t){return _.Oh(t)},createDisc:function(t){return _.Ds(t,new Zr).Bf()},createJoint:function(t){return _.kh(t,this.e.v.p)},createJointFromObj:function(t){return _.ll(t,this.e.v.p)},addVertex:function(t){this.e.v.m.push(this.createVertex(t))},addSegment:function(t){this.e.v.R.push(this.createSegment(t))},addGoal:function(t){this.e.S.Nt.push(this.createGoal(t))},addPlane:function(t){this.e.v.Q.push(this.createPlane(t))},addDisc:function(t){var i=this.createDisc(t),r=this.e.v.p.findIndex(s=>s.I!=null);r<0&&(r=this.e.v.p.length),this.e.v.p.splice(r,0,i);for(var n=this.e.v.pt,e=this.e.v.p.length-2;e>=r;e--)n.forEach(s=>{s.Zt==e&&s.Zt++,s.Yt==e&&s.Yt++})},addJoint:function(t){this.e.v.pt.push(this.createJoint(t))},addSpawnPoint:function(t){var i;t.team=="red"?i=this.e.S.ti:t.team=="blue"&&(i=this.e.S.ii),i&&i.push(new wc(t.x,t.y))},addPlayer:function(t){var{team:i,id:r,name:n,avatar:e,flag:s}=t,u=i=="spec"?fi.spec:i=="red"?fi.red:i=="blue"?fi.blue:null;if(u){var o=qc.create(r,n,s,e,"fakeConn","fakeAuth");o.i=0,o.apply(this),i!="spec"&&(o=zu.create(r,u),o.i=0,o.apply(this),this.updateDiscObj(this.getPlayer(r).B,t))}},findVertexIndicesOfSegmentObj:function(t){var i=t.z,r=t.b,n=-1,e=-1;return this.e.v.m.forEach((s,u)=>{s==i?n=u:s==r&&(e=u)}),[n,e]},findVertexIndicesOfSegment:function(t){return this.findVertexIndicesOfSegmentObj(this.e.v.R[t])},updateVertex:function(t,i){var r=this.e.v.m[t];if(r){var n=_.yh(i);i.hasOwnProperty("x")&&(r.s.x=n.s.x),i.hasOwnProperty("y")&&(r.s.y=n.s.y),i.hasOwnProperty("bCoef")&&(r.h=n.h),i.hasOwnProperty("cMask")&&(r.u=n.u),i.hasOwnProperty("cGroup")&&(r.o=n.o),this.e.v.R.forEach(e=>{(e.b==r||e.z==r)&&e.calculateNormals()})}},updateSegment:function(t,i){var r=this.e.v.R[t];if(r){var n=_.Ch(i,this.e.v.m);(i.hasOwnProperty("v0")||i.hasOwnProperty("curve"))&&(r.z=n.z),(i.hasOwnProperty("v1")||i.hasOwnProperty("curve"))&&(r.b=n.b),(i.hasOwnProperty("bias")||i.hasOwnProperty("curve"))&&(r.Wt=n.Wt),(i.hasOwnProperty("curveF")||i.hasOwnProperty("curve"))&&(r.jt=n.jt),i.hasOwnProperty("vis")&&(r.kt=n.kt),i.hasOwnProperty("color")&&(r.O=n.O),i.hasOwnProperty("bCoef")&&(r.h=n.h),i.hasOwnProperty("cMask")&&(r.u=n.u),i.hasOwnProperty("cGroup")&&(r.o=n.o),r.calculateNormals()}},updateGoal:function(t,i){var r=this.e.S.Nt[t];if(r){var n=_.ip(i);i.hasOwnProperty("p0")&&(r.ui=n.ui),i.hasOwnProperty("p1")&&(r.hi=n.hi),i.hasOwnProperty("team")&&(r.P=n.P)}},updatePlane:function(t,i){var r=this.e.v.Q[t];if(r){var n=_.Oh(i);i.hasOwnProperty("normal")&&(r.a=n.a),i.hasOwnProperty("dist")&&(r.ut=n.ut),i.hasOwnProperty("bCoef")&&(r.h=n.h),i.hasOwnProperty("cMask")&&(r.u=n.u),i.hasOwnProperty("cGroup")&&(r.o=n.o)}},updateDisc:function(t,i){this.updateDiscObj(this.e.v.p[t],i)},updateDiscObj:function(t,i){if(t){var r=_.Ds(i,new Zr);i.hasOwnProperty("pos")&&(t.s=r.s),i.hasOwnProperty("speed")&&(t.A=r.A),i.hasOwnProperty("gravity")&&(t.N=r.N),i.hasOwnProperty("radius")&&(t.G=r.G),i.hasOwnProperty("invMass")&&(t.H=r.H),i.hasOwnProperty("damping")&&(t.X=r.X),i.hasOwnProperty("color")&&(t.O=r.O),i.hasOwnProperty("bCoef")&&(t.h=r.h),i.hasOwnProperty("cMask")&&(t.u=r.u),i.hasOwnProperty("cGroup")&&(t.o=r.o)}},updateJoint:function(t,i){var r=this.e.v.pt[t];if(r){var n=_.kh(i,this.e.v.p);i.hasOwnProperty("d0")&&(r.Zt=n.Zt),i.hasOwnProperty("d1")&&(r.Yt=n.Yt),i.hasOwnProperty("color")&&(r.O=n.O),i.hasOwnProperty("strength")&&(r.Ai=n.Ai),i.hasOwnProperty("length")&&(r.Bt=n.Bt,r.It=n.It)}},updateSpawnPoint:function(t,i,r){var n,e;if(i=="red"?n=this.e.S.ti:i=="blue"&&(n=this.e.S.ii),r.team=="red"?e=this.e.S.ti:r.team=="blue"&&(e=this.e.S.ii),!(!n||!e)){var s;n==e?s=n[t]:s=n.splice(t,1)[0],s&&(r.hasOwnProperty("x")&&(s.x=r.x),r.hasOwnProperty("y")&&(s.y=r.y),n!=e&&e.push(s))}},updatePlayer:function(t,i){var r=this.getPlayer(t);if(r){var n=null;if(i.hasOwnProperty("team")&&(n=i.team=="spec"?fi.spec:i.team=="red"?fi.red:i.team=="blue"?fi.blue:null),i.hasOwnProperty("name")&&(r.name=i.name),i.hasOwnProperty("flag")&&(r.Rt=i.flag),i.hasOwnProperty("avatar")&&(r.Ct=i.avatar),n!=null){var e=zu.create(t,n);e.i=0,e.apply(this)}r.B!=null&&this.updateDiscObj(r.B,i)}},removeVertex:function(t){var i=this.e.v.m.splice(t,1)[0];if(i){var r=this.e.v.R,n=[];r.forEach((e,s)=>{(e.b==i||e.z==i)&&n.unshift(s)}),n.forEach(e=>r.splice(e,1))}},removeSegment:function(t){this.e.v.R.splice(t,1)},removeGoal:function(t){this.e.S.Nt.splice(t,1)},removePlane:function(t){this.e.v.Q.splice(t,1)},removeDisc:function(t){this.e.v.p.splice(t,1);var i=this.e.v.pt,r=[];i.forEach((e,s)=>{(e.Zt==t||e.Yt==t)&&r.unshift(s)}),r.forEach(e=>i.splice(e,1));for(var n=t+1;n<=this.e.v.p.length;n++)i.forEach(e=>{e.Zt==n&&e.Zt--,e.Yt==n&&e.Yt--})},removeJoint:function(t){this.e.v.pt.splice(t,1)},removeSpawnPoint:function(t,i){var r;i=="red"?r=this.e.S.ti:i=="blue"&&(r=this.e.S.ii),r&&r.splice(t,1)},removePlayer:function(t){var i=mc.create(t,null,!0);i.i=0,i.apply(this)},updateStadiumPlayerPhysics:function(t){var i=this.e?.S.Ni;if(i){var r=_.Ds(t,new Zr);t.hasOwnProperty("radius")&&(i.G=r.G),t.hasOwnProperty("gravity")&&(i.N=r.N),t.hasOwnProperty("invMass")&&(i.H=r.H),t.hasOwnProperty("bCoef")&&(i.h=r.h),t.hasOwnProperty("cGroup")&&(i.o=r.o),t.hasOwnProperty("damping")&&(i.X=r.X),t.hasOwnProperty("kickingDamping")&&(i.yr=Z(t.kickingDamping,Number)),t.hasOwnProperty("acceleration")&&(i.mr=Z(t.acceleration,Number)),t.hasOwnProperty("kickingAcceleration")&&(i.qr=Z(t.kickingAcceleration,Number)),t.hasOwnProperty("kickStrength")&&(i.wr=Z(t.kickStrength,Number)),t.hasOwnProperty("kickback")&&(i.pr=Z(t.kickback,Number))}},updateStadiumBg:function(t){var i=this.e?.S;i&&(t.hasOwnProperty("type")&&(i.Oi=Z(t.type,ve)),t.hasOwnProperty("width")&&(i.Yi=Z(t.width,Number)),t.hasOwnProperty("height")&&(i.Zi=Z(t.height,Number)),t.hasOwnProperty("kickOffRadius")&&(i.zi=Z(t.kickOffRadius,Number)),t.hasOwnProperty("cornerRadius")&&(i.xi=Z(t.cornerRadius,Number)),t.hasOwnProperty("color")&&(i.Xi=Z(t.color,ve)),t.hasOwnProperty("goalLine")&&(i.sr=Z(t.goalLine,Number)))},updateStadiumGeneral:function(t){var i=this.e?.S;i&&(t.hasOwnProperty("name")&&(i.name=Z(t.name,String)),t.hasOwnProperty("width")&&(i._i=Z(t.width,Number)),t.hasOwnProperty("height")&&(i.$i=Z(t.height,Number)),t.hasOwnProperty("maxViewWidth")&&(i.Tr=Z(t.maxViewWidth,Number)),t.hasOwnProperty("cameraFollow")&&(i.Ui=Z(t.cameraFollow,ve)),t.hasOwnProperty("spawnDistance")&&(i.Dt=Z(t.spawnDistance,Number)),t.hasOwnProperty("kickOffReset")&&(i.er=Z(t.kickOffReset,Boolean)),t.hasOwnProperty("canBeStored")&&(i.Hr=Z(t.canBeStored,Boolean)))},runSteps:function(t){this.vt(t)}};lc(yi,[null,"ext","stadium","kickRate_min","kickRate_rate","kickRate_max","timeLimit","scoreLimit","teamsLocked","gameState","players","name","teamColors"],[]);au.B5=yi});var qe=T((U2,zr)=>{var{setInterval:Cc,clearInterval:gc,requestAnimationFrame:kc,cancelAnimationFrame:Sc,performance:xr,pako:Dr,E:rh}=P(),{Event:br}=B(),{Ht:th,tf:ce,q:Qi}=$(),nh=Ri(),{F:Mi,w:Ai,extend:Oc}=j(),Tc=pi(),eh=Ni(),ih=Q();function we(t,i){if(this.Jh=0,this.Ft=i,this.Kh=t?.k,this.Qr=Ai.U(1e3),this.ke=Ai.U(16384),this.as=t,!!t){var r=this,n=t.k;t.t.Y(this.ke),t.ni=function(s){var u=t.k;r.ke.Ut(u-n),n=u,r.ke.Vt(s.i),br.Cr(s,r.ke)},this.Qr.Vt(0);var e=this.Kh;t.t.Hh(function(s){var u=t.k;r.Qr.Ut(u-e),r.Qr.f(s),r.Jh++,e=u})}}we.prototype={stop:function(){this.as.ni=null,this.as.t.Hh(null),this.Qr.c.setUint16(0,this.Jh,this.Qr.Et),this.Qr.Xt(this.ke._t());var t=Dr.deflateRaw(this.Qr._t()),i=Ai.U(t.byteLength+32);return i.xn("HBR2"),i.gt(this.Ft),i.gt(this.as.k-this.Kh),i.Xt(t),i._t()}};function sh(t,i,r,n){if(this.Tl=[],this.rs=0,this.Gn=-1,this.tu=this.tr=this.iu=this.Wh=0,nh.call(this,i),t=new Mi(new DataView(t.buffer),!1),t.ht()!=1212305970)throw new Qi("");if(i=t.ht(),r!=i)throw new Qi(new ce(i));this.ns=t.ht(),r=Dr.inflateRaw(t.Lt()),this.fr=new Mi(new DataView(r.buffer,r.byteOffset,r.byteLength)),this.Rl(this.fr),r=this.fr.Lt(),this.fr=new Mi(new DataView(r.buffer,r.byteOffset,r.byteLength),!1),this.es(),this.iu=xr.now(),this.Bi=-1,this.callbacks=n,this.ss=null,this.Se=null}sh.prototype=Oc(nh.prototype,{Rl:function(t){for(var i=t.Mt(),r=0,n=0,e;n<i;)++n,r=r+t.Jt(),e=t.T(),this.Tl.push({Ac:r/this.ns,kind:e})},Qh:function(){var t=this.fr;0<t.c.byteLength-t.l?(t=this.fr.Jt(),this.tu+=t,t=this.fr.Mt(),this.us=br.ir(this.fr,!0),this.us.i=t):this.us=null},jc:function(){return this.k/this.ns},_:function(){},gr:function(){this.vt(),Tc.Hi++;var t=this.t.Ei();return t.vt(this.Wh),t},vt:function(){var t=xr.now(),i=t-this.iu;this.iu=t;var r=!1,n=!1;for(this.Gn>=0?(this.tr+=1e4,this.tr>this.Gn&&(this.tr=this.Gn,this.Gn=-1,r=!0)):this.tr+=i*this.rs,t=this.ns*this.$s,this.tr>t&&(this.tr=t,n=!0),i=this.tr*this.Ji,t=i|0,this.Wh=i-t;this.k<t;){for(;this.us!=null&&this.tu==this.k;)i=this.us,i.apply(this.t),this.ni!=null&&this.ni(i),this.Qh();this.k++,this.t.vt(1)}r&&(this.ss.assignCallbacks(),this.Se?.onDestinationTimeReached&&this.Se.onDestinationTimeReached()),n&&(this.rs=0,this.ss.clearCallbacks(),this.Se?.onEnd&&this.Se.onEnd())},$h:function(t){this.ss.clearCallbacks(),this.Gn=t,t<this.tr&&this.es()},es:function(){this.tu=0,this.tr=this.k=this.fr.l=0,this.t.it(this.fr),this.Qh()}});function Rc(t,i,r){var n=xr.now(),e=0,s=r?.requestAnimationFrame||kc,u=r?.cancelAnimationFrame||Sc,o=r?.fps_limit,l=i?.render,c=l&&function(){var p=xr.now();o!=null&&o>p-n||(n=p,0<t.Gn||l(t.gr()))},v=function(){e=s(v),t.vt(),l&&c()};e=s(v),this.clearCallbacks=function(){t.t.Vr=null,t.t.oe=null,t.t.An=null,t.t.En=null,t.t.In=null,t.t.ve=null,t.t.dn=null,t.t.Ce=null,t.t.jn=null,t.t.Dn=null,t.t.bn=null,t.t.an=null,t.t.te=null,t.t.nn=null,t.t.Pr=null,t.t.cn=null,t.t.vn=null,t.t.kn=null,t.t.ye=null,t.t.Sr=null,t.t.Tn=null,t.t.On=null,t.t.mn=null,t.t.Sn=null,t.t.yn=null,t.t.Pn=null,t.t.Nn=null,t.t.Mn=null,t.t.Rn=null,t.t.gn=null,t.t.sn=null,t.t.un=null,t.t._n=null,t.t.Bn=null,t.t.he=null,t.t.se=null,t.t.Or=null,t.t.qn=null,t.t.we=null,t.t.Cn=null,t.t.ge=null,t.t.le=null,t.t.ue=null},this.assignCallbacks=function(){t.t.Vr==null&&(t.t.Vr=p=>{i.onPlayerInputChange?.(p.id,p.Tt)},t.t.oe=p=>{i.onPlayerJoin?.(p)},t.t.An=p=>{i.onPlayerBallKick?.(p?.id)},t.t.En=p=>{i.onTeamGoal?.(p?.id)},t.t.In=p=>{i.onGameEnd?.(p.id)},t.t.ve=(p,C,m)=>{!m&&i.onGamePauseChange?.(C,p?.id)},t.t.dn=function(p){i.onGameStart?.(p?.id)},t.t.Ce=()=>{i.onGameTick?.()},t.t.jn=()=>{i.onKickOff?.()},t.t.Dn=(p,C,m,h)=>{i.onCollisionDiscVsDisc?.(p,C.I,m,h.I)},t.t.bn=(p,C,m)=>{i.onCollisionDiscVsPlane?.(p,C.I,m)},t.t.an=(p,C,m)=>{i.onCollisionDiscVsSegment?.(p,C.I,m)},t.t.te=(p,C,m,h)=>{i.Pl?.(p,C.I,m,h)},t.t.nn=(p,C,m)=>{i.Nl?.(p,C,m)},t.t.Pr=(p,C,m,h,f)=>{i.onAutoTeams?.(p,C,m,h,f)},t.t.cn=(p,C)=>{i.onTimeLimitChange?.(p,C)},t.t.vn=(p,C)=>{i.onScoreLimitChange?.(p,C)},t.t.ye=p=>{i.onPlayerDiscCreated?.(p)},t.t.Sr=p=>{i.onPlayerDiscDestroyed?.(p)},t.t.kn=(p,C)=>{i.onPlayerAvatarChange?.(p,C)},t.t.Tn=(p,C)=>{i.onPlayerHeadlessAvatarChange?.(p,C)},t.t.On=(p,C)=>{i.onPlayersOrderChange?.(p,C)},t.t.mn=(p,C,m)=>{i.onPlayerTeamChange?.(p,C,m)},t.t.Sn=(p,C,m)=>{i.onTeamColorsChange?.(p,C,m)},t.t.yn=(p,C)=>{i.onTeamsLockChange?.(p,C)},t.t.Pn=(p,C,m)=>{i.onCustomEvent?.(p,C,m)},t.t.Nn=(p,C,m)=>{i.onBinaryCustomEvent?.(p,C,m)},t.t.Mn=(p,C,m)=>{i.onIdentityEvent?.(p,C,m)},t.t.Rn=(p,C,m,h)=>{i.onSetDiscProperties?.(p,C,m,h)},t.t.gn=p=>{i.onPingData?.(p)},t.t.sn=p=>{i.onHandicapChange?.(p)},t.t.un=p=>{i.onExtrapolationChange?.(p)},t.t._n=()=>{i.onTimeIsUp?.()},t.t.Bn=()=>{i.onPositionsReset?.()},t.t.he=function(p,C){i.onPlayerChat?.(p.id,C)},t.t.se=function(p,C,m,h){i.onAnnouncement?.(p,C,m,h)},t.t.Or=function(p){i.onGameStop?.(p?.id)},t.t.qn=function(p,C){i.onStadiumChange?.(C,p?.id)},t.t.we=function(p){i.onPlayerSyncChange?.(p?.id,p?.Ii)},t.t.Cn=function(p,C){i.onPlayerAdminChange?.(C?.id,C?.qi,p?.id)},t.t.ge=function(p,C,m,h){i.onKickRateLimitChange?.(C,m,h,p?.id)},t.t.le=function(p,C,m,h){p.B&&i.onPlayerDiscDestroyed?.(p),i.onPlayerLeave?.(p,C,m,h?.id)},t.t.ue=function(p,C){i.onPlayerChatIndicatorChange?.(p?.id,!C)})},this.et=function(){u(e),this.clearCallbacks()},this.es=()=>{t.es()}}function Pc(t,i,r){var n,e,s=new eh;try{e=new sh(t,s,3,i),n=new Rc(e,i,r),e.ss=n}catch(l){var u=l instanceof Qi?l.zt:l;throw u instanceof ce?th(ih.ReplayFileVersionMismatchError):th(ih.ReplayFileReadError)}var o={state:s,getSpeed:()=>e.rs,setSpeed:l=>{n.assignCallbacks(),e.rs=l},getTime:()=>e.tr,length:()=>e.$s*e.ns,setTime:l=>{e.$h(l)},getCurrentFrameNo:()=>e.k,setCurrentFrameNo:l=>{e.$h(e.$s*l)},destroy:()=>{n.et()}};return Object.defineProperty(o,"gameState",{get(){return o.state.e}}),Object.defineProperty(o,"currentPlayerId",{get(){return e.Bi}}),e.Se=o,o}function pe(){this.roomData=new eh,this.events=[],this.goalMarkers=[],this.totalFrames=0,this.Ft=3}function Nc(t){var i=new pe,r=0,n=new Mi(new DataView(t.buffer),!1);if(n.ht()!=1212305970)throw new Qi("");var e=n.ht();if(e!=3)throw new Qi(new ce(e));i.totalFrames=n.ht();var s=Dr.inflateRaw(n.Lt()),u=new Mi(new DataView(s.buffer,s.byteOffset,s.byteLength)),o=null,l;for(e=u.Mt(),s=0,l=0;l<e;l++)s+=u.Jt(),i.goalMarkers.push({frameNo:s,teamId:u.T()});for(s=u.Lt(),u=new Mi(new DataView(s.buffer,s.byteOffset,s.byteLength),!1),i.roomData.it(u);u.l<u.c.byteLength;)e=u.Jt(),r+=e,e=u.Mt(),o=br.ir(u,!0),o.i=e,o.frameNo=r,i.events.push(o);return i}function Mc(t,i){if(t){var{roomData:r,events:n,totalFrames:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),!(u<s)){for(var o=0,l=0,c=n[0];l<s;){for(;l==c?.frameNo;)c.apply(r),c=n[++o];l++,r.vt(1)}n=n.filter(v=>v.frameNo>=s&&v.frameNo<=u),n.forEach(v=>{v.frameNo-=s}),t.events=n,t.goalMarkers=t.goalMarkers.filter(v=>v.frameNo>=s&&v.frameNo<=u),t.goalMarkers.forEach(v=>{v.frameNo-=s}),t.totalFrames=u-s+1}}}function Ac(t,i){if(!t)return Promise.resolve();var{roomData:r,events:n,totalFrames:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),u<s)return Promise.resolve();var o=0,l=0,c=n[0];return new Promise((v,p)=>{var C;C=Cc(()=>{if(l>=s){gc(C),n=n.filter(m=>m.frameNo>=s&&m.frameNo<=u),n.forEach(m=>{m.frameNo-=s}),t.events=n,t.goalMarkers=t.goalMarkers.filter(m=>m.frameNo>=s&&m.frameNo<=u),t.goalMarkers.forEach(m=>{m.frameNo-=s}),t.totalFrames=u-s+1,v();return}for(;l==c?.frameNo;)c.apply(r),c=n[++o];l++,r.vt(1)},0)})}function jc(t){var i=Ai.U(16384),r=0;t.roomData.Y(i),t.events.forEach(o=>{var l=o.frameNo;l<r||(i.Ut(l-r),r=l,i.Vt(o.i),br.Cr(o,i))});var n=Ai.U(1e3);n.Vt(t.goalMarkers.length);var e=0;t.goalMarkers.forEach(o=>{n.Ut(o.frameNo-e),n.f(o.teamId),e=o.frameNo}),n.Xt(i._t());var s=Dr.deflateRaw(n._t()),u=Ai.U(s.byteLength+32);return u.xn("HBR2"),u.gt(t.Ft),u.gt(t.totalFrames),u.Xt(s),u._t()}rh(we,[null,"version",null,null,null,null],[]);rh(pe,["roomData","events","goalMarkers","totalFrames","version"],[]);zr.B5=zr.Ml||(zr.Ml={ReplayData:pe,read:Pc,readAll:Nc,writeAll:jc,trim:Mc,trimAsync:Ac,bt:we})});var ye=T((F2,ar)=>{var{requestAnimationFrame:Ec,cancelAnimationFrame:_c,performance:tn,E:Bc}=P(),uh=Q(),Ic=ft(),{Ht:hh,Fe:dc,q:Gc}=$(),{extend:Lc}=j(),{SendAnnouncementEvent:Vc,SendChatIndicatorEvent:Uc,SendInputEvent:Fc,SendChatEvent:Hc,JoinRoomEvent:Jc,KickBanPlayerEvent:oh,StartGameEvent:Kc,StopGameEvent:Wc,PauseResumeGameEvent:Qc,SetGamePropertyEvent:fh,SetStadiumEvent:$c,SetPlayerTeamEvent:Xc,SetTeamsLockEvent:Yc,SetPlayerAdminEvent:Zc,AutoTeamsEvent:zc,SetPlayerSyncEvent:xc,PingEvent:Dc,SetAvatarEvent:bc,SetKickRateLimitEvent:ac,SetTeamColorsEvent:t0,SetHeadlessAvatarEvent:i0,SetDiscPropertiesEvent:r0,CustomEvent:n0,BinaryCustomEvent:e0,IdentityEvent:s0}=oi(),lh=Ri(),u0=Ni();function me(t){lh.call(this,t),this.events=[],this.A=1,this.$r=tn.now(),this.frozen=!1}me.prototype=Lc(lh.prototype,{_:function(){},gr:function(){return this.t},vt:function(){var t=this.events;this.events=[];for(var i=((tn.now()-this.$r)*this.Ji*this.A|0)-this.k,r=0;r<i;r++)this.k+=1,this.frozen||this.t.vt(1);t.forEach(n=>{n.apply(this.t)})},receiveEvent:function(t){this.events.push(t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.k=this.k*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.vt(t)}});function vh(t,i,r){var n=tn.now(),e=0,s=r?.requestAnimationFrame||Ec,u=r?.cancelAnimationFrame||_c,o=r?.fps_limit,l=i?.render,c=l&&function(){var m=tn.now();o!=null&&o>m-n||(n=m,l(t.gr()))},v=function(){e=s(v),t.vt(),l&&c()};function p(){e=s(v),t.t.Vr=m=>{i.onPlayerInputChange?.(m.id,m.Tt)},t.t.oe=m=>{i.onPlayerJoin?.(m)},t.t.An=m=>{i.onPlayerBallKick?.(m?.id)},t.t.En=m=>{i.onTeamGoal?.(m?.id)},t.t.In=m=>{i.onGameEnd?.(m.id)},t.t.ve=(m,h,f)=>{!f&&i.onGamePauseChange?.(h,m?.id)},t.t.dn=function(m){i.onGameStart?.(m?.id)},t.t.Ce=()=>{i.onGameTick?.()},t.t.jn=()=>{i.onKickOff?.()},t.t.Dn=(m,h,f,q)=>{i.onCollisionDiscVsDisc?.(m,h.I,f,q.I)},t.t.bn=(m,h,f)=>{i.onCollisionDiscVsPlane?.(m,h.I,f)},t.t.an=(m,h,f)=>{i.onCollisionDiscVsSegment?.(m,h.I,f)},t.t.te=(m,h,f,q)=>{i.Pl?.(m,h.I,f,q)},t.t.nn=(m,h,f)=>{i.Nl?.(m,h,f)},t.t.Pr=(m,h,f,q,w)=>{i.onAutoTeams?.(m,h,f,q,w)},t.t.cn=(m,h)=>{i.onTimeLimitChange?.(m,h)},t.t.vn=(m,h)=>{i.onScoreLimitChange?.(m,h)},t.t.ye=m=>{i.onPlayerDiscCreated?.(m)},t.t.Sr=m=>{i.onPlayerDiscDestroyed?.(m)},t.t.kn=(m,h)=>{i.onPlayerAvatarChange?.(m,h)},t.t.Tn=(m,h)=>{i.onPlayerHeadlessAvatarChange?.(m,h)},t.t.On=(m,h)=>{i.onPlayersOrderChange?.(m,h)},t.t.mn=(m,h,f)=>{i.onPlayerTeamChange?.(m,h,f)},t.t.Sn=(m,h,f)=>{i.onTeamColorsChange?.(m,h,f)},t.t.yn=(m,h)=>{i.onTeamsLockChange?.(m,h)},t.t.Pn=(m,h,f)=>{i.onCustomEvent?.(m,h,f)},t.t.Nn=(m,h,f)=>{i.onBinaryCustomEvent?.(m,h,f)},t.t.Mn=(m,h,f)=>{i.onIdentityEvent?.(m,h,f)},t.t.Rn=(m,h,f,q)=>{i.onSetDiscProperties?.(m,h,f,q)},t.t.gn=m=>{i.onPingData?.(m)},t.t.sn=m=>{i.onHandicapChange?.(m)},t.t.un=m=>{i.onExtrapolationChange?.(m)},t.t._n=()=>{i.onTimeIsUp?.()},t.t.Bn=()=>{i.onPositionsReset?.()},t.t.he=function(m,h){i.onPlayerChat?.(m.id,h)},t.t.se=function(m,h,f,q){i.onAnnouncement?.(m,h,f,q)},t.t.Or=function(m){i.onGameStop?.(m?.id)},t.t.qn=function(m,h){i.onStadiumChange?.(h,m?.id)},t.t.we=function(m){i.onPlayerSyncChange?.(m?.id,m?.Ii)},t.t.Cn=function(m,h){i.onPlayerAdminChange?.(h?.id,h?.qi,m?.id)},t.t.ge=function(m,h,f,q){i.onKickRateLimitChange?.(h,f,q,m?.id)},t.t.le=function(m,h,f,q){m.B&&i.onPlayerDiscDestroyed?.(m),i.onPlayerLeave?.(m,h,f,q?.id)},t.t.ue=function(m,h){i.onPlayerChatIndicatorChange?.(m?.id,!h)}}function C(){u(e),t.t.Vr=null,t.t.oe=null,t.t.An=null,t.t.En=null,t.t.In=null,t.t.ve=null,t.t.dn=null,t.t.Ce=null,t.t.jn=null,t.t.Dn=null,t.t.bn=null,t.t.an=null,t.t.te=null,t.t.nn=null,t.t.Pr=null,t.t.cn=null,t.t.vn=null,t.t.kn=null,t.t.ye=null,t.t.Sr=null,t.t.Tn=null,t.t.On=null,t.t.mn=null,t.t.Sn=null,t.t.yn=null,t.t.Pn=null,t.t.Nn=null,t.t.Mn=null,t.t.Rn=null,t.t.gn=null,t.t.sn=null,t.t.un=null,t.t._n=null,t.t.Bn=null,t.t.he=null,t.t.se=null,t.t.Or=null,t.t.qn=null,t.t.we=null,t.t.Cn=null,t.t.ge=null,t.t.le=null,t.t.ue=null}p(),this.et=function(){C()},this.Xh=function(m){C(),t.t=m,p()}}function h0(t,i){var r=new u0,n=new me(r),e=new vh(n,t,i),s;return s={state:r,takeSnapshot:function(){return r.copy()},useSnapshot:function(u){var o=u.copy();e.Xh(o),r=o,s.state=o},playerJoin:function(u,o,l,c,v,p){var C=Jc.create(u,o,l,c,v,p);C.i=0,n.receiveEvent(C)},playerLeave:function(u){var o=n.t.getPlayer(u);if(o){var l=oh.create(u,null,!0);l.i=0,n.receiveEvent(l)}},playerInput:function(u,o){var l=Fc.create(u);l.i=o,n.receiveEvent(l)},playerChat:function(u,o){var l=Hc.create(u);l.i=o,n.receiveEvent(l)},setKeyState:function(u){s.playerInput(u,i?.controlledPlayerId||0)},setPlayerChatIndicator:function(u,o){var l=Uc.create(u);l.i=o,n.receiveEvent(l)},setPlayerAvatar:function(u,o,l){if(u){var c=i0.create(l,o);c.i=0}else{var v=bc.create(o);v.i=l}n.receiveEvent(v)},setCurrentStadium:function(u,o,l){try{var c=$c.create(u);c.i=o,n.receiveEvent(c)}catch(v){c=v instanceof Gc?v.zt:v,c instanceof SyntaxError?l(hh(uh.StadiumParseSyntaxError,c.lineNumber)):c instanceof dc?l(c.As):l(hh(uh.StadiumParseUnknownError,c))}},sendAnnouncement:function(u,o=-1,l=0,c=1,v,p){var C=Vc.create(u,o,l,c);C.i=p,n.receiveEvent(C)},startGame:function(u){var o=Kc.create();o.i=u,n.receiveEvent(o)},stopGame:function(u){var o=Wc.create();o.i=u,n.receiveEvent(o)},setGamePaused:function(u,o){var l=Qc.create(u);l.i=o,n.receiveEvent(l)},setScoreLimit:function(u,o){var l=fh.create(0,u);l.i=o,n.receiveEvent(l)},setTimeLimit:function(u,o){var l=fh.create(1,u);l.i=o,n.receiveEvent(l)},setTeamsLock:function(u,o){var l=Yc.create(u);l.i=o,n.receiveEvent(l)},autoTeams:function(u){var o=zc.create();o.i=u,n.receiveEvent(o)},setPlayerTeam:function(u,o,l){var c=Ic.i[o];if(c){var v=Xc.create(u,c);v.i=l,n.receiveEvent(v)}},setKickRateLimit:function(u,o,l,c){var v=ac.create(u,o,l);v.i=c,n.receiveEvent(v)},setTeamColors:function(u,o,l,c){var v=t0.createFromData(u,o,...l);v.i=c,n.receiveEvent(v)},setPlayerAdmin:function(u,o,l){var c=Zc.create(u,o);c.i=l,n.receiveEvent(c)},kickPlayer:function(u,o,l,c){var v=oh.create(u,o,l);v.i=c,n.receiveEvent(v)},setPlayerSync:function(u,o){var l=xc.create(u);l.i=o,n.receiveEvent(l)},sendPingData:function(u,o){for(var l=new Dc,c=[],v=0;v<n.t.j.length;v++)c.push(u(n.t.j[v]));l.values=c,l.i=o,n.receiveEvent(l)},setDiscProperties:function(u,o,l,c){var v=r0.create(u,o,l);v.i=c,n.receiveEvent(v)},sendCustomEvent:function(u,o,l){var c=n0.create(u,o);c.i=l,n.receiveEvent(c)},sendBinaryCustomEvent:function(u,o,l){var c=e0.create(u,o);c.i=l,n.receiveEvent(c)},setPlayerIdentity:function(u,o,l){var c=s0.create(u,o);c.i=l,n.receiveEvent(c)},executeEvent:function(u){n.receiveEvent(u)},setSimulationSpeed:function(u){n.setSpeed(u)},runSteps:function(u){n.runSteps(u)},destroy:e.et},Object.defineProperty(s,"gameState",{get(){return s.state.e}}),Object.defineProperty(s,"currentPlayerId",{get(){return 0}}),s}Bc(me,[null,null,null,null,null,null,null,null,null,null,null,null,null,"speed",null,null],[]);ar.B5=ar.Al||(ar.Al={Sandbox:vh,createSandbox:h0})});var rn=T((J2,wh)=>{var{httpUrl:H2,XMLHttpRequest:o0}=P(),{q:ch}=$();function gt(){}gt.jl="application/x-www-form-urlencoded";gt.Yh=function(t,i,r,n,e){return new Promise(function(s,u){var o=new o0;o.open(i,t),o.responseType=r,o.onload=function(){200<=o.status&&300>o.status?o.response!=null?s(o.response):u(null):u("status: "+o.status)},o.onerror=function(l){u(l)},e!=null&&o.setRequestHeader("Content-type",e),o.send(n)})};gt.Zh=function(t,i){return gt.Yh(t,"GET",i,null)};gt.El=function(t){return gt.Zh(t,"json").then(function(i){var r=i.error;if(r!=null)throw new ch(r);return i.data})};gt._l=function(t,i,r){return gt.Yh(t,"POST","json",i,r)};gt.Bl=function(t,i,r){return gt._l(t,i,r).then(function(n){var e=n.error;if(e!=null)throw new ch(e);return n.data})};wh.B5=gt});var ge=T((K2,nn)=>{var{E:qh}=P(),{Ir:ph}=j();function Ce(){this.Ft=0,this.name="",this.Rt="",this.Oe=0,this.Te=0,this.at=!1,this.ru=0,this.j=0}Ce.prototype={zh:function(){this.name=ph(this.name,40),this.Rt=ph(this.Rt,3)},Y:function(t){this.zh(),t.Et=!0,t.Vt(this.Ft),t.Zu(this.name),t.Zu(this.Rt),t.Is(this.Oe),t.Is(this.Te),t.f(this.at?1:0),t.f(this.ru),t.f(this.j),t.Et=!1},it:function(t){t.Et=!0,this.Ft=t.Mt(),this.name=t.Yu(),this.Rt=t.Yu(),this.Oe=t._s(),this.Te=t._s(),this.at=t.T()!=0,this.ru=t.T(),this.j=t.T(),t.Et=!1,this.zh()}};function mh(){this.data=null,this.id="",this.ut=1/0}qh(Ce,["version","name","flag","lat","lon","password","maxPlayers","players"],[]);qh(mh,["data","id","dist"],[]);nn.B5=nn.Il||(nn.Il={RoomDataDetails:Ce,RoomData:mh})});var ke=T((W2,Ch)=>{var{crypto:ji}=P(),f0=Q(),{F:yh,w:l0}=j(),{Ht:v0,q:Ei}=$();function D(){}D.nu={name:"ECDSA",namedCurve:"P-256"};D.xh={name:"ECDSA",hash:{name:"SHA-256"}};D.dl=function(){try{return ji.subtle.generateKey(D.nu,!0,["sign","verify"]).then(function(t){var i=t.privateKey;return ji.subtle.exportKey("jwk",i).then(function(r){var n=r.y,e=r.d,s=new D;return s.eu=r.x,s.su=n,s.Dh=e,s.bh=i,s})})}catch(t){return Promise.reject(t instanceof Ei?t.zt:t)}};D.Gl=function(t){if(t=t.split("."),t.length!=4||t[0]!="idkey")return Promise.reject(v0(f0.AuthFromKeyInvalidIdFormatError));var i=t[1],r=t[2],n=t[3];return D.Ll(i,r,n).then(function(e){var s=new D;return s.eu=i,s.su=r,s.Dh=n,s.bh=e,s})};D.Vl=function(t,i){try{var r=new yh(new DataView(t.buffer,t.byteOffset,t.byteLength),!1);r.T();var n=r.Lt(r.Mt()),e=r.Lt(),s=new yh(new DataView(n.buffer,n.byteOffset,n.byteLength),!1),u=s.ci(),o=s.ci(),l=s.Lt(),c;if(l.byteLength!=i.byteLength)return Promise.reject(null);for(r=0,c=l.byteLength;r<c;){var v=r++;if(l[v]!=i[v])return Promise.reject(null)}return D.Ul(u,o).then(function(p){return ji.subtle.verify(D.xh,p,e,n)}).then(function(p){if(!p)throw new Ei(null);return u})}catch(p){return Promise.reject(p instanceof Ei?p.zt:p)}};D.Ll=function(t,i,r){try{return ji.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["sign"],kty:"EC",d:r,x:t,y:i},D.nu,!0,["sign"])}catch(n){return Promise.reject(n instanceof Ei?n.zt:n)}};D.Ul=function(t,i){try{return ji.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",x:t,y:i},D.nu,!0,["verify"])}catch(r){return Promise.reject(r instanceof Ei?r.zt:r)}};D.prototype={Fl:function(){return"idkey."+this.eu+"."+this.su+"."+this.Dh},Hl:function(t){try{var i=l0.U(1024);i.f(1);var r=i.l;i.Vt(0);var n=i.l;i.wi(this.eu),i.wi(this.su),i.Xt(t);var e=i.l-n;i.c.setUint16(r,e,i.Et);var s=new Uint8Array(i.c.buffer,i.c.byteOffset+n,e);return ji.subtle.sign(D.xh,this.bh,s).then(function(u){return i.Ke(u),i._t()})}catch(u){return Promise.reject(u instanceof Ei?u.zt:u)}}};Ch.B5=D});var $i=T((Q2,en)=>{var{httpUrl:Oh}=P(),gh=Q(),{Ht:kh,Fe:c0,q:w0}=$(),{F:Sh,bu:p0,Ir:q0}=j(),Th=Qr(),Rh=rn(),{RoomDataDetails:m0,RoomData:y0}=ge(),{au:C0,th:g0,J:k0}=wi(),Ph=ke();function S0(){try{return Ph.dl().then(t=>[t.Fl(),t])}catch(t){return Promise.reject(t)}}function O0(t){try{return Ph.Gl(t)}catch(i){return Promise.reject(i)}}function T0(t){return"rgba("+[(t&16711680)>>>16,(t&65280)>>>8,t&255].join()+",255)"}function R0(t){var i=t.match(/rgba?[ \t]*\([ \t]*(\d+),[ \t]*(\d+),[ \t]*(\d+)[ \t]*\)/);if(!(i.length<4)){var r=parseInt(i[1]),n=parseInt(i[2]),e=parseInt(i[3]);if(!(r>255||n>255||e>255))return r<<16|n<<8|e}}function P0(t){var i;if(t?.includes(".")){if(i=t.split("."),i.length>4)return;for(;i.length<4;)i.splice(0,0,"");return i.reduce((s,u,o)=>{if(s!=null){var l=parseInt(u.length>0?u:"0");return isNaN(l)||l<0||l>255?null:(s|=l<<24-o*8,s)}},0)}if(t?.includes(":")){i=t.split(":");var r=t.indexOf("::");if(r!=t.lastIndexOf("::"))return;if(r>=0){var n=i.length;if(n>9)return;r=i.findIndex(s=>s.length==0),(r==0||r==n-2&&i[n-1].length==0)&&(i.splice(r,1),n--),i[r]="0";for(var e=0;e<8-n;e++)i.splice(r+1,0,"0")}return i.length!=8?void 0:i.reduce((s,u,o)=>{if(s!=null){var l=parseInt(u,16);if(!(isNaN(l)||l<0||l>65535))return s|=BigInt(l)<<112n-BigInt(o)*16n,s}},0n)}}function N0(t){var i=t?.__proto__.constructor.name,r,n;if(i=="BigInt"){var e={Re:-1,f:0},s={Re:-1,f:0};for(n=[],r=0;r<8;r++){var u=t&65535n;u==0?(s.f==0&&(s.Re=7-r),s.f++,s.f>e.f&&(e.f=s.f,e.Re=s.Re)):s.f=0,n.splice(0,0,u.toString(16)),t>>=16n}e.f>0&&(r=e.Re-e.f+1,n.splice(r,e.f-1),n[r]="");var o=n.join(":");return o.length==0?o="::":o.charAt(o.length-1)==":"?o+=":":o.charAt(0)==":"&&(o=":"+o),o}else if(i=="Number"){for(n=[],r=0;r<4;r++)n.splice(0,0,""+(t&255)),t>>=8;return n.join(".")}}function M0(t){if(t.length==43){for(var i=0n,r=0,n=252;r<43;r++,n-=6){var e=t.charCodeAt(r);if(e==45)e=0;else if(e==95)e=63;else if(e>=48&&e<=57)e-=47;else if(e>=65&&e<=90)e-=54;else if(e>=97&&e<=122)e-=60;else return;i|=BigInt(e)<<BigInt(n)}return i}}function A0(t){var i=t?.__proto__.constructor.name;if(i=="BigInt"){for(var r="",n=0;n<43;n++){if(i=Number(t&63n),i==0)i=45;else if(i==63)i=95;else if(i>=1&&i<=10)i+=47;else if(i>=11&&i<=36)i+=54;else if(i>=37&&i<=62)i+=60;else return;r=String.fromCharCode(i)+r,t>>=6n}return r}}function j0(t,i,r){return!((t^i)&r)}function E0(t){return t.bs()?null:k0.Gs(t.yl(),8)}function _0(t,i,r){return(r?16:0)|(t>0?8:t<0?4:0)|(i>0?2:i<0?1:0)}function B0(t){return{dirX:((t&8)>0)-((t&4)>0),dirY:((t&2)>0)-((t&1)>0),kick:(t&16)>0}}var I0=()=>Rh.Zh(Oh+"api/list","arraybuffer").then(t=>{t=new Sh(new DataView(t),!1),t.T();for(var i=[];t.c.byteLength-t.l!=0;){var r=t.rn(t.Mt()),n=t.Xu(t.Mt());try{var e=new m0;e.it(new Sh(new DataView(n),!1));var s=new y0;s.data=e,s.id=r,i.push(s)}catch{}}return i});function d0(t,i){let r=Math.PI/180;for(var n=t.lat,e=t.lon,s=0;s<i.length;s++){var u=i[s],{Oe:o,Te:l}=u.data,c=Math.cos(r*(o-n)),v=Math.cos(r*(o+n));u.ut=6378*Math.acos((c-v+(c+v)*Math.cos(r*(l-e)))/2),isFinite(u.ut)||(u.ut=22e3)}}var G0=()=>Rh.El(Oh+"api/geo").then(t=>({lat:t.lat,lon:t.lon,flag:t.code.toLowerCase()})),L0=(t,i,r=!0)=>!t&&r?null:(typeof t=="string"&&(t=JSON.parse(t)),{lat:t?.lat||i?.lat||40,lon:t?.lon||i?.lon||40,flag:t?.flag||i?.flag||"tr"});function V0(){return Th.xs()}function U0(t,i){try{var r=new Th;return r.ml(t),r}catch(e){var n=e instanceof w0?e.zt:e;n instanceof SyntaxError?i(kh(gh.StadiumParseSyntaxError,n.lineNumber)):n instanceof c0?i(n.As):i(kh(gh.StadiumParseUnknownError,n))}}function F0(t){return t.pl()}function Nh(t,i=1){if(i<=0){t();return}Promise.resolve().then(()=>{Nh(t,i-1)})}en.B5=en.Jl||(en.Jl={generateAuth:S0,authFromKey:O0,getRoomList:I0,calculateAllRoomDistances:d0,numberToColor:T0,colorToNumber:R0,ipToNumber:P0,numberToIp:N0,authToNumber:M0,numberToAuth:A0,compareBits:j0,keyState:_0,reverseKeyState:B0,runAfterGameTick:Nh,getGeo:G0,parseGeo:L0,stadiumChecksum:E0,parseStadium:U0,exportStadium:F0,getDefaultStadiums:V0,promiseWithTimeout:p0,trimStringIfLonger:q0,hexStrToNumber:C0,byteArrayToIp:g0})});var Bh=T(($2,sn)=>{var Mh=I(),{Event:Ah}=B(),{SendAnnouncementEvent:H0,SendChatIndicatorEvent:J0,CheckConsistencyEvent:K0,SendInputEvent:W0,SendChatEvent:Q0,JoinRoomEvent:$0,KickBanPlayerEvent:X0,StartGameEvent:Y0,StopGameEvent:Z0,PauseResumeGameEvent:z0,SetGamePropertyEvent:jh,SetStadiumEvent:x0,SetPlayerTeamEvent:D0,SetTeamsLockEvent:b0,SetPlayerAdminEvent:a0,AutoTeamsEvent:t1,SetPlayerSyncEvent:i1,PingEvent:r1,SetAvatarEvent:n1,SetTeamColorsEvent:e1,ReorderPlayersEvent:s1,SetKickRateLimitEvent:u1,SetHeadlessAvatarEvent:h1,SetDiscPropertiesEvent:Eh,CustomEvent:o1,BinaryCustomEvent:f1,IdentityEvent:l1}=oi(),_h=ft();sn.B5=sn.Kl||(sn.Kl={create:t=>{var i=Ah.oh.get(t);if(i){var r=Object.create(i.prototype);return r.V=0,t==Mh.SetScoreLimit?r.type=0:t==Mh.SetTimeLimit&&(r.type=1),r}},createFromStream:t=>Ah.ir(t,!0),checkConsistency:t=>K0.create(t),sendAnnouncement:(t,i=-1,r=0,n=1)=>H0.create(t,i,r,n),sendChatIndicator:t=>J0.create(t?0:1),sendInput:t=>W0.create(t),sendChat:t=>Q0.create(t),joinRoom:(t,i,r,n,e,s)=>$0.create(t,i,r,n,e,s),setHeadlessAvatar:(t,i)=>h1.create(t,i),kickBanPlayer:(t,i,r)=>X0.create(t,i,r),reorderPlayers:(t,i)=>s1.create(t,i),startGame:()=>Y0.create(),stopGame:()=>Z0.create(),pauseResumeGame:t=>z0.create(t),setScoreLimit:t=>jh.create(0,t),setTimeLimit:t=>jh.create(1,t),setStadium:t=>x0.create(t),setPlayerTeam:(t,i)=>{var r=_h.i[i];if(r)return D0.create(t,r)},setTeamsLock:t=>b0.create(t),setPlayerAdmin:(t,i)=>a0.create(t,i),autoTeams:()=>t1.create(),setPlayerSync:t=>i1.create(t),ping:t=>r1.create(t),setAvatar:t=>n1.create(t),setTeamColors:(t,i)=>{var r=_h.i[t];if(r)return e1.create(r,i)},setKickRateLimit:(t,i,r)=>u1.create(t,i,r),setDiscProperties:(t,i)=>Eh.create(t,!1,i),setPlayerDiscProperties:(t,i)=>Eh.create(t,!0,i),customEvent:(t,i)=>o1.create(t,i),binaryCustomEvent:(t,i)=>f1.create(t,i),setPlayerIdentity:(t,i)=>l1.create(t,i)})});var Pe=T((X2,Kh)=>{var{setTimeout:Ih,pako:dh}=P(),_i=Q(),{Event:Gh}=B(),{Ht:Bi,Fe:v1,q:c1}=$(),{w:Se}=j(),Xi=ft(),{Js:w1}=jn(),{SendAnnouncementEvent:p1,SendChatIndicatorEvent:Lh,SendInputEvent:q1,SendChatEvent:Oe,JoinRoomEvent:m1,KickBanPlayerEvent:Te,StartGameEvent:y1,StopGameEvent:C1,PauseResumeGameEvent:g1,SetGamePropertyEvent:Vh,SetStadiumEvent:k1,SetPlayerTeamEvent:S1,SetTeamsLockEvent:O1,SetPlayerAdminEvent:Uh,AutoTeamsEvent:T1,SetPlayerSyncEvent:R1,SetAvatarEvent:Re,ReorderPlayersEvent:P1,SetKickRateLimitEvent:Fh,SetTeamColorsEvent:Hh,SetHeadlessAvatarEvent:N1,SetDiscPropertiesEvent:Jh,CustomEvent:M1,BinaryCustomEvent:A1,IdentityEvent:j1}=oi();function E1(t,i,r,n,e){var s=i.renderer,u=n;if(Object.defineProperty(this,"config",{get(){return u}}),Object.defineProperty(this,"sdp",{get(){return i.isHost?null:i.r?.n.st.Pt.remoteDescription.sdp}}),Object.defineProperty(this,"isHost",{get(){return i.isHost}}),Object.defineProperty(this,"currentPlayerId",{get(){return i.r?.n.Bi}}),Object.defineProperty(this,"currentPlayer",{get(){var h=i.r?.n.Bi;return i.r?.n.t.j.filter(f=>f.id==h)[0]}}),Object.defineProperty(this,"state",{get(){return i.r?.n?.t}}),Object.defineProperty(this,"stateExt",{get(){return i.extrapolatedRoomState}}),Object.defineProperty(this,"gameState",{get(){return i.roomState?.e}}),Object.defineProperty(this,"gameStateExt",{get(){return i.extrapolatedRoomState?.e}}),Object.defineProperty(this,"currentFrameNo",{get(){return i.r?.n?.k}}),Object.defineProperty(this,"banList",{get(){return i.r?.n?.Gt?.banList?.getList()}}),Object.defineProperty(this,"token",{get(){return i.r?.n?.Gt?.Pe},set(h){var f=i.r?.n?.Gt;f&&(f.Pe=h,f.hs(),i.r.Xr="",f.uu=Ih(()=>{f.os(),this._onRoomTokenChange?.(f.Pe)},2*f.ah))}}),Object.defineProperty(this,"requireRecaptcha",{get(){return i.r?.n?.Gt?.hu},set(h){i.r?.n?.Gt?.ou(h)}}),Object.defineProperty(this,"name",{get:function(){return i.r?.n?.t.name}}),Object.defineProperty(this,"password",{get:function(){return i.r?.n?.at}}),Object.defineProperty(this,"geo",{get:function(){return i.r?.n?.Ne}}),Object.defineProperty(this,"maxPlayerCount",{get:function(){var h=i.r?.n?.Ln;return h==null?null:h+1}}),Object.defineProperty(this,"fakePassword",{get:function(){return i.r?.n?.Vn}}),Object.defineProperty(this,"fixedPlayerCount",{get:function(){return i.r?.n?.Me}}),Object.defineProperty(this,"showInRoomList",{get:function(){return i.r?.n?.fs}}),Object.defineProperty(this,"unlimitedPlayerCount",{get:function(){return i.r?.n?.Un}}),Object.defineProperty(this,"link",{get:function(){return i.r?.Xr}}),Object.defineProperty(this,"timeLimit",{get:function(){return i.r?.n.t.At}}),Object.defineProperty(this,"scoreLimit",{get:function(){return i.r?.n.t.dt}}),Object.defineProperty(this,"redScore",{get:function(){return(i.extrapolatedRoomState?.e||i.roomState?.e)?.Ri}}),Object.defineProperty(this,"blueScore",{get:function(){return(i.extrapolatedRoomState?.e||i.roomState?.e)?.Ti}}),Object.defineProperty(this,"timeElapsed",{get:function(){return(i.extrapolatedRoomState?.e||i.roomState?.e)?.bi}}),Object.defineProperty(this,"stadium",{get:function(){return i.r?.n.t.S}}),Object.defineProperty(this,"players",{get:function(){return i.r?.n.t.j}}),this.Ar=-1,this.libraries=r||[],this.librariesMap=this.libraries.reduce((h,f)=>(h[f.name]=f,h),{}),this.renderer=s,i.to){let h=function(w,y,k){for(var S=0,R=0;S<w.length&&R<y.length;){for(;S<w.length&&R<y.length&&w[S]==y[R]&&w[S]!=k;)S++,R++;if(w[S]==k)break;for(;S<w.length&&R<y.length&&w[S]!=y[R]&&w[S]!=k;)S++;if(w[S]==k)break}y[R]!=k&&y.splice(R,0,k)},f=function(w){Object.defineProperty(o,w,{get(){return u[w]},set(y){u[w]=y}})},q=function(w){f(w+"Before"),f(w),f(w+"After")};var p=h,C=f,m=q;this.plugins=e||[],this.pluginsMap=this.plugins.reduce((w,y)=>(w[y.name]=y,w),{}),this.activePlugins=this.plugins.filter(w=>w.active);var o=this;this.setConfig=function(w){var y=u;y.finalize?.(),y.room=null,w=w||{},w.room=o,w.initialize?.(),o.client.config=w,u=w,o._onConfigUpdate?.(y,w)},this.mixConfig=function(w){Object.keys(w).forEach(y=>{var k=w[y];if(typeof k=="function"){var S=u[y];S?typeof S=="function"&&(u[y]=function(...R){S(...R),k(...R)}):u[y]=k}})},this.setRenderer=function(w){s&&(s.finalize?.(),s.room=null),w&&(w.room=o,w.initialize?.());var y=s;o.renderer=w,o.client.renderer=w,i.renderer=w,s=w,o._onRendererUpdate?.(y,w)},this.setPluginActive=function(w,y){var k=o.plugins.filter(R=>R.name==w)[0],S;if(!(!k||k.active==y))if(y){if(S=o.activePlugins.findIndex(R=>R.name==w),S>=0)return;h(o.plugins,o.activePlugins,k),k.active=y,o._onPluginActiveChange?.(k)}else{if(S=o.activePlugins.findIndex(R=>R.name==w),S<0)return;k.active=y,o._onPluginActiveChange?.(k),o.activePlugins.splice(S,1)}},this._modifyPlayerData=function(w,y,k,S,R,A){var M=[y,k,S],z;return u.modifyPlayerDataBefore&&([M,z]=u.modifyPlayerDataBefore(w,M[0],M[1],M[2],R,A)),z!==!1&&(o.activePlugins.forEach(it=>{it.modifyPlayerData&&M&&(M=it.modifyPlayerData(w,M[0],M[1],M[2],R,A,z))}),u.modifyPlayerData&&M&&(M=u.modifyPlayerData(w,M[0],M[1],M[2],R,A,z)),u.modifyPlayerDataAfter&&M&&(M=u.modifyPlayerDataAfter(w,M[0],M[1],M[2],R,A,z))),M},q("modifyPlayerData"),this._modifyPlayerPing=function(w,y){var k;return u.modifyPlayerPingBefore&&([y,k]=u.modifyPlayerPingBefore(w,y)),k!==!1&&(o.activePlugins.forEach(S=>{S.modifyPlayerPing&&(y=S.modifyPlayerPing(w,y,k))}),u.modifyPlayerPing&&(y=u.modifyPlayerPing(w,y,k)),u.modifyPlayerPingAfter&&(y=u.modifyPlayerPingAfter(w,y,k))),y},q("modifyPlayerPing"),this._modifyClientPing=function(w){var y;return u.modifyClientPingBefore&&([w,y]=u.modifyClientPingBefore(w)),y!==!1&&(o.activePlugins.forEach(k=>{k.modifyClientPing&&(w=k.modifyClientPing(w,y))}),u.modifyClientPing&&(w=u.modifyClientPing(w,y)),u.modifyClientPingAfter&&(w=u.modifyClientPingAfter(w,y))),w},q("modifyClientPing"),this._modifyFrameNo=function(w){var y;return u.modifyFrameNoBefore&&([w,y]=u.modifyFrameNoBefore(w)),y!==!1&&(o.activePlugins.forEach(k=>{k.modifyFrameNo&&(w=k.modifyFrameNo(w,y))}),u.modifyFrameNo&&(w=u.modifyFrameNo(w,y)),u.modifyFrameNoAfter&&(w=u.modifyFrameNoAfter(w,y))),w},q("modifyFrameNo"),this._onOperationReceived=function(w,y,k,S){var R=u.onBeforeOperationReceived&&u.onBeforeOperationReceived(w,y,k,S),A=R!==!1;return o.activePlugins.forEach(M=>{A&&M.onOperationReceived&&!M.onOperationReceived(w,y,k,S,R)&&(A=!1)}),A&&u.onOperationReceived&&!u.onOperationReceived(w,y,k,S,R)&&(A=!1),A&&u.onAfterOperationReceived&&!u.onAfterOperationReceived(w,y,k,S,R)&&(A=!1),A},f("onBeforeOperationReceived"),f("onOperationReceived"),f("onAfterOperationReceived");var l=function(w,y){o["_on"+w]=function(...k){var S=u["onBefore"+w],R=S&&S(...k);R!==!1&&(o.activePlugins.forEach(A=>{S=A["on"+w],S&&S(...k,R)}),S=u["on"+w],S&&S(...k,R),S=s&&s["on"+w],S&&S(...k,R),S=u["onAfter"+w],S&&S(...k,R))},f("onBefore"+w),f("on"+w),f("onAfter"+w)};w1.forEach(({name:w,metadata:y})=>{l(w,y)})}this.setProperties=function(h){i.isHost&&i.r?.mi.Wl(h)},this.setKickRateLimit=function(h,f,q){var w=Fh.create(h,f,q);i.W(w)!=!1&&i.r?.n._(w)},this.executeEvent=function(h,f){i.W(h,void 0,f)!=!1&&i.r?.n?._(h)},this.clearEvents=function(){var h=i.r?.n?.rr;h&&(h.list.length=0)},this.sendCustomEvent=function(h,f,q){var w=i.r?.n;if(!(!w?.t||q!=null&&!w.t.getPlayer(q)?.nr)){var y=M1.create(h,f);i.W(y,q)!=!1&&(this.isHost?q!=null?i.Fn.then(function(){w.Hn(y,q)}):w.ls(y,0,!0):w.fu&&w._(y))}},this.sendBinaryCustomEvent=function(h,f,q){var w=i.r?.n;if(!(!w?.t||q!=null&&!w.t.getPlayer(q)?.nr)){var y=A1.create(h,f);i.W(y,q)!=!1&&(this.isHost?q!=null?i.Fn.then(function(){w.Hn(y,q)}):w.ls(y,0,!0):w.fu&&w._(y))}},this.setPlayerIdentity=function(h,f,q){var w=i.r?.n;if(!(!w?.t||q!=null&&!w.t.getPlayer(q)?.nr)){var y=j1.create(h,f);i.W(y,q)!=!1&&(this.isHost?q!=null?i.Fn.then(function(){w.Hn(y,q)}):w.ls(y,0,!0):w.fu&&w._(y))}},this.setHandicap=function(h){i.r?.n.Yf(h)},this.setExtrapolation=function(h){o.client.Z.si.setValue("extrapolation",h),i.r?.n.ch(h)},this.clearBan=function(h){i.isHost&&i.r?.n.lu(h)},this.clearBans=function(){i.isHost&&i.r?.n.vu()},this.addPlayerBan=function(h){if(i.isHost){var f=i.r?.n.t.j.filter(q=>q.id==h)[0];if(f)return i.r?.n.cu(f)}},this.addIpBan=function(...h){if(i.isHost)return i.r?.n.wu(...h)},this.addAuthBan=function(...h){if(i.isHost)return i.r?.n.pu(...h)},this.removeBan=function(h){if(i.isHost)return i.r?.n.qu(h)},this.setAvatar=function(h){h=h?.substr(0,2)||"",o.client.Z.si.setValue("avatar",h);var f=Re.create(h);i.W(f)!=!1&&i.r?.n._(f)},this.setPlayerAvatar=function(h,f,q){if(!(!i.isHost&&(q||h!=i.r.n.Bi))){var w=q?N1.create(h,f):Re.create(f);i.W(w,void 0,q?0:h)!=!1&&i.r?.n._(w)}},this.reorderPlayers=function(h,f){var q=P1.create(h,f);i.W(q)!=!1&&i.r?.n._(q)},this.setChatIndicatorActive=function(h){var f=Lh.create(h?0:1);i.W(f)!=!1&&i.r?.n._(f)},this.setTeamColors=function(h,f,...q){var w=Hh.createFromData(h,f,...q);i.W(w)!=!1&&i.r?.n._(w)},this.setUnlimitedPlayerCount=function(h){i.r?.mi.Ql(h)},this.setFakePassword=function(h){i.r?.mi.$l(h)};var c=function(h,f){var q=i.r?.n;if(q){var w=Oe.create(h);i.W(w,f)!=!1&&(f!=null?i.Fn.then(function(){q.Hn(w,f)}):q._(w))}};this.sendChat=function(h,f){if(i.isHost)c(h,f);else{var q=i.r?.n;if(!q)return;var w=Oe.create(h);i.W(w)!=!1&&q._(w)}},this.sendChatIndicator=function(h){i.r?.Xl(h)},this.sendAnnouncement=function(h,f,q,w,y){if(i.isHost){var k=i.r?.n;if(k){w={bold:1,italic:2,small:3,"small-bold":4,"small-italic":5}[w],w==null&&(w=0),q==null&&(q=-1),y==null&&(y=1);var S=p1.create(h,q,w,y);i.W(S,f)!=!1&&(f!=null?i.Fn.then(function(){k.Hn(S,f)}):k._(S))}}},this.setDiscProperties=function(h,f){if(i.isHost){var q=i.r?.n;if(q){var w=Jh.create(h,!1,f);i.W(w)!=!1&&q._(w)}}},this.setPlayerDiscProperties=function(h,f){if(i.isHost){var q=i.r?.n;if(q){var w=Jh.create(h,!0,f);i.W(w)!=!1&&q._(w)}}},this.getKeyState=function(){return i.keyState},this.setKeyState=function(h){o.Ar<0?i.keyState=h:(h&16)>0&&(i.keyState&16)>0&&!o.currentPlayer?.Ci?(i.keyState=h&-17,Ih(()=>{i.keyState=h},o.Ar)):i.keyState=h},this.startGame=function(){i.r?.Yl()},this.stopGame=function(){i.r?.Zl()},this.pauseGame=function(){i.r?.zl()},this.autoTeams=function(){i.r?.xl()},this.lockTeams=function(){i.r?.Dl(!i.roomState?.hr)},this.isGamePaused=function(){return i.roomState?.e?.xt==120},this.resetTeams=function(){Xi.i.forEach((h,f)=>f>0&&i.r?.io(h))},this.startRecording=function(){return i.r?.ro(!0)},this.stopRecording=function(){return i.r?.ro(!1)},this.isRecording=function(){return i.r?.Yr!=null},this.randTeams=function(){i.r?.bl()},this.setSync=function(h){i.r?.n?.t.Fh(h)},this.leave=function(){i.r?.mu()},this.setCurrentStadium=function(h,f){try{i.r?.al(h)}catch(w){var q=w instanceof c1?w.zt:w;q instanceof SyntaxError?f(Bi(_i.StadiumParseSyntaxError,q.lineNumber)):q instanceof v1?f(q.As):f(Bi(_i.StadiumParseUnknownError,q))}},this.setTimeLimit=function(h){i.r?.tv(h)},this.setScoreLimit=function(h){i.r?.iv(h)},this.changeTeam=function(h){i.r?.no(i.r?.n.Bi,Xi.i[h])},this.resetTeam=function(h){i.r?.io(Xi.i[h])},this.setPlayerTeam=function(h,f){i.r?.no(h,Xi.i[f])},this.setPlayerAdmin=function(h,f){var q=Uh.create(h,f);i.W(q)!=!1&&i.r?.n?._(q)},this.kickPlayer=function(h,f,q){var w=Te.create(h,f||"",q);i.W(w)!=!1&&i.r?.n?._(w)},this.fakePlayerJoin=function(h,f,q,w,y,k){var S=m1.create(h,f,q,w,y,k);i.W(S)!=!1&&i.r?.n?._(S)},this.fakePlayerLeave=function(h){var f=i.r?.n.t.getPlayer(h);if(f){var q=Te.create(h,null,!0);return i.W(q)!=!1&&i.r?.n?._(q),{id:f.id,name:f.name,flag:f.Rt,avatar:f.Ct,conn:f.kr,auth:f.Qt}}};function v(h,f){i.W(f,void 0,h)!=!1&&i.r?.n?._(f)}this.fakeSendPlayerInput=function(h,f){v(f,q1.create(h))},this.fakeSendPlayerChat=function(h,f){v(f,Oe.create(h))},this.fakeSetPlayerChatIndicator=function(h,f){v(f,Lh.create(h?0:1))},this.fakeSetPlayerAvatar=function(h,f){v(f,Re.create(h))},this.fakeSetStadium=function(h,f){v(f,k1.create(h))},this.fakeStartGame=function(h){v(h,y1.create())},this.fakeStopGame=function(h){v(h,C1.create())},this.fakeSetGamePaused=function(h,f){v(f,g1.create(h))},this.fakeSetScoreLimit=function(h,f){v(f,Vh.create(0,h))},this.fakeSetTimeLimit=function(h,f){v(f,Vh.create(1,h))},this.fakeSetTeamsLock=function(h,f){v(f,O1.create(h))},this.fakeAutoTeams=function(h){v(h,T1.create())},this.fakeSetPlayerTeam=function(h,f,q){var w=Xi.i[f];w&&v(q,S1.create(h,w))},this.fakeSetKickRateLimit=function(h,f,q,w){v(w,Fh.create(h,f,q))},this.fakeSetTeamColors=function(h,f,q,w){v(w,Hh.createFromData(h,f,...q))},this.fakeSetPlayerAdmin=function(h,f,q){v(q,Uh.create(h,f))},this.fakeKickPlayer=function(h,f,q,w){v(w,Te.create(h,f,q))},this.fakeSetPlayerSync=function(h,f){v(f,R1.create(h))},this.getPlayer=function(h){return i.r?.n.t.j.filter(f=>f.id==h)[0]},this.getBall=function(h=!0){var f=h?i.extrapolatedRoomState?.e:i.roomState?.e;return f?.v.p[0]},this.getDiscs=function(h=!0){var f=h?i.extrapolatedRoomState?.e:i.roomState?.e;return f?.v.p},this.getDisc=function(h,f=!0){var q=f?i.extrapolatedRoomState?.e:i.roomState?.e;return q?.v.p[h]},this.getPlayerDisc=function(h,f=!0){var q=f?i.extrapolatedRoomState?.e:i.roomState?.e,w=q?.v.p,y=i.r?.n?.t?.S.p;if(!(!w||!y)){for(var k=y.length;k<w.length;k++)if(w[k].I==h)return w[k]}},this.getPlayerDisc_exp=function(h){return i.r?.n?.t?.j.filter(f=>f.id==h)[0]?.B},this.takeSnapshot=function(){var h=i.r?.n?.t;if(h)return h.copy()},this.exportStadium=function(){var h=i.r?.n?.t;if(h)return h.exportStadium()},this.createVertex=function(h){var f=i.r?.n?.t;if(f)return f.createVertex(h)},this.createSegment=function(h){var f=i.r?.n?.t;if(f)return f.createSegment(h)},this.createSegmentFromObj=function(h){var f=i.r?.n?.t;if(f)return f.createSegmentFromObj(h)},this.createGoal=function(h){var f=i.r?.n?.t;if(f)return f.createGoal(h)},this.createPlane=function(h){var f=i.r?.n?.t;if(f)return f.createPlane(h)},this.createDisc=function(h){var f=i.r?.n?.t;if(f)return f.createDisc(h)},this.createJoint=function(h){var f=i.r?.n?.t;if(f)return f.createJoint(h)},this.createJointFromObj=function(h){var f=i.r?.n?.t;if(f)return f.createJointFromObj(h)},this.addVertex=function(h){var f=i.r?.n?.t;if(f)return f.addVertex(h)},this.addSegment=function(h){var f=i.r?.n?.t;if(f)return f.addSegment(h)},this.addGoal=function(h){var f=i.r?.n?.t;if(f)return f.addGoal(h)},this.addPlane=function(h){var f=i.r?.n?.t;if(f)return f.addPlane(h)},this.addDisc=function(h){var f=i.r?.n?.t;if(f)return f.addDisc(h)},this.addJoint=function(h){var f=i.r?.n?.t;if(f)return f.addJoint(h)},this.addSpawnPoint=function(h){var f=i.r?.n?.t;if(f)return f.addSpawnPoint(h)},this.addPlayer=function(h){var f=i.r?.n?.t;if(f)return f.addPlayer(h)},this.findVertexIndicesOfSegmentObj=function(h){var f=i.r?.n?.t;if(f)return f.findVertexIndicesOfSegmentObj(h)},this.findVertexIndicesOfSegment=function(h){var f=i.r?.n?.t;if(f)return f.findVertexIndicesOfSegment(h)},this.updateVertex=function(h,f){var q=i.r?.n?.t;if(q)return q.updateVertex(h,f)},this.updateSegment=function(h,f){var q=i.r?.n?.t;if(q)return q.updateSegment(h,f)},this.updateGoal=function(h,f){var q=i.r?.n?.t;if(q)return q.updateGoal(h,f)},this.updatePlane=function(h,f){var q=i.r?.n?.t;if(q)return q.updatePlane(h,f)},this.updateDisc=function(h,f){var q=i.r?.n?.t;if(q)return q.updateDisc(h,f)},this.updateDiscObj=function(h,f){var q=i.r?.n?.t;if(q)return q.updateDiscObj(h,f)},this.updateJoint=function(h,f){var q=i.r?.n?.t;if(q)return q.updateJoint(h,f)},this.updateSpawnPoint=function(h,f,q){var w=i.r?.n?.t;if(w)return w.updateSpawnPoint(h,f,q)},this.updatePlayer=function(h,f){var q=i.r?.n?.t;if(q)return q.updatePlayer(h,f)},this.removeVertex=function(h){var f=i.r?.n?.t;if(f)return f.removeVertex(h)},this.removeSegment=function(h){var f=i.r?.n?.t;if(f)return f.removeSegment(h)},this.removeGoal=function(h){var f=i.r?.n?.t;if(f)return f.removeGoal(h)},this.removePlane=function(h){var f=i.r?.n?.t;if(f)return f.removePlane(h)},this.removeDisc=function(h){var f=i.r?.n?.t;if(f)return f.removeDisc(h)},this.removeJoint=function(h){var f=i.r?.n?.t;if(f)return f.removeJoint(h)},this.removeSpawnPoint=function(h,f){var q=i.r?.n?.t;if(q)return q.removeSpawnPoint(h,f)},this.removePlayer=function(h){var f=i.r?.n?.t;if(f)return f.removePlayer(h)},this.updateStadiumPlayerPhysics=function(h){var f=i.r?.n?.t;if(f)return f.updateStadiumPlayerPhysics(h)},this.updateStadiumBg=function(h){var f=i.r?.n?.t;if(f)return f.updateStadiumBg(h)},this.updateStadiumGeneral=function(h){var f=i.r?.n?.t;if(f)return f.updateStadiumGeneral(h)},this.updatePlugin=function(h,f){var q=o.plugins[h];if(!q)throw Bi(_i.PluginNotFoundError,h);var{name:w,active:y}=q;if(w!=f.name)throw Bi(_i.PluginNameChangeNotAllowedError);y&&o.setPluginActive(w,!1),q.finalize?.(),q.room=null,o.plugins[h]=f,o.pluginsMap[w]=f,f.room=o,f.initialize?.(),o._onPluginUpdate?.(q,f),y&&(f.active=!1,o.setPluginActive(w,!0))},this.updateLibrary=function(h,f){var q=o.libraries[h];if(!q)throw Bi(_i.LibraryNotFoundError,h);var{name:w}=q;if(w!=f.name)throw Bi(_i.LibraryNameChangeNotAllowedError);q.finalize?.(),q.room=null,o.libraries[h]=f,o.librariesMap[w]=f,f.room=o,f.initialize?.(),o._onLibraryUpdate?.(q,f)},t?.(this),i.to&&(this.libraries.forEach(h=>{h.room=o,h.initialize?.()}),u.room=o,u.initialize?.(),s&&(s.room=o,s.initialize?.()),this.plugins.forEach(h=>{h.room=o,h.initialize?.()}),this.activePlugins.forEach(h=>{o._onPluginActiveChange?.(h)})),this.startStreaming=({immediate:h=!0,onClientCount:f,emitData:q})=>{var w=i.r?.n;if(!(!i.isHost||o.isRecording()||!w||w.ni)){var y=new Map,k=Se.U(16384),S=0;return{onSuccess:()=>{w.ni=function(R){if(h){k.f(2),k.gt(w.k),k.Vt(R.i),Gh.Cr(R,k),q?.(k._t()),k.l=0;return}var A=y.get(w.k);A||(A=[],y.set(w.k,A)),A.push(R)}},onDataReceived:R=>{R=new DataView(R.buffer,R.byteOffset,R.byteLength);var A=R.getUint8(0),M=R.getUint16(1);switch(A){case 0:{S=M,f?.(M);break}case 1:{A=Se.U(),A.f(1),A.Vt(M),M=Se.U(),i.r.n.rv(M),A.Xt(dh.deflateRaw(M._t())),q?.(A._t());break}}},interval:()=>{for(var R=y.keys(),A=R.next(),M=w.k;!A.done;){var z=A.value,it=y.get(z);k.Vt(M-z),k.Vt(it.length),it.forEach(nt=>{k.Vt(nt.i),Gh.Cr(nt,k)}),A=R.next()}y.clear();var ot=k._t();if(k.l=0,S!=0){ot=dh.deflateRaw(ot);var J=new Uint8Array(ot.byteLength+5),d=new DataView(J.buffer,J.byteOffset,J.byteLength);d.setUint8(0,0),d.setUint32(1,M),J.set(ot,5),q?.(J)}}}}},this.stopStreaming=()=>{var h=i.r?.n;!i.isHost||o.isRecording()||!h?.ni||(h.ni=null)}}Kh.B5=E1});var Ne=T((Y2,un)=>{var{backend:Wh,yi:_1,cr:B1,Ns:I1,E:d1}=P(),{parseGeo:G1}=$i();function L1(t,i){return(Wh.secure?"https":"http")+"://"+Wh.hostname+"/play?c="+t+(i?"&p=1":"")}function V1(t){var i=t?.si;!i&&(i=t.si={}),i.setValue=(s,u)=>{i[s]=u,i.onValueSet?.(s,u)};var r=i.crappy_router||!1;r!=i.crappy_router&&i.setValue("crappy_router",r),r=i.extrapolation||0,r!=i.extrapolation&&i.setValue("extrapolation",r),r=i.fps_limit||1,r!=i.fps_limit&&i.setValue("fps_limit",r),r=i.player_name||"abc",r!=i.player_name&&i.setValue("player_name",r),r=i.avatar||null,r!=i.avatar&&i.setValue("avatar",r);var n={lat:40,lon:40,flag:"tr"};if(!i.geo)i.setValue("geo",n);else{var e=i.geo;r=G1(e,n),(e.lat!=r.lat||e.lon!=r.lon||e.flag!=r.flag)&&i.setValue("geo",r)}}function U1(t){var i=t.Z={customClientIds:new Set,r:null,extrapolatedRoomState:null,roomState:null,Ec:null,isHost:!1,createRoom:null,Fn:Promise.resolve(),keyState:0,renderer:t.renderer,si:t.si,to:!t.eo,onOperationReceived:function(r,n,e){var s=t.room._onOperationReceived;if(!s)return!0;var u=r.eventType;return u==null?!0:s(u,r,n,e)},W:function(r,n,e){if(i.isHost)return r.i=e||0,r.xe=n,i.onOperationReceived(r,i.r?.n.k,null)}};return t.Z=i,i}function Qh(){this.Ft=9,this.yi=null,this.cr=null,this.eo=!1,this.Ar=-1,this.renderer=null,this.config={},this.libraries=[],this.plugins=[],this.yu=null,this.Cu=null,this.gu=null,this.ku=null,this.so=null,this.uo=null,this.vs=null,this.Jn=null,this.Ae=null,this.si=null}function F1(t){var i=new Qh;return i.Ft=t.version==null?I1:t.version,i.yi=t.proxyAgent||_1,i.cr=t.identityToken||B1,i.eo=t.noPluginMechanism,i.Ar=t.kickTimeout||-1,i.renderer=t.renderer,i.config=t.config||{},i.libraries=t.libraries||[],i.plugins=t.plugins||[],i.yu=t.preInit,i.Cu=t.onSuccess,i.gu=t.onFailure,i.ku=t.onLeave,i.so=t.onConnectionStateChange,i.uo=t.onReverseConnection,i.vs=t.onRequestRecaptcha,i.Jn=t.cancel,i.Ae=t.useRecaptchaToken,i.si=t.storage,V1(i),i}d1(Qh,["version","proxyAgent","identityToken","noPluginMechanism","kickTimeout","renderer","config","libraries","plugins","preInit","onSuccess","onFailure","onLeave","onConnectionStateChange","onReverseConnection","onRequestRecaptcha","cancel","useRecaptchaToken","storage"],[]);un.B5=un.nv||(un.nv={roomLink:L1,ho:U1,oo:F1})});var je=T((Z2,hn)=>{var{setTimeout:H1,clearTimeout:Yh,console:Me,performance:Ae}=P(),{q:J1}=$(),$h=Q(),{$u:Xh}=gi(),K1=t=>(Me.warn(Xh($h.NoProxyIdentityProblem)||"NoProxyIdentityProblem"),t=Xh($h.NoProxyIdentitySolution),t&&Me.warn(t));function Zh(t){this.ev=1e4,this.Zr=!0;var i=this;t.fo(),this.Pt=t.Pt,this.jr=t.jr,this.je=t.je,this.zr=t.zr,this.lo=Ae.now();var r=null;r=function(){var s=i.ev-i.sv();0>=s?i.et():(Yh(i.vo),s=H1(r,s+1e3),i.vo=s)},r(),this.Pt.oniceconnectionstatechange=function(){var s=i.Pt.iceConnectionState;s!="closed"&&s!="failed"||i.et()},t=0;for(var n=this.jr;t<n.length;){var e=n[t];++t,e.onmessage=function(s){i.Zr&&(i.lo=Ae.now(),i.cs!=null&&i.cs(s.data))},e.onclose=function(){i.et()}}}Zh.prototype={sv:function(){return Ae.now()-this.lo},vi:function(t,i){if(this.Zr){var r=this.jr[t];if(r.readyState=="open"){var n=i.Je();try{r.send(n)}catch(e){Me.log(e instanceof J1?e.zt:e)}}}},et:function(){Yh(this.vo),this.Zr&&(this.Zr=!1,this.Pt.close(),this.Ee!=null&&this.Ee())}};hn.B5=hn.uv||(hn.uv={co:[{name:"ro",reliable:!0,Su:!0},{name:"ru",reliable:!0,Su:!1},{name:"uu",reliable:!1,Su:!1}],wo:K1,po:Zh})});var Ee=T((z2,Dh)=>{var{setTimeout:zh,clearTimeout:xh,console:W1,RTCPeerConnection:Q1,E:$1}=P(),{bu:X1}=j();function Yi(t,i,r){this.Kn=null,this.zr=null,this.je=[],this.qo=0,this.mo=!1,this.ws=[],this.jr=[],this.Pt=i&&new Q1({iceServers:i},Yi.hv);var n=this;if(this.Ou=new Promise(function(e){n.ov=e}),this.id=t,i)for(this.Pt.onicecandidate=function(e){e.candidate==null?n.ov(n.ws):(e=e.candidate,e.candidate!=null&&e.candidate!=""&&(n.ps!=null&&n.ps(e),n.ws.push(e)))},i=0;i<r.length;)this.fv(r[i++])}Yi.hv={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};Yi.prototype={Tu:function(t){t==null&&(t=1e4),xh(this.Kn),this.Kn=zh(this.lv.bind(this),t)},vv:function(t,i){var r=this;this.yo(this.Pt.setRemoteDescription(t).then(function(){return r.Pt.createAnswer()}),i,500)},cv:function(){this.yo(this.Pt.createOffer(),[],1e3)},yo:function(t,i,r){var n=this;t.then(function(e){return n.Pt.setLocalDescription(e).then(function(){return e})}).then(function(e){function s(){return e}for(var u=0;u<i.length;)n.Co(i[u++]);return X1(n.Ou,r).then(s,s)}).then(function(e){n.Ru(e)}).catch(function(e){W1.log(e),n.qs()})},fv:function(t){var i=this,r={id:this.jr.length,negotiated:!0,ordered:t.Su};t.reliable||(r.maxRetransmits=0),t=this.Pt.createDataChannel(t.name,r),t.binaryType="arraybuffer",t.onopen=function(){for(var n=0,e=i.jr;n<e.length;)if(e[n++].readyState!="open")return;i.xr!=null&&i.xr()},t.onclose=function(){i.qs()},t.onmessage=function(){i.qs()},this.jr.push(t)},Co:function(t){var i=this;zh(function(){return i.Pt.addIceCandidate(t)},this.qo)},lv:function(){this.qs()},qs:function(){this.Er!=null&&this.Er(),this.et()},et:function(){this.fo(),this.Pt.close()},fo:function(){xh(this.Kn),this.Ru=this.xr=this.ps=this.Er=null,this.Pt.onicecandidate=null,this.Pt.ondatachannel=null,this.Pt.onsignalingstatechange=null,this.Pt.oniceconnectionstatechange=null;for(var t=0,i=this.jr;t<i.length;){var r=i[t];++t,r.onopen=null,r.onclose=null,r.onmessage=null}}};$1(Yi,[null,null,null,null,null,null,null,null,null,"id"],[]);Dh.B5=Yi});var ah=T((x2,bh)=>{var{E:_e}=P(),{au:Y1}=wi(),ct=gn(),{ipToNumber:kt,numberToIp:Z1,compareBits:z1}=$i(),on=340282366920938463463374607431768211455n;function Zi(){this.ipv6=!1,this.value=null,this.mask=null}Zi.create=function(t,i){if(t==null)return;let r=new Zi,n=t.__proto__.constructor.name;return r.ipv6=n=="BigInt",r.value=t,r.mask=n!=i?.__proto__.constructor.name?r.ipv6?on:-1:i,r};function li(){this.id=null,this.type=null,this.value=null}li.create=function(t,i,r){var n=new li;return n.id=t,n.type=i,n.value=r,n};li.prototype={ms:function(){var t=new li;return t.id=this.id,t.type=this.type,t.value=this.value.ms?this.value.ms():this.value,t}};function Ii(){this._e=null,this.Pu=null,this.ips=null,this.Qt=null}Ii.create=function(t,i,r,n){var e=new Ii;return e._e=t,e.Pu=i,e.ips=r,e.Qt=n,e};Ii.prototype={ms:function(){var t=new Ii;return t._e=this._e,t.Pu=this.Pu,t.ips=this.ips,t.Qt=this.Qt,t}};function x1(t){var i=[],r=1,n=new Set,e=[];this.addPlayer=o=>{var l=t.Jr.get(o?.id)?.st;if(!(!l||i.findIndex(v=>v.type==ct.Player&&v.value._e==o.id)>-1)){var c=[];return l.zr&&c.push(Y1(l.zr)),l.je.forEach(v=>{c.includes(v)||c.push(v)}),c.forEach(v=>{var p=kt(v);p&&e.push(Zi.create(p))}),n.add(o.Qt),i.push(li.create(r,ct.Player,Ii.create(o.id,o.name,c,o.Qt))),r++}},this.addIp=(...o)=>o.map(l=>{var c=typeof l;if(c=="string")l={ip:l};else if(c!="object")return;var v=kt(l.ip);if(v==null)return;let p=v.__proto__.constructor.name=="BigInt";var C=kt(l.mask);v.__proto__.constructor.name!=C?.__proto__.constructor.name&&(C=p?on:-1,l.mask=Z1(C));for(var m=0;m<i.length;m++){let h=i[m];if(h.type==ct.IP&&v==kt(h.value.ip)&&C==kt(h.value.mask))return}return e.push(Zi.create(v,C)),i.push(li.create(r,ct.IP,l)),r++}),this.addAuth=(...o)=>o.map(l=>{if(!n.has(l))return i.push(li.create(r,ct.Auth,l)),n.add(l),r++}),this.checkIp=o=>{let l=kt(o);if(l==null)return!1;let c=l.__proto__.constructor.name=="BigInt";for(var v=0;v<e.length;v++){let p=e[v];if(c==p.ipv6&&z1(l,p.value,p.mask))return!0}return!1},this.checkAuth=o=>n.has(o);let s=(o,l)=>{let c=kt(o);if(c==null)return;let v=c.__proto__.constructor.name=="BigInt";var p=kt(l);p==null&&(p=v?on:-1);let C=p==(v?on:-1);for(var m=[],h=0;h<e.length;h++){let f=e[h];v==f.ipv6&&c==f.value&&p==f.mask&&m.push(h)}for(;m.length>0;)e.splice(m.pop(),1);for(m.length=0,i.forEach((f,q)=>{C&&f.type==ct.Player&&f.value.ips.findIndex(w=>kt(w)==c)>-1?(f.type=ct.Auth,f.value=f.value.Qt):f.type==ct.IP&&c==kt(f.value.ip)&&p==kt(f.value.mask)&&m.push(q)});m.length>0;)i.splice(m.pop(),1)},u=o=>{n.delete(o);var l=[],c=[];for(i.forEach((v,p)=>{v.type==ct.Player&&o==v.value.Qt?(c.splice(c.length,0,...v.value.ips),l.push(p)):v.type==ct.Auth&&o==v.value&&l.push(p)});l.length>0;)i.splice(l.pop(),1);this.addIp(...c)};this.remove=o=>{var l=i.findIndex(p=>p.id==o);if(l<0)return!1;var{type:c,value:v}=i.splice(l,1)[0];switch(c){case ct.Player:v.ips.forEach(p=>{s(p)}),u(v.Qt);break;case ct.IP:s(v.ip,v.mask);break;case ct.Auth:u(v);break}return!0},this.removePlayer=o=>{var l=i.findIndex(v=>v.type==0&&v.value?._e==o);if(l<0)return!1;var{value:c}=i.splice(l,1)[0];return c.ips.forEach(v=>{s(v)}),u(c.Qt),!0},this.clear=()=>{n.clear(),e.length=0,i.length=0},this.getList=()=>i.map(o=>o.ms())}_e(Zi,["ipv6","value","mask"],[]);_e(li,["id","type","value"],[]);_e(Ii,["pId","pName","ips","auth"],[]);bh.B5=x1});var vo=T((b2,lo)=>{var uo=Q(),{proxy:zi,backend:to,cr:D2,setTimeout:xi,clearTimeout:fn,setInterval:D1,clearInterval:io,console:b1,WebSocket:ro,performance:vn,pako:cn,RTCIceCandidate:no,RTCSessionDescription:a1,E:Be}=P(),{Event:ln}=B(),{Ht:ho,q:ht}=$(),{th:tw,J:iw}=wi(),{co:rw,wo:nw,po:ew}=je(),sw=Ee(),oo=Ri(),uw=ah(),{D:eo,F:di,w:tt,gt:fo,extend:hw}=j(),so=rn(),ow=ke(),{CheckConsistencyEvent:fw,SetStadiumEvent:lw,CustomEvent:vw,BinaryCustomEvent:cw,IdentityEvent:ww}=oi();function Gi(t,i,r,n,e){this.haxball=t,this.hu=!1,this.Wn=!1,this.ys=!1,this.lr=null,this.id="",this.wv=5e4,this.ah=1e4,this.Dr=new Map,this.pv=i,this.qv=r,this.mv=n,this.Pe=e||"",i&&this.os()}Gi.go=function(t){try{if(t=t.candidate.split(" "),t[6]!="typ")throw new ht(null);if(t[7]=="srflx")return t[4]}catch{}return null};Gi.prototype={et:function(){if(fn(this.uu),fn(this.Qn),this.Qn=null,io(this.ko),this.$!=null)try{this.$.onmessage=null,this.$.onerror=null,this.$.onclose=null,this.$.onopen=null,this.$.close(),this.$=null}catch{}this.So()},Nu:function(t){var i=this;if(this.lr!=null||t!=null){if(this.lr!=null&&t!=null&&this.lr.byteLength==t.byteLength){for(var r=new Uint8Array(this.lr),n=new Uint8Array(t),e=!1,s=0,u=this.lr.byteLength;s<u;){var o=s++;if(r[o]!=n[o]){e=!0;break}}if(!e)return}this.lr=t.slice(0),this.ys=!0,this.$!=null&&this.$.readyState==1&&this.Qn==null&&(this.Mu(),this.Qn=xi(function(){i.Qn=null,i.$.readyState==1&&i.ys&&i.Mu()},1e4))}},ou:function(t){function i(){r.$!=null&&r.$.readyState==1&&r.Wn!=r.hu&&r.Oo(),r.To=null}var r=this;this.Wn=t,this.To==null&&(i(),this.To=xi(i,1e3))},os:function(t){function i(e){if(e=e.sitekey,e==null)throw new ht(null);if(n.haxball.Ae=s=>{n.haxball.Ae=null,n.os(s)},!n.haxball.vs)throw ho(uo.MissingRecaptchaCallbackError);n.haxball.vs(e)}function r(e){var s=e.url;if(s==null)throw new ht(null);if(e=e.token,e==null)throw new ht(null);zi?.WebSocketUrl&&(s=zi?.WebSocketUrl),!s.endsWith("host")&&(!s.endsWith("/")&&(s+="/"),s+="host");var u=n.haxball.cr;!zi&&u&&(nw(),u=null);var o=u?[u]:[];if(n.haxball.yi||zi?.WebSocketChangeOriginAllowed){var l={};n.haxball.yi&&(l.agent=n.haxball.yi),zi.WebSocketChangeOriginAllowed&&(l.headers={Origin:(to.secure?"https":"http")+"://"+to.hostname}),n.$=new ro(s+"?token="+e,o,l)}else n.$=new ro(s+"?token="+e,o);n.$.binaryType="arraybuffer",n.$.onopen=function(){n.yv()},n.$.onclose=function(c){n.hs(c.code!=4001)},n.$.onerror=function(){n.hs(!0)},n.$.onmessage=n.Au.bind(n)}var n=this;so.Bl(this.pv,"token="+(t||this.Pe)+"&rcr=",so.jl).then(function(e){switch(e.action){case"connect":n.haxball.Ae=null,r(e);break;case"recaptcha":i(e)}}).catch(function(e){b1.log(e instanceof ht?e.zt:e),n.haxball.Ae=null,n.hs(!0)})},yv:function(){var t=this;this.lr!=null&&this.Mu(),this.Wn!=0&&this.Oo(),this.ko=D1(function(){t.ju()},4e4)},Au:function(t){switch(t=new di(new DataView(t.data),!1),t.T()){case 1:this.Eu(t);break;case 4:this._u(t);break;case 5:this.Cv(t);break;case 6:this.gv(t);break;case 111:this.kv(t);break}},kv:function(t,i){xi(()=>{try{this.haxball.room?.setPlayerIdentity?.(t.ht(),t.zn())}catch{i&&this.$n(i,4111)}},3e3)},Eu:function(t){var i=t.ht(),r=tw(t.Lt(t.T())),n,e,s;try{t=new di(new DataView(cn.inflateRaw(t.Lt()).buffer),!1),n=t.T()!=0,e=t.ci();for(var u=t.zn(),o=[],l=0;l<u.length;)o.push(new no(u[l++]));s=o}catch{this.$n(i,0);return}this.Sv(i,r,e,s,t,n)},Sv:function(t,i,r,n,e,s){var u=this;if(16<=this.Dr.size)this.$n(t,4104);else if(this.banList.checkIp(i))this.$n(t,4102);else{for(var o=[],l=0;l<n.length;){var c=Gi.go(n[l++]);if(c!=null){if(this.banList.checkIp(c)){this.$n(t,4102);return}o.push(c)}}if(this.Ro!=null&&(l=new di(e.c),l.l=e.l,e=this.Ro(l),e!=null)){this.$n(t,e);return}var v=new sw(t,this.qv,this.mv);for(s&&(v.qo=2500),v.je=o,v.zr="",l=0;l<i.length;l++)v.zr+=iw.Gs(i.charCodeAt(l));this.Dr.set(t,v),v.Er=function(){u.vr(0,v,null),u.Dr.delete(v.id)},v.xr=function(){u.Dr.delete(v.id),u.vr(0,v,null),u.Po!=null&&u.Po(new ew(v))},v.Ru=function(p){u.Bu(v,p,v.ws,null),v.Ou.then(function(){u.vr(0,v,null)}),v.ps=function(C){u.Iu(v,C)}},v.Tu(),v.vv(new a1({sdp:r,type:"offer"}),n)}},_u:function(t){var i=t.ht(),r;try{t=new di(new DataView(cn.inflateRaw(t.Lt()).buffer),!1),r=new no(t.zn())}catch{return}this.Ov(i,r)},Ov:function(t,i){var r=this.Dr.get(t);if(r!=null){var n=Gi.go(i);if(n!=null&&(r.je.push(n),this.banList.checkIp(n)))return;r.Co(i)}},Cv:function(t){this.id=t.rn(t.T()),this.Cs!=null&&this.Cs(this.id)},gv:function(t){this.Pe=t.rn(t.c.byteLength-t.l)},vr:function(t,i,r){if(!i.mo){t==0&&(i.mo=!0),i=i.id;var n=tt.U(32,!1);n.f(t),n.gt(i),r!=null&&n.Xt(cn.deflateRaw(r._t())),this.$.send(n._r())}},$n:function(t,i){var r=tt.U(16,!1);r.f(0),r.gt(t),r.Vt(i),this.$.send(r._r())},ju:function(){var t=tt.U(1,!1);t.f(8),this.$.send(t._r())},Mu:function(){this.ys=!1;var t=tt.U(256,!1);t.f(7),this.lr!=null&&t.Ke(this.lr),this.$.send(t._r())},Oo:function(){var t=tt.U(2,!1);t.f(this.haxball.Ft),t.f(this.Wn?1:0),this.$.send(t._r()),this.hu=this.Wn,this.haxball.room._onRoomRecaptchaModeChange?.(this.Wn)},Bu:function(t,i,r,n){var e=tt.U(32,!1);e.wi(i.sdp),e.We(r),n!=null&&e.Xt(n._t()),this.vr(1,t,e)},Iu:function(t,i){var r=tt.U(32,!1);r.We(i),this.vr(4,t,r)},So:function(){for(var t=this.Dr.values(),i=t.next(),r;!i.done;)r=i.value,i=t.next(),r.et();this.Dr.clear()},hs:function(t){var i=this;this.So(),fn(this.Qn),this.Qn=null,this.ys=!1,io(this.ko),fn(this.uu),t&&(this.uu=xi(function(){i.os()},this.ah+Math.random()*this.wv|0))}};function Ie(t){this.No=new Map,this.Tv=new fo(100,16),this.Be=!1,this.fn=0,this.st=t,t=tt.U(8),t.C(Math.random()),this.Ie=t._t()}Ie.prototype={vi:function(t,i){i==null&&(i=0),this.st.vi(i,t)}};function de(t,i){this.haxball=t,this.at=null,this.Ln=32,this.Jr=new Map,this.bt=[],this.gs=4,this.Rv=600;var r=this;oo.call(this,i?.state),this.Pv=i?.du,this.Nv=i?.Ft,this.Mv=1,this.Mo=0,this.Bi=0,this.Un=!1,this.fs=!0,this.Me=null,this.Vn=null,this.$r=vn.now(),this.Gt=i&&new Gi(t,this.Pv,i.iceServers,rw,i.Gu),i&&(this.Gt.banList=new uw(this),this.Gt.Ro=this.Av.bind(this),this.Gt.Po=function(n){r.jv(n)},this.Gt.Cs=function(n){r.Cs?.(n)})}de.prototype=hw(oo.prototype,{et:function(){this.Gt.et();for(var t=0,i=this.bt;t<i.length;){var r=i[t++].st;r.Ee=null,r.cs=null,r.et()}},Ev:function(t,i,r,n){var e=this.Jr.get(t.id);e!=null&&(n&&this.Gt.banList.addPlayer(t),t=tt.U(),t.f(5),t.f(n?1:0),t.wi(i),r==null&&(r=""),t.wi(r),e.vi(t),e.st.et())},vu:function(){this.Gt.banList.clear()&&this.haxball.room._onBansClear?.()},lu:function(t){this.Gt.banList.removePlayer(t)&&this.haxball.room._onBanClear?.(t)},cu:function(t){return this.Gt.banList.addPlayer(t)},wu:function(...t){return this.Gt.banList.addIp(...t)},pu:function(...t){return this.Gt.banList.addAuth(...t)},qu:function(t){return this.Gt.banList.remove(t)},Nu:function(t){this.Gt.Nu(t)},ou:function(t){this.Gt.ou(t)},_:function(t){var i=this.k+this.gs+this.gi;t.en.lt||(i=this.k),t.St=i,this.re(t),this.ks(),0<this.bt.length&&this.de(this.Ss(t),1)},ls:function(t,i,r){t.i=i;var n;r?(t.apply(this.t),this._v(t,1)):0<this.bt.length&&(n=this.k+this.gs+this.gi,t.en.lt||(n=this.k),t.St=n,this.re(t),this.ks(),this.de(this.Ss(t),1))},Hn:function(t,i,r){if(i==0){t.apply(this.t);return}var n=this.Jr.get(i);if(n!=null){!r&&(t.i=0);var e=tt.U();e.f(6),ln.Cr(t,e),n.vi(e,0)}},vt:function(){var t=((vn.now()-this.$r)*this.Ji|0)-this.k;t>0&&this.lh(t),this.k-this.Ao>=7&&this.ks(),this.k-this.Mo>=this.Rv&&(this.ks(),this.Bv())},gr:function(){return this.gi<0&&(this.gi=0),this.vh((vn.now()-this.$r)*this.Ji-this.k+this.gs+this.gi+this.Qs)},Av:function(t){if(!this.Un&&this.bt.length>=this.Ln)return 4100;try{if(t.Mt()!=this.Nv)throw new ht(null)}catch{return 4103}try{var i=t.oi();if(this.at!=null&&i!=this.at)throw new ht(null)}catch{return 4101}},jv:function(t){var i=this;if(!this.Un&&this.bt.length>=this.Ln)t.et();else{var r=new Ie(t);this.bt.push(r),t.cs=function(n){n=new di(new DataView(n)),i.Iv(n,r)},t.Ee=function(){eo.remove(i.bt,r),i.Jr.delete(r.id),i.dv?.(r.id)},t=tt.U(1+r.Ie.byteLength),t.f(0),t.Ut(r.Ie.byteLength),t.Xt(r.Ie),r.vi(t)}},Ss:function(t){var i=tt.U();return i.f(2),this.Lu(t,i),i},Lu:function(t,i){i.gt(t.St),i.Ut(t.V),i.Vt(t.i),i.gt(t.Gr),ln.Cr(t,i)},ks:function(){if(!(0>=this.k-this.Ao)&&this.bt.length!=0){var t=tt.U();t.f(3),t.gt(this.k),t.gt(this.Lr),this.de(t,2),this.Ao=this.k}},de:function(t,i){i==null&&(i=0);for(var r=0,n=this.bt;r<n.length;){var e=n[r];++r,e.Be&&e.vi(t,i)}},_v:function(t,i){i==null&&(i=0);var r=tt.U();r.f(6),ln.Cr(t,r);for(var n=0,e=this.bt;n<e.length;){var s=e[n];++n,s.Be&&this.haxball.Z.customClientIds.has(s.id)&&s.vi(r,0)}},Gv:function(t){var i=tt.U();i.f(1);var r=tt.U();r.Vt(t.id),r.gt(this.k),r.gt(this.Lr),r.Ut(this.ri),this.t.Y(r);for(var n=this.rr.list,e=0,s=n.length;e<s;)this.Lu(n[e++],r);i.Xt(cn.deflateRaw(r._t())),t.vi(i)},rv:function(t){t.gt(this.k),t.gt(this.Lr),t.Ut(this.ri),this.t.Y(t);var i=this;this.rr.list.forEach(r=>{i.Lu(r,t)})},Lv:function(t){xi(()=>{this.t.j.forEach(i=>{i.zs&&this.haxball.room?.setPlayerIdentity(i.id,i.zs,t.id)})},3e3)},Bv:function(){if(this.Mo=this.k,this.bt.length!=0){var t=fw.create(this.t.Ol());t.St=this.k,t.V=this.ri++,t.i=0,this.de(this.Ss(t))}},Vv:function(t,i){var r=this,n=t.Lt(t.Jt()),e=t.Lt(t.Jt()),s=i.Ie;i.Ie=null,ow.Vl(n,s).catch(function(){return null}).then(function(u){try{if(r.Gt.banList.checkAuth(u))throw new ht(ho(uo.AuthBannedError,u));if(r.bt.indexOf(i)!=-1){i._c=u;var o=r.Mv++;i.id=o,r.Jr.set(o,i),r.Uv?.(o,new di(new DataView(e.buffer,e.byteOffset,e.byteLength),!1),i.st.zr,u),i.Be=!0,r.Gv(i),r.Lv(i)}}catch(l){r.jo(i,l instanceof ht?l.zt:l)}})},Iv:function(t,i){this.vt();try{if(!i.Tv.xu())throw new ht(1);var r=t.T();if(i.Be)switch(r){case 1:this.Fv(t,i);break;case 2:this.Hv(t,i);break;default:throw new ht(0)}else if(r==0)this.Vv(t,i);else throw new ht(0);if(0<t.c.byteLength-t.l)throw new ht(2)}catch(n){this.jo(i,n instanceof ht?n.zt:n)}},jo:function(t,i){this.haxball.onHostError?.(i,t.id),this.Jr.delete(t.id),eo.remove(this.bt,t),t.Be&&this.Eo!=null&&this.Eo(t.id),t.st.et()},Hv:function(t,i){var r=t.g(),n=this.haxball.room._modifyPlayerPing;n&&(i.fn=n(i.id,t.Jt()));var e=tt.U();e.f(4),e.C((vn.now()-this.$r)*this.Ji+this.gs),e.C(r),i.vi(e,2)},Fv:function(t,i){var r=t.ht(),n=t.ht(),e=ln.ir(t),s=e.en.Xs;if(s!=null){var u=i.No.get(s);if(u==null&&(u=new fo(s.Ys,s.Zs),i.No.set(s,u)),!u.xu())throw new ht(3)}if(e.i=i.id,s=this.k,u=this.k+120,e.Gr=n,e.St=r<s?s:r>u?u:r,!(e.__proto__.rt==lw&&e.S.p.length==0)&&this.haxball.Z.onOperationReceived(e,this.k,r)){if(e.__proto__.rt==vw||e.__proto__.rt==cw||e.__proto__.rt==ww){this.haxball.Z.r?.n.ls(e,e.i,!0);return}e.fh(this.t)&&(this.re(e),this.de(this.Ss(e),1))}}});Be(de,[null,"password",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[]);Be(Gi,[null,null,null,null,null,"id",null,null,null,null,null,null,null],[]);Be(Ie,[null,null,null,"ping",null,null],[]);lo.B5=de});var Ge=T((a2,Co)=>{var{clearTimeout:pw,setInterval:qw,clearInterval:mw,requestAnimationFrame:po,cancelAnimationFrame:yw,performance:qo,E:Cw}=P(),zt=ft(),{SendChatIndicatorEvent:mo,SendInputEvent:co,StartGameEvent:gw,StopGameEvent:kw,PauseResumeGameEvent:Sw,SetGamePropertyEvent:wo,SetStadiumEvent:Ow,SetPlayerTeamEvent:Li,SetTeamsLockEvent:Tw,AutoTeamsEvent:Rw,SetPlayerSyncEvent:Pw}=oi(),{bt:Nw}=qe();function Mw(t){this.n=t}function yo(t){this.Os=0,this.Jv=0,this.internalData=t?.Z}yo.prototype={vt:function(){var t=this.internalData.keyState;this.Ts!=null&&t!=this.Os&&(this.Os=t,this.Ts(co.create(t)))},Kv:function(){this.Ts!=null&&this.Os!=0&&(this.Os=this.Jv=0,this.Ts(co.create(0)))}};function Di(t,i){this.haxball=t,this.Wv=null,this._o=!1,this.Bo=qo.now(),this.Yr=null,this.Vu=0,this.Tt=new yo(t),this.Xr="Waiting for link",this.Io=!1;var r=this;if(this.mi=new Mw(i),this.n=i,!!i){i.t.Vr=e=>{t.room._onPlayerInputChange?.(e.id,e.Tt)},i.t.oe=e=>{t.room._onPlayerJoin?.(e)},i.t.An=e=>{t.room._onPlayerBallKick?.(e?.id)},i.t.En=e=>{t.room._onTeamGoal?.(e?.id)},i.t.In=e=>{t.room._onGameEnd?.(e.id)},i.t.ve=(e,s,u)=>{!u&&t.room._onGamePauseChange?.(s,e?.id)},i.t.dn=function(e){t.room._onGameStart?.(e?.id)},i.t.Ce=()=>{t.room._onGameTick?.()},i.t.jn=()=>{t.room._onKickOff?.()},i.t.Dn=(e,s,u,o)=>{t.room._onCollisionDiscVsDisc?.(e,s.I,u,o.I)},i.t.bn=(e,s,u)=>{t.room._onCollisionDiscVsPlane?.(e,s.I,u)},i.t.an=(e,s,u)=>{t.room._onCollisionDiscVsSegment?.(e,s.I,u)},i.t.te=(e,s,u,o)=>{t.room._onCollisionDiscVsVertex?.(e,s.I,u,o)},i.t.nn=(e,s,u)=>{t.room._onModifyJoint?.(e,s,u)},i.t.Pr=(e,s,u,o,l)=>{t.room._onAutoTeams?.(e,s,u,o,l)},i.t.cn=(e,s)=>{t.room._onTimeLimitChange?.(e,s)},i.t.vn=(e,s)=>{t.room._onScoreLimitChange?.(e,s)},i.t.ye=e=>{t.room._onPlayerDiscCreated?.(e)},i.t.Sr=e=>{t.room._onPlayerDiscDestroyed?.(e)},i.t.kn=(e,s)=>{t.room._onPlayerAvatarChange?.(e,s)},i.t.Tn=(e,s)=>{t.room._onPlayerHeadlessAvatarChange?.(e,s)},i.t.On=(e,s)=>{t.room._onPlayersOrderChange?.(e,s)},i.t.mn=(e,s,u)=>{t.room._onPlayerTeamChange?.(e,s,u)},i.t.Sn=(e,s,u)=>{t.room._onTeamColorsChange?.(e,s,u)},i.t.yn=(e,s)=>{t.room._onTeamsLockChange?.(e,s)},i.t.wh=(e,s,u)=>{t.Z.isHost?(e=i.t.getPlayer(e),e&&u==1&&(e.nr=!0,t.Z.customClientIds.add(e.id))):u==0&&(t.Z.customClientIds.add(e),e=i.t.getPlayer(e),e&&(e.nr=!0),i.fu=!0,e=i.t.getPlayer(s),e&&(e.nr=!0),t.Z.customClientIds.add(s),i._(mo.create(1,s,1),0,!0))},i.t.Pn=(e,s,u)=>{t.room._onCustomEvent?.(e,s,u)},i.t.Nn=(e,s,u)=>{t.room._onBinaryCustomEvent?.(e,s,u)},i.t.Mn=(e,s,u)=>{t.room._onIdentityEvent?.(e,s,u)},i.t.Rn=(e,s,u,o)=>{t.room._onSetDiscProperties?.(e,s,u,o)},i.t.gn=e=>{t.room._onPingData?.(e)},i.t.jh=()=>t?.room?.hostPing||0,i.t.ph=()=>{r.Tt.Kv()},i.t.sn=e=>{t.room._onHandicapChange?.(e)},i.t.un=e=>{t.room?._onExtrapolationChange?.(e)},i.t._n=()=>{t.room._onTimeIsUp?.()},i.t.Bn=()=>{t.room._onPositionsReset?.()},i.t.Fh=function(e){r.Io!=e&&(r.Io=e,e=Pw.create(e),t.Z.W(e)!=!1&&i._(e))},i.t.he=function(e,s){t.room._onPlayerChat?.(e.id,s)},i.t.se=function(e,s,u,o){t.room._onAnnouncement?.(e,s,u,o)},i.t.Or=function(e){t.room._onGameStop?.(e?.id)},i.t.qn=function(e,s){t.room._onStadiumChange?.(s,e?.id)},i.t.we=function(e){t.room._onPlayerSyncChange?.(e?.id,e?.Ii)},i.t.Cn=function(e,s){t.room._onPlayerAdminChange?.(s?.id,s?.qi,e?.id)},i.t.ge=function(e,s,u,o){t.room._onKickRateLimitChange?.(s,u,o,e?.id)},i.t.le=function(e,s,u,o){e.B&&t.room._onPlayerDiscDestroyed?.(e),r.Qv?.(e.id),s!=null&&r.$v?.(e,s,o!=null?o.name:null,u),t.room._onPlayerLeave?.(e,s,u,o?.id),t.Z.customClientIds.delete(e.id)},i.t.ue=function(e,s){t.room._onPlayerChatIndicatorChange?.(e?.id,!s)},this.Tt.Ts=function(e){t.Z.W(e)!=!1&&i._(e)},this.tv=function(e){e=wo.create(1,e),t.Z.W(e)!=!1&&i._(e)},this.iv=function(e){e=wo.create(0,e),t.Z.W(e)!=!1&&i._(e)},this.al=function(e){e=Ow.create(e),t.Z.W(e)!=!1&&i._(e)},this.Yl=function(){var e=gw.create();t.Z.W(e)!=!1&&i._(e)},this.Zl=function(){var e=kw.create();t.Z.W(e)!=!1&&i._(e)},this.zl=function(){r.Xv()},this.no=function(e,s){if(s){var u=Li.create(e,s);t.Z.W(u)!=!1&&i._(u)}},this.io=this.Yv.bind(this),this.xl=function(){var e=Rw.create();t.Z.W(e)!=!1&&i._(e)},this.bl=function(){Di.Zv(t,i)},this.Dl=function(e){e=Tw.create(e),t.Z.W(e)!=!1&&i._(e)},this.ro=function(e){if(e)return r.Yr!=null?!1:(r.zv(),t.room._onRoomRecordingChange?.(!0),!0);if(r.Yr==null)return null;var s=r.Yr.stop();return r.Yr=null,t.room._onRoomRecordingChange?.(s),s},this.Go=this.xv.bind(this),this.Vu=po(this.Go),this.Dv=qw(function(){i.vt()},50);var n=t.Z.si.extrapolation;n=-200>n?-200:200<n?200:n,n!=0&&i.ch(t.Z.si.extrapolation)}}Di.Zv=function(t,i){for(var r=i.t.j,n=[],e=0,s=0,u=0;u<r.length;){var o=r[u];++u,o.P==zt.spec&&n.push(o.id),o.P==zt.red?++e:o.P==zt.blue&&++s}u=n.length;var l;u!=0&&(r=function(){return n.splice(Math.random()*n.length|0,1)[0]},u==1?(l=Li.create(r(),Math.random()<.5?zt.red:zt.blue),t.Z.W(l)!=!1&&i._(l)):s==e?(l=Li.create(r(),zt.red),t.Z.W(l)!=!1&&i._(l),l=Li.create(r(),zt.blue),t.Z.W(l)!=!1&&i._(l)):(e=s>e?zt.red:zt.blue,l=Li.create(r(),e),t.Z.W(l)!=!1&&i._(l)))};Di.prototype={zv:function(){this.Yr=new Nw(this.n,3)},et:function(){yw(this.Vu),mw(this.Dv),pw(this.Wv)},Yv:function(t){for(var i=[],r=0,n=this.n.t.j;r<n.length;){var e=n[r];++r,e.P==t&&i.push(Li.create(e.id,zt.spec))}for(t=0;t<i.length;){var s=i[t++];this.haxball.Z.W(s)!=!1&&this.n._(s)}},xv:function(){this.Vu=po(this.Go),this.Tt.vt(),this.n.vt(),this.bv()},bv:function(){var t=qo.now();this.haxball.Z.si.fps_limit==1&&t-this.Bo<28.333333333333336||(this.Bo=t,this.haxball.Z.extrapolatedRoomState=this.n.gr(),this.haxball.Z.renderer?.render?.(this.haxball.Z.extrapolatedRoomState))},Xl:function(t){var i;t!=this._o&&(i=mo.create(t?0:1),this.haxball.Z.W(i)!=!1&&(this.n._(i),this._o=t))},Xv:function(){if(this.n.t.e!=null){var t=Sw.create(this.n.t.e.xt!=120);this.haxball.Z.W(t)!=!1&&this.n._(t)}}};Cw(Di,[null,null,null,null,null,null,"input",null,null,null,null],[]);Co.B5=Di});var To=T((iq,Oo)=>{var{stunServers:Aw,httpUrl:jw,Ns:tq,setInterval:Ew,clearInterval:_w,console:go}=P(),Vi=Q(),{Ht:Ui,q:bi}=$(),{parseGeo:ko}=$i(),{w:Bw}=j(),{addRoomToList:Iw,removeRoomFromList:dw}=gi(),Gw=Pe(),{roomLink:Le,ho:Lw,oo:Vw}=Ne(),{RoomDataDetails:Uw}=ge(),Fw=Fr(),{SendChatIndicatorEvent:Hw,JoinRoomEvent:Jw,KickBanPlayerEvent:So,PingEvent:Kw}=oi(),Ww=Ni(),Qw=vo(),$w=Ge();function Xw(t,i){var r=Vw(i);r.onHostError=t.onError;var n=Lw(r),e=function(){go.log("internal event: LeaveRoom"),dw(r.room),e=null,s=null,r.plugins&&r.plugins.forEach(h=>{h.finalize?.(),h.room=null}),r.renderer&&(r.renderer.finalize?.(),r.renderer.room=null),r.config.finalize?.(),r.config.room=null,r.libraries.forEach(h=>{h.finalize?.(),h.room=null}),e=null,n.r=null,n.roomState=null,n.extrapolatedRoomState=null,n=null,r.room=null,r.ku?.()},s=function(){go.log("internal event: CreateRoomSucceeded"),s=null,r.room=new Gw(r.yu,n,r.libraries,r.config,r.plugins),Iw(r.room),r.room.client=r,r.room.Ar=r.Ar,r.room.hostPing=0,r.Cu?.(r.room);var h=r.room._onPlayerObjectCreated;h&&n.r?.n.t.j.forEach(h)},u=r.si;function o(){if(v.fs){var h=new Uw;h.Ft=r.Ft,h.name=c.name,h.j=v.Me!=null?v.Me:c.j.length,h.ru=v.Ln+1,h.Rt=v.Ne.flag,h.at=v.Vn==null?v.at!=null:v.Vn,h.Oe=v.Ne.Oe,h.Te=v.Ne.Te;var f=Bw.U(16);h.Y(f),h=f.Je(),v.Nu(h)}}var l=null,c=new Ww;c.name=t.name;var v=new Qw(r,{iceServers:Aw,du:jw+"api/host",state:c,Ft:r.Ft,Gu:t.token});v.Ne=ko(t.geo,u.geo,!1),v.av=!!t.noPlayer;var p;v.av||(p=new Fw,p.name=u.player_name,p.qi=!0,p.Rt=v.Ne.flag,p.Ct=u.avatar,p.nr=!0,c.j.push(p)),v.Un=!!t.unlimitedPlayerCount,v.fs=!!t.showInRoomList,v.Me=t.playerCount,v.Vn=t.fakePassword==null?null:!!t.fakePassword,v.Ln=(t.maxPlayerCount|0)-1,v.at=t.password==""?null:t.password,o();var C=new $w(r,v),m=Ew(function(){var h=Kw.create(v);n.W(h)!=!1&&v._(h)},3e3);return v.Eo=function(h){c.getPlayer(h)!=null&&(h=So.create(h,Ui(Vi.BadActorError).toString(),!1),n.W(h)!=!1&&v._(h))},v.Uv=function(h,f,q,w){var y=f.ci();if(25<y.length)throw new bi(Ui(Vi.PlayerNameTooLongError,q,w,y));var k=f.ci();if(3<k.length)throw new bi(Ui(Vi.PlayerCountryTooLongError,q,w,y,k));var S=f.oi();if(S!=null&&2<S.length)throw new bi(Ui(Vi.PlayerAvatarTooLongError,q,w,y,k,S));var R=r.room._modifyPlayerData;if(R){var A=R(h,y,k,S,q,w);if(!A)throw new bi(Ui(Vi.PlayerJoinBlockedByMPDError,q,w,y,k,S));[y,k,S]=A}if(y=Jw.create(h,y,k,S,q,w),n.W(y)==!1)throw new bi(Ui(Vi.PlayerJoinBlockedByORError,y));v._(y),o(),n.Fn.then(()=>{n.r?.n.Hn(Hw.create(0,h,0),h,!0)})},v.dv=function(h){c.getPlayer(h)!=null&&(h=So.create(h,null,!1),n.W(h)!=!1&&v._(h))},v.Cs=function(h){l=h,C.Xr=Le(h,v.at!=null),r.room._onRoomLink?.(C.Xr)},C.$v=function(h,f,q,w){v.Ev(h,f,q,w)},C.Qv=function(){o()},C.mu=function(){v.et(),C.et(),_w(m),e()},r.Jn=C.mu,C.mi.Bc=function(h){v.at=h,o(),l!=null&&(C.Xr=Le(l,v.at!=null)),r.room._onRoomPropertiesChange?.({password:h})},C.mi.vu=v.vu.bind(v),C.mi.lu=v.lu.bind(v),C.mi.cu=v.cu.bind(v),C.mi.wu=v.wu.bind(v),C.mi.pu=v.pu.bind(v),C.mi.qu=v.qu.bind(v),C.mi.Wl=function(h){if(h){var f={};if(h.hasOwnProperty("name")&&(f.name=c.name=h.name||""),h.hasOwnProperty("password")&&(f.password=v.at=h.password),h.hasOwnProperty("fakePassword")&&(f.fakePassword=v.Vn=h.fakePassword),h.hasOwnProperty("geo")){f.geo=h.geo;var q=ko(h.geo,u.geo,!1);p&&(p.Rt=q.flag)}h.hasOwnProperty("unlimitedPlayerCount")&&(f.unlimitedPlayerCount=v.Un=!!h.unlimitedPlayerCount),h.hasOwnProperty("showInRoomList")&&(f.showInRoomList=v.fs=!!h.showInRoomList),h.hasOwnProperty("playerCount")&&(f.playerCount=v.Me=h.playerCount),h.hasOwnProperty("maxPlayerCount")&&(f.maxPlayerCount=v.Ln=h.maxPlayerCount==null?null:h.maxPlayerCount-1),o(),h.hasOwnProperty("password")&&l!=null&&(C.Xr=Le(l,v.at!=null)),r.room._onRoomPropertiesChange?.(f)}},C.mi.Ql=function(h){v.Un=h},C.mi.$l=function(h){v.Vn=h,o()},n.isHost=!0,n.r=C,n.roomState=c,s(),r}Oo.B5=Xw});var Io=T((rq,Bo)=>{var{proxy:ai,backend:Ro,setTimeout:Yw,clearTimeout:Po,WebSocket:No,performance:tr,pako:Ue,RTCIceCandidate:Mo,RTCSessionDescription:Zw}=P(),ir=Q(),{Event:Ve}=B(),{Ht:rr,Mt:nr}=$(),{co:zw,wo:xw,po:Dw}=je(),bw=Ee(),jo=Ri(),{F:wn,w:Ci,Sf:Ao,extend:aw}=j(),tp=En();function Eo(t,i,r,n,e,s,u,o){this.Uu=!1,this.Fu=!1,this.yi=u,this.cr=o,!ai&&o&&(xw(),o=null);var l=this;this.st=new bw(0,i,n),this.st.Er=function(){l.Ge(nr.xo())},this.st.xr=function(){l.xr!=null&&l.xr(new Dw(l.st)),l.st=null,l.Lo()},this.st.Ru=function(c){l.Vo=c,ai?.WebSocketUrl&&(t=ai.WebSocketUrl),!t.endsWith("client")&&(!t.endsWith("/")&&(t+="/"),t+="client");var v=o?[o]:[];if(l.yi||ai?.WebSocketChangeOriginAllowed){var p={};l.yi&&(p.agent=l.yi),ai.WebSocketChangeOriginAllowed&&(p.headers={Origin:(Ro.secure?"https":"http")+"://"+Ro.hostname}),l.$=new No(t+"?id="+r+(s==null?"":"&token="+s),v,p)}else l.$=new No(t+"?id="+r+(s==null?"":"&token="+s),v);l.$.binaryType="arraybuffer",l.$.onclose=function(C){l.Uu||l.Ge(nr.bo(C.code))},l.$.onerror=function(){l.Uu||l.Ge(nr.Error())},l.$.onmessage=l.Au.bind(l),l.$.onopen=function(){l.Uo!=null&&l.Uo(),l.st.Tu(),l.Bu(l.Vo,l.st.ws,e),l.st.ps=l.Iu.bind(l),l.st.Ou.then(function(){l.vr(0,null)})}},this.st.cv()}Eo.prototype={tc:function(){this.Ge(nr.Do())},Lo:function(){try{this.$!=null&&(this.$.onclose=null,this.$.onmessage=null,this.$.onerror=null,this.$.onopen=null,this.$.close(),this.$=null)}catch{}this.st!=null&&(this.st.et(),this.st=null)},Ge:function(t){this.Er!=null&&this.Er(t),this.Lo()},Au:function(t){t=new wn(new DataView(t.data));var i=t.T(),r,n,e;switch(0<t.c.byteLength-t.l&&(t=new wn(new DataView(Ue.inflateRaw(t.Lt()).buffer),!1)),i){case 1:for(i=t.ci(),r=t.zn(),n=[],e=0;e<r.length;)n.push(new Mo(r[e++]));this.Eu(i,n,t);break;case 4:this._u(new Mo(t.zn()))}},Eu:function(t,i){var r=this;this.st.Tu(this.Fu?1e4:4e3),this.Uu=!0,this.Fo!=null&&this.Fo(),this.st.Pt.setRemoteDescription(new Zw({sdp:t,type:"answer"}),function(){for(var n=0;n<i.length;)r.st.Pt.addIceCandidate(i[n++])},function(){r.Ge(nr.Error())})},_u:function(t){this.st.Pt.addIceCandidate(t)},vr:function(t,i){if(this.$!=null){var r=Ci.U(32,!1);r.f(t),i!=null&&r.Xt(Ue.deflateRaw(i._t())),this.$.send(r._r())}},Bu:function(t,i,r){var n=Ci.U(32,!1);n.f(this.Fu?1:0),n.wi(t.sdp),n.We(i),r!=null&&n.Xt(r._t()),this.vr(1,n)},Iu:function(t){var i=Ci.U(32,!1);i.We(t),this.vr(4,i)}};function _o(t,i,r){this.haxball=t,this.Hu=[],this.Ju=[],this.Rs=new tp,this.ic=1,this.Ho=0,this.br=0,this.Ku=new Ao(50),this.Ps=new Ao(50),this.rc=1e3,this.Wu=rr(ir.Empty);var n=this;jo.call(this,r.state),this.Qu=r.nc,this.Jo=r.ec;var e=null;e=function(s){n.Le(0);var u=Ci.U();u.Vt(r.Ft),u.fi(r.at),n.Vi=new Eo(r.du,r.iceServers,i,zw,u,r.Gu,n.haxball.yi,n.haxball.cr),n.Vi.Fu=s,n.Vi.xr=function(l){n.Vi=null,n.st=l,l.cs=function(c){c=new wn(new DataView(c)),n.sc(c)},l.Ee=function(){n.br!=3&&n.Ve?.(rr(ir.ConnectionClosed)),n.et()},l=Yw(function(){n.Ve?.(rr(ir.GameStateTimeout)),n.et()},1e4),n.Kn=l,n.Le(2,n.st.Pt.remoteDescription.sdp)},n.Vi.Uo=function(){n.Le(1,n.Vi.Vo.sdp)};var o=!1;n.Vi.Fo=function(){return o=!0},n.Vi.Er=function(l){!s&&n.br==1&&o?(n.uc?.(),e(!0)):(n.Ve?.(l[0]),n.et(l[1]||l[0]))}},e(r.Ko!=null&&r.Ko)}_o.prototype=aw(jo.prototype,{et:function(t){this.Vi!=null&&(this.Vi.Er=null,this.Vi.tc(),this.Vi=null),Po(this.Kn),this.st!=null&&(this.st.Ee=null,this.st.et(),this.st=null),this.Wu=t??rr(ir.ConnectionClosed),this.Le(4),this.haxball._onRoomLeave?.(this.Wu)},Le:function(t,i){this.br!=t&&(this.br=t,this.haxball._onConnectionStateChange?.(t,i),this.ar!=null&&this.ar(t))},Zr:function(){return this.br==3},vt:function(){this.Zr()&&tr.now()-this.Ho>this.rc&&this.ju(),this.tn=tr.now()*this.Ji+this.Ku.$e(.5)-this.k,this.Wo()},gr:function(){return this.Zr()?(0>this.gi&&(this.gi=0),this.vh(tr.now()*this.Ji+this.Ku.$e(.5)-this.k+this.gi+this.Qs,this.Rs)):this.t},Wo:function(){0>this.tn&&(this.tn=0),this.tn>this.De&&(this.tn=this.De)},sc:function(t){switch(t.T()){case 0:this.hc(t);break;case 1:this.oc(t);break;case 2:this.fc(t);break;case 3:this.lc(t);break;case 4:this.vc(t);break;case 5:this.cc(t);break;case 6:this.wc(t)}},hc:function(t){var i=this;t=t.Lt(t.Jt());var r=Promise.resolve(null);this.Jo!=null&&(r=this.Jo.Hl(t)),r.catch(function(){return null}).then(function(n){i.pc(n)})},oc:function(t){for(t=Ue.inflateRaw(t.Lt()),t=new wn(new DataView(t.buffer,t.byteOffset,t.byteLength)),this.Bi=t.Mt(),this.k=t.ht(),this.Lr=t.ht(),this.ri=t.Jt(),this.tn=10,this.t.it(t);0<t.c.byteLength-t.l;)this.re(this.Qo(t));Po(this.Kn),this.Le(3)},pc:function(t){var i=Ci.U();i.f(0),t!=null?(i.Ut(t.byteLength),i.Xt(t)):i.Ut(0),i.Ut(this.Qu.byteLength),i.Ke(this.Qu),this.vi(i),this.Qu=null},vi:function(t,i){i==null&&(i=0),this.st.vi(i,t)},Qo:function(t){var i=t.ht(),r=t.Jt(),n=t.Mt(),e=t.ht();return t=Ve.ir(t),t.i=n,t.Gr=e,t.St=i,t.V=r,t},fc:function(t){t=this.Qo(t),this.re(t),t.i==this.Bi&&this.Rs.$f(t.Gr),this.$o()},wc:function(t){t=Ve.ir(t),t.i=0,t.Gr=0,t.apply(this.t),this.ni!=null&&this.ni(t)},lc:function(t){var i=t.ht();t=t.ht(),this.Ju.push({frame:i,ie:t}),this.$o()},$o:function(){if(this.br==3){for(var t=0,i=this.Ju,r,n;t<i.length;)r=i[t],++t,r.frame<=this.k||r.ie==this.Lr+this.ri+this.rr.Xf(r.frame)&&this.qc(r.frame-this.k);for(t=0,i=this.Ju,r=0,n=i.length;r<n;){var e=i[r++];e.frame>this.k&&(i[t]=e,++t)}for(;i.length>t;)i.pop();this.Rs.Wf(this.k)}},cc:function(t){var i=t.T()!=0,r=t.ci(),n="";0<t.c.byteLength-t.l&&(n=t.ci()),this.et(rr(ir.KickedNow,r,i,n))},vc:function(t){var i=t.g();t=t.g();var r=tr.now()-t;this.Ku.add(i-t*this.Ji),this.Ps.add(r);for(var n=i=0,e=this.Hu;n<e.length;){var s=e[n];if(++n,s>t)break;this.mc?.(s<t?-1:r),++i}this.Hu.splice(0,i)},ju:function(){var t=tr.now();this.Ho=t,this.Hu.push(t);var i=this.Ps.$e(.5)|0,r=Ci.U(),n=this.haxball.room?._modifyClientPing;n&&(i=n(i)),r.f(2),r.C(t),r.Ut(i),this.vi(r,2)},qc:function(t){this.lh(t),this.tn-=t,this.Wo()},_:function(t){if(this.br==3){var i=this.ic++,r=0;0>this.gi&&(this.gi=0),t.en.lt&&(r=this.k+(this.tn|0)+this.gi);var n=Ci.U(),e=this.haxball.room?._modifyFrameNo;n.f(1),e&&(r=e(r)),n.gt(r),n.gt(i),Ve.Cr(t,n),this.vi(n),t.en.ct&&(t.Gr=i,t.i=this.Bi,t.St=r,this.Rs.Ks(t))}}});Bo.B5=_o});var Fo=T((nq,Uo)=>{var{stunServers:ip,backendUrl:rp,console:vi}=P(),Go=Q(),{Ht:Lo,q:Vo}=$(),{w:np}=j(),ep=Pe(),{addRoomToList:sp,removeRoomFromList:Fe}=gi(),{roomLink:up,ho:hp,oo:op}=Ne(),fp=Ni(),lp=Io(),vp=Ge();function cp(t,i){var r=t.id,n=t.password,e=t.token,s=t.authObj;if(!r||!s)throw Lo(Go.JoinRoomNullIdAuthError);var u=op(i);n==""&&(n=null);var o=hp(u),l=function(y){vi.log("internal event: LeaveRoom",y.toString()),Fe(u.room),u._onConnectionStateChange=null,l=null,u.plugins&&u.plugins.forEach(k=>{k.finalize?.(),k.room=null}),u.renderer&&(u.renderer.finalize?.(),u.renderer.room=null),u.config.finalize?.(),u.config.room=null,u.libraries.forEach(k=>{k.finalize?.(),k.room=null}),u._onRoomLeave=null,o.r=null,o.roomState=null,o.extrapolatedRoomState=null,o=null,u.room=null,u.ku?.(y)},c=function(){vi.log("internal event: JoinRoomSucceeded"),u._onConnectionStateChange=null,c=null,u.room=new ep(u.yu,o,u.libraries,u.config,u.plugins),sp(u.room),u.room.client=u,u.room.Ar=u.Ar,u.Cu?.(u.room);var y=u.room?._onPlayerObjectCreated;y&&o.r?.n.t.j.forEach(y);var k=u.room?._onPlayerDiscCreated;k&&o.r?.n.t.j.filter(S=>S.B!=null).forEach(k)};u._onConnectionStateChange=function(y,k){vi.log("internal event: ConnectionStateChange"),u.so?.(y,k),y==4&&(u._onConnectionStateChange=null,c=null,u.room=null)},u._onRoomLeave=l;try{var v=u.si.crappy_router,p=new fp,C=np.U();C.wi(u.si.player_name),C.wi(u.si.geo.flag),C.fi(u.si.avatar);var m=ip,h=rp,f=new lp(u,r,{iceServers:m,du:h,state:p,Ft:u.Ft,nc:C.Je(),at:n,Ko:v,Gu:e,ec:s});vi.log("Connecting to master..."),u.Jn=function(){f.ar=null,f.Ve=null,f.et()};var q=function(y){Fe(u.room),u.Jn=null,u.gu?.(y)},w=function(){u.Jn=null;var y=new vp(u,f);y.Xr=up(r,!1),f.mc=function(k){u.room._onPingChange?.(k,f.Ps.$e(.5),f.Ps.max())},y.mu=function(){f.ar=null,f.et(),y.et()},f.ar=function(){f.ar=null,y.et(),y.Yr?.stop(),q(f.Wu)},o.isHost=!1,o.r=y,o.roomState=p,c?.()};f.Ve=function(y){f.Ve=null,f.ar=null,y.code==1&&y.params[0]==4004&&u.vs?.(),q(y)},f.ar=function(y){switch(y){case 1:vi.log("Connecting to peer...");break;case 2:vi.log("Awaiting state...");break;case 3:w()}},f.uc=function(){vi.log("Trying reverse connection..."),u.uo?.()}}catch(y){vi.log(y instanceof Vo?y.zt:y),Fe(u.room),u.Jn=null,u.gu?.(Lo(Go.Unknown,y instanceof Vo?y.zt:y))}return u}Uo.B5=cp});var Wo=T((eq,Ko)=>{var{performance:wp,pako:pp,E:qp}=P(),mp=Ni(),Jo=Ri(),{Event:He}=B(),{F:Ho,extend:yp}=j(),{Sandbox:Cp}=ye();function Je(t){Jo.call(this,t),this.A=1,this.$r=0,this.yc=0,this.frozen=!1,this.Cc=[],this.newEvents=[],this.maxFrameNo=0}Je.prototype=yp(Jo.prototype,{_:function(){},gr:function(){return this.t},vt:function(){var t=this.maxFrameNo;if(!(this.k>=t))do{var i=0,r=this.newEvents[0];if(!r||this.k>r.St)break;for(;r?.St==this.k;)r.apply(this.t),this.Cc.push(r),r=this.newEvents[++i];this.t.vt(1),this.k++,this.newEvents.splice(0,i)}while(this.k<t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.k=this.k*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.vt(t)}});function gp(t,i={},r){var n=new mp,e=new Je(n),s=new Cp(e,i,r),u;function o(c){var v=c.ht(),p=c.Jt(),C=c.Mt(),m=c.ht();return c=He.ir(c),c.i=C,c.Gr=m,c.St=v,c.V=p,c}function l(c){c.St==e.k&&c.V<=e.ri?(c.V=e.ri++,e.receiveEvent(c)):e.rr.Ks(c)}for(t=new Ho(new DataView(t.buffer,t.byteOffset,t.byteLength)),e.Bi=0,e.$r=wp.now(),e.yc=e.k=t.ht(),e.Lr=t.ht(),e.ri=t.Jt(),n.it(t);t.l<t.c.byteLength;)l(o(t));return t=null,u={state:n,readStream:c=>{if(e.maxFrameNo=c.ht(),c.c.byteLength!=c.c.byteOffset+c.l){var v=pp.inflateRaw(new Uint8Array(c.c.buffer,c.l)),p,C,m,h,f;for(c=new Ho(new DataView(v.buffer,v.byteOffset,v.byteLength));c.l<v.byteLength;)for(h=e.maxFrameNo-c.Mt(),p=c.Mt(),f=0;f<p;f++)C=c.Mt(),m=He.ir(c,!0),m.i=C,m.St=h,e.newEvents.push(m)}},readImmediateStream:c=>{var v=e.maxFrameNo=c.ht(),p=c.Mt(),C=He.ir(c,!0);C.i=p,C.St=v,e.newEvents.push(C)},takeSnapshot:function(){return n.copy()},useSnapshot:function(c){var v=c.copy();s.Xh(v),n=v,u.state=v},setSimulationSpeed:function(c){e.setSpeed(c)},runSteps:function(c){e.runSteps(c)},destroy:s.et},Object.defineProperty(u,"gameState",{get(){return u.state.e}}),Object.defineProperty(u,"currentPlayerId",{get(){return 0}}),Object.defineProperty(u,"currentFrameNo",{get(){return e.k}}),Object.defineProperty(u,"maxFrameNo",{get(){return e.maxFrameNo}}),u}qp(Je,[null,null,null,null,null,null,null,null,null,null,null,null,"speed",null,null,null,null,null,null],[]);Ko.B5=gp});var $o=T((sq,Qo)=>{var{noVariableValueChangeEvent:kp,E:Sp}=P();function er(t,i=null){this.name=t,this.defineMetadata(i)}er.prototype.defineMetadata=function(t){};er.prototype.defineVariable=function(t){var{name:i,value:r}=t,n=this;kp?n[i]=r:Object.defineProperty(n,i,{get:()=>r,set:e=>{var s=r;e!=s&&(r=e,n.room?._onVariableValueChange?.(n,i,s,r))}})};er.prototype.setVariableGUIProps=function(t,...i){};Sp(er,["name"],[]);Qo.B5=er});var Yo=T((uq,Xo)=>{var{noVariableValueChangeEvent:Op}=P();function pn(t=null){this.defineMetadata(t)}pn.prototype.defineMetadata=function(t){};pn.prototype.defineVariable=function(t){var{name:i,value:r}=t,n=this;Op?n[i]=r:Object.defineProperty(n,i,{get:()=>r,set:e=>{var s=r;e!=s&&(r=e,n.room?._onVariableValueChange?.(n,i,s,r))}})};pn.prototype.setVariableGUIProps=function(t,...i){};Xo.B5=pn});var zo=T((hq,Zo)=>{var Tp=kn(),{noVariableValueChangeEvent:Rp,E:Pp}=P();function sr(t,i=!1,r=null){this.name=t,this.defineMetadata(r),this.defineVariable({name:"active",description:"Whether this plugin is active or not.",type:Tp.Boolean,value:i})}sr.prototype.defineMetadata=function(t){};sr.prototype.defineVariable=function(t){var{name:i,value:r}=t,n=this;Rp?n[i]=r:Object.defineProperty(n,i,{get:()=>r,set:e=>{var s=r;e!=s&&(r=e,n.room?._onVariableValueChange?.(n,i,s,r))}})};sr.prototype.setVariableGUIProps=function(t,...i){};Pp(sr,["name"],[]);Zo.B5=sr});var Do=T((oq,xo)=>{var{noVariableValueChangeEvent:Np}=P();function qn(t=null){this.defineMetadata(t)}qn.prototype.defineMetadata=function(t){};qn.prototype.defineVariable=function(t){var{name:i,value:r}=t,n=this;Np?n[i]=r:Object.defineProperty(n,i,{get:()=>r,set:e=>{var s=r;e!=s&&(r=e,n.room?._onVariableValueChange?.(n,i,s,r))}})};qn.prototype.setVariableGUIProps=function(t,...i){};xo.B5=qn});var Ep=T((fq,ao)=>{var Mp=Ye(),Ap=ts(),jp=gi(),bo=$();ao.B5=(t,i)=>{var{ErrorCodes:r,...n}=vs();Mp(t,i);var{D:e,F:s,w:u}=j(),{J:o,K:l}=wi(),{Point:c}=ki(),v=jn(),{bt:p,...C}=qe(),{createSandbox:m}=ye();return{version:"1.4.0",...n,Callback:{add:v.Uf,remove:v.Ff},Utils:$i(),EventFactory:Bh(),Room:{create:To(),join:Fo(),sandbox:m,streamWatcher:Wo()},Replay:C,Query:Ap,Library:$o(),RoomConfig:Yo(),Plugin:zo(),Renderer:Do(),Language:jp.Language,Errors:{HBError:bo.HBError,ErrorCodes:r},Impl:{Core:{Point:c,TeamColors:Xr(),Team:ft()},Stream:{F:s,w:u},Utils:{D:e,J:o,K:l,M:rn(),q:bo.q}}}}});return Ep();})();if (typeof exports !== 'undefined') { if (typeof module !== 'undefined' && module.exports) exports = module.exports = MM; exports.abcHaxballAPI = MM; } else if (typeof root !== 'undefined') root['abcHaxballAPI'] = MM; else window['abcHaxballAPI'] = MM;